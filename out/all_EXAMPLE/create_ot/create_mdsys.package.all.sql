CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."MD" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
b218 1075
UnC2GhOXJ4uuv0qj0mafIZ6S1AYwg82QDMcFe9MCF5APr2NMjQKYrxcJk2kUCyk5UVQa23Fy
1BMx/7Way0OwFhwG3aFvxCeP6QZQZ3hSz3fORmFq4tg/if4u0pq1okOlPhhF+WkqgSYgUWut
IisF6JLzVXpzgVUZgJjfg3bLYT4FBX32IbK1PycKhrlQYAV5urszs9efupCAgUNyBU0gSrA/
7C322fnuUrEcE/jo0Lz/sHkcSvB5g32L3vm5I87BESDGQ0MFPlpdnA4eEyd4biSdLRPHGjOg
mm4dT8m1ktdWYYj92lNe9XMgY00T/Gl4s9frX5zQv74kgNWSO5qzefVY5DqDMiXoTBuku11l
XR4HkA+8blIVgkXB2eq/eq5ju7aMlproctiQPEaWcl4VqFVOQ9VjD516rnm4J2pe/W6DMLBK
Uvx1sEpS/LTaMqxeSXoyrF5JGSZebntDJl5ue0yuABLuLmRPqsIIll4pI8WVJonoZVeNk64B
uMWEXpVXXDRBxdQm4OzFrybxgcO93I1Qwz7cjeKw8lLlieiXuOV+AFxAXgEhXEoPSq2qrYvO
Q3US6qzhsNEw/OGw0c9e2aRZ8JZyCYaoVU4BZHesXpmuYlcNMLDUBdileW8oKdsSE5Q0156a
yQjI3DTEk68F2KV5bygp2xITlDTXnprJCMjcNMSTrwXYpXlvKCkUgdyQ7neIrpDud1i/J3HX
RuqCehq2uycbU+y9ZMkwWkkZPVlSKl6H16XI3O0KWAYn6DTs7qiQI+qClT1ZQipqhHuB4skY
ClibJ0AH9fxM147qgkM9dCgpd5jsPuLJlwqIHCUmvypecdeJ6oJ6Gl67J+hT7D5kyTBasBk9
WVIqXofXpcjc7QpYBifoNOzuqJAj6oLWCljuPXQoKV+/KoJT7IiH16XI/zDqgtYKWO49dCgp
X/mSBQblLZ/rPHNqQ8yagzHrQ9dXy9RQswXBEbWOUlb4J7oz/McrKm7fai1PmrSp1njSU7ve
zeqAbj04nSQ0bpl+xJunkZg9sYSub+BFxiN4ueLvw5iSH7kXDxwKO7E7cU9Wh0R70jKCtkro
vLsosLmEgsW6nMbeMao9nGDOvCT/vNeczIeW0eZzgdPlHNHBRdbtoxtFIsR5u9AFOr6BW0a6
3A9CYs8W/F0D4ooTJAiQeaHYD1fOh2jYDQF4IXicB7OcZOSrHJ/tEPOOjJaap5XYYAcMZB32
9XZGjBTiFin8H8E1ZerIaP4rnoCO9SemjA7+zrvMdyA1BiUrzw2UnGHxkmBS9NW+waxxg+Vk
YfwlKxDwCtFSKjO6yEWgXA95PWM7kqvqTAbs2p1EWFx5PqxZlM0v/C5NeGsZRiNOW/zXreP5
J3/lv2otfgr0ZEooTILGs5QG7O3V5nOv6yMkUjy1Eu1ztlNXT5FQFLhSItVgA+DxxTW306fF
6QMJ8cWEt2WnxYADwPHlZ7ee8fzCqNLfmXFurtMhoVTFkZmoYS+RmThhL5GZqGEvkZk4YS+R
mahhL5GZOGEvkZmoYS+RmThhaZGZbGFpkZkBYWmRmWxhaZGZAWFpkZlsYWmRmQFhaZGZbGFp
kZkBYWmRmWxhaZGZAWF8hW9AtBXKugTJmdZ+LTQw2dBo/8Y3armauyRJ1t8h0oR8n/Vz53SD
i1DRF8ba8m4R/oQTT6Sk27XeEK6iulGku+Ac1fst047V7i0JL9XpLQkc1R0tZY7Vhi3AL9WA
LcAcCqYtno4KDi3d0V+fydqXpNBsyqcOVBUL+5qZmwCqsAJhv6CYBcxTu6/5SjPP2p7+ALQz
8560zFO7+3TKZ0uMuJodYGdocIDuvFtdqREVSuSyG1F0NoifjrkSqYjnAIpNaP6pIi/3tMy+
u/u3ytwtjMCaHcM1zuCAQ7xbptYO1ErkECqspNt7n8O5Emfa46mKTWj+pqwvBDHMvrv7q6hx
wozAmh3g5o4BgEO8W3YCtJdK5Ff7fx/m0dqruRJn4Kbb/y3k3BYrq4zG17lXIAmkKFWvHLks
UKEpgaE52h2+tVrOjcuagbJPIDgcUkWbfbFs7byYClQszo1tJy1LKRWGbYUsvLfu0GCYtYER
uem7g+XE11fQzbGWnUVqizC59nLL/DgOEWOYqmxPIFPEn5IMDkLSwf2QB9EFwVN9NP8Lkmu1
kDGqqvWS5JhcvwGqNsbQ1VX3CMukrdzqlqoSjyfhMLskTDKdxE85FLijl+gBuKP/6JQRq615
Eznnbuh+q4midRThbPMb9GehRqFmadMB8RaJolgUnmzMG/TmoYmhUWnTAfEWidt8oXSJ23yh
dInbfKF0idt8oXSJ23yhdIkUyfHbafF1odOEoeAboXRs9FgUf4kUyfHbafFGofFnodMboeFs
oXUUvYkUOPEUafFGofFnoQkboZ5soVgUPokUAfEaafGJofHmoQkboZ5s+nUUiIkUC/GRafFf
ofE1oWUboTls+nUUiIkUF/FdafFuofGEocAbocts+lgUrYkUF/FdafGsoQlnoZ4boftsPnUU
RIkacPGOafGsoQnKoV1KWma/4bA+E8mPoHUuDI+giS7Zj6BuLtbxfCOUWmQVfVzK7Z6M6jfS
xV+HRCUKfCOUWmQVfVzK7Z6M6jfSxV+HRCUKfCOUWmQVfVzK7Z6M6jfSxV+HRCUKfCOUWmQV
fVzK7Z6M6jfSxV+HRCUKfCOUWmQVfVzK7Z6M6jfSxV+HRCUKfCOUWmQVfVzK7Z6M6jfSxV+H
RCUKfCOUWmQVfVzK7Z6M6jfSxV+HRCUKfCOUWmQVfVzK7Z6M6jfSxV+HRCUKfCOUWmQVfVzK
7Z6M6jfSxV+HRCUKfCOUWmQVfVzK7Z6M6jfSxV+HRCUKfCOUWmQVfVzK7Z6M6jfSxV+HRCUK
fCOUWmSXfVyo7cWM6gLS5V+HlCUKZSNcWmSXfVyo7cWM6gLS5V+HlCUKZSNcWmSXfVyo7cWM
6gLS5V+HlCUKZSNcWmSXfVyo7cWM6gLS5V+HlCUKZSNcWmSXfVyo7cWM6gLS5V+HlCUKZSNc
WmSXfVyo7cWM6gLS5V+HlCUKZSNcWmSXfVyo7cWM6gLS5fT4F6uxg3KYRSTkduauYtJ35q5i
0nfmrmLSd+auYtJ35q5i0nfmrmLSd+auYtJ35q5i0nfmrmLSd+auYtJ35q5i0nfmrmLSd+au
YtJ35q55O7BhMaQHMbu5THMnBSOW/0DJcRHUAslxEdQCyXER1ALJcRHUAslxEdQCyXER1ALJ
cRHUAslxEdQCyXER1ALJcRHUAslxEdQCyXER1ALJcRHUAsl23uU75GT3zH3lAuKjfeUC4qN9
5QLio33lAuKjfeUC4qN95QLio33lAuKjfeUC4qN95QLio33lAuKjfeUC4qN95QLio33lAuKD
tSDqeRkrBbVNv/jEgDiAzvOxlg+KcXKdSnFyDUHoJQcOYOIHk677X4CptJTKM+fIU+EUHPsJ
6ql372eLnshCNoVM+8DQpgLVZ68dV0EkpDLk7nf3HmvrXqYI54/AUTBXzHHcjihJGNn0Bu6i
Uq3Mem4W0UkYB7aVQ6IIuFFTbhYc3I6ctpVq9PzAUSNXzEzcwyhJ5dn0/O6iMq3MAG5N0Unl
B7Y9Q6KBuFFFbk0c3MOctj1q9PzAUSNXzEzcwyhJq5y28Ae28Nn01Gr01EOicoAqnXqeM4EL
OdMuuqT8i1JOcBMtLZlRMHOodtq1wd75ch8VVDVtrU5U9QhG0bzdB7d74gv9jgUOtNSU2mAt
C47aYC2G6YqV/ozV+CWD1CLfeb4tLsN4xuiau4NVuGhcDIPaqrdvmm6wSc7/GkHicJAZnaVF
eyEhk3QusUDJbWs6g1AGI32CWalrZm1r9tnxlcKReZPCVKfYYgxv2fENAfrgk0VhVkxWDLGn
Y20BKYPC9S1WTLqn0adj9tkllcJHg8JH4JPJvNi6M3r8/ICaz6r5ZHvRLKFM7SS3gzpWCAof
oTr+OlxlEqfO9dffzfgMjprMd4EH5SauELaymD71qrYuqti8C+yqdMEfhgX4oJaaUZUSnTFU
c91UTjctCFvUG7wL1QUos4u4Sy4xYMEtmgzaIbPN6yhC3OWN/vjACcdXM5j8zlcQlhM/g67s
7ouT1HLMmjxqOnJIkk7B68EksHIgsClP7GFKMzLSgQ+1HZQDd7E=
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."MDERR" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
97f 150
2vn7lP+WT43SewZZ7P8/kb23DsAwg83xJK5qfC+VWE4+SFYJOaOXdylLD6w922G5bmboVgGR
Kf4sU0AmhArLdPNdOR6RtfWqGcfJxMFv0jLkepDjDeXjTUV0mPrxduTKyu4OBBIk5hT6lxzk
j56zN5XtLX78gj8qq59rmUOG3Ggj2/Xc5lYRqMQpAMiwJqC0K9LsCVtKXbOlUJQeVT4cvyQe
uAWCvaBauAGOIS+iW0xMueq3omQq7a6w23pDkztHbpFrE1McQTxewA+B6dQP97Ol11GSR1x4
5EJ/KSBYkc6fCNIPEifO2c+dplGwGf1hEs45fmSKTA==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."MDPRVT_FEATURE" AS

  PROCEDURE sdo_invalidate_feature(feature IN VARCHAR2);
  PRAGMA restrict_references(sdo_invalidate_feature, wnds, rnps, wnps, trust);

  PROCEDURE sdo_register_feature(feature IN VARCHAR2);
  PRAGMA restrict_references(sdo_register_feature, wnds, rnps, wnps, trust);

END mdprvt_feature;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."MDPRVT_SRID" AS

  PROCEDURE sdo_invalidate_srid_metadata(srid IN NUMBER,
                                         srid_type IN VARCHAR2 DEFAULT NULL);
  PRAGMA restrict_references(sdo_invalidate_srid_metadata, wnds, rnps, wnps, trust);

  FUNCTION get_unit(srid IN NUMBER,
                    srid_type IN VARCHAR2 DEFAULT NULL,
                    unit_id OUT NUMBER,
                    unit_factor OUT NUMBER,
                    unit_name OUT VARCHAR2) -- MUST BE VARCHAR2(80)
    RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;
  FUNCTION get_unit(srid IN NUMBER,
                    srid_type IN VARCHAR2 DEFAULT NULL,
                    x_unit_id OUT NUMBER,
                    x_unit_factor OUT NUMBER,
                    x_unit_name OUT VARCHAR2, -- MUST BE VARCHAR2(80)
                    y_unit_id OUT NUMBER,
                    y_unit_factor OUT NUMBER,
                    y_unit_name OUT VARCHAR2) -- MUST BE VARCHAR2(80)
    RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;
  FUNCTION get_unit(srid IN NUMBER,
                    srid_type IN VARCHAR2 DEFAULT NULL,
                    x_unit_id OUT NUMBER,
                    x_unit_factor OUT NUMBER,
                    x_unit_name OUT VARCHAR2, -- MUST BE VARCHAR2(80)
                    y_unit_id OUT NUMBER,
                    y_unit_factor OUT NUMBER,
                    y_unit_name OUT VARCHAR2, -- MUST BE VARCHAR2(80)
                    z_unit_id OUT NUMBER,
                    z_unit_factor OUT NUMBER,
                    z_unit_name OUT VARCHAR2) -- MUST BE VARCHAR2(80)
    RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

  FUNCTION is_geodetic(srid IN NUMBER,
                       srid_type IN VARCHAR2 DEFAULT NULL)
    RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(is_geodetic, wnds, rnps, wnps, trust);

  FUNCTION get_dims(srid IN NUMBER)
    RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(get_dims, wnds, rnps, wnps, trust);

  FUNCTION get_ref_kind(srid IN NUMBER)
    RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(get_ref_kind, wnds, rnps, wnps, trust);

END mdprvt_srid;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_META" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
885 150
LnJQNla+SM2eQqi3AMDQt8v6ucUwg82JLUiEqHTp2sHVBLo+/FAqt9akrCcTSR3wZTq1tWbI
O/zTYzvlTXLvj8cIDTg3zsv05pUG5rLh0p9HBOB473kZ1ZOpRYgtBBQ3afjCfPq0Np/R+vOr
eu+kDscF/+SbwhOwDBSKYKgecCFbyU/F9BhxY+JCQxqEyvbOpm2AS8TNG2hv8kkgSxfARGuY
8y24H+1PN5PCHJdHlNjBknv2dm3Lybi8iF55dSIEgwGuMzHdUqgu0oY5b9S7q1fznfaPqsAG
qBsjpNeBeWSq0pwiZn8NgB6GLJx8Q6FS/vX7Zj28tw==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."MDPRVT_GMD" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
3af 134
2TZJcPDWL0T+0AuAKrc9/q/v99wwg0PrLZ4VfC85cMEilfCeBo/89RsXAH7xwKEY3JOe3Kzj
zuTo0SukGDIhhkP5pVU1J8PaVr3czTrAmOiGJkTS6ftL9CtEn280nyYUF/FrqasdG4MDKD+X
GVGocJmyGINRVsGteM9XjyOi8r7lT+xDiWnjm1Y7e79i3PdKJa+r2FdtKT0kqyIJ+aGq1qeO
P28/UA7OyyoES+yyUwTdYAMbiOFCOFX2tcZYB4NOhn54ufd8gyzkUfj2vuxpNihVl4X8z1wM
t8QB0ifAW9bHNMM=
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_VERS" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
67 9a
jsL25kQ7gqVNfb6hCdsNlnQ9KEIwg2KXf8upynRnzBfcs8x4jO9eAmD0aVmZV8C1un1nm8T+
LPV4QTb8xyAUnlTZlHpTxeZxI1zTZyo5jyBxbmtrU5kBE/4yLYROEyNwYgTvQo/sy9P24+2Q
InBfiG0=
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."MD_LRS" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
3226 824
NGH/hXhLffVRwK1EwFm2kKGk5xQwgz26NSAeFi8Zxz9ExsODO4PD1TuJtg1J0WTfVKn47LeW
Es+7wvi1Y0TaYa/U3zl4I/0+XFWRQO4TOIv9DmzcGVI5fcGagdCq+elT8SAU6aGVrWmT6uFX
FQa4V8pGksT5zMCnZ6NSZz5x5wJ7HSt34cLm2Smu0IsPL2aOLfJRZpTqCBYJPOepXbGaDXvQ
6vIYq8dKZNe3CXhN/CSbPWwUi8LRppkAHWNtK5XVuA9SDt6WX2Ft1cMenKAS/JUq8VOXYyNH
Tlv1IiGWgfAM6bahBOmh3PL9EYGzjsF8X/4VeOEF53HtfD0jV4UYmHwJD43dmeb0yBQ1bItX
cqhkNwaxdv+2D3zscCYiiZ+KbfSu/MHnZFk0jA3pxp0/kxtBnyoIoLf0BvBxGjiGdztyuncx
f2UfbBZ7WdhX+ljLt0X12D3X47oM9do0aiWbTEyKwPPKszm9mYaWo0BvvOV3z9aie/vL4yl9
VlRl5mOI4P2yS8og8uiA0zQSM4al+3FnlhkL0Gboubs3EIRNAuTZnh5Bd2wYU6Kzb9rReJ7q
iVrVZSJ8rhl8JJV7JZegcaAiRzfJmy5i44X1HhPH16GgTdJ/yVKLPcQqpBPDFkXM2fa9C8nz
HI3vYPPzje8bLQehsJSgsYfc0NiM2kpYFqm/lTCudZ0cKdaC+RKlRNEOPIR/QfFANXiGpC6s
2n/Z+eKaoi57RW3m+sCPdRt4azACiTFyEOAqt/KcYnILwyC7qOUTyrzIcWPXC058jLO4Pdic
d1HIdVDikX1TV8sxuACU7CtkfT0e0eYNBflKjI7zAXALMyhDXGHuyITMHuBM8hNeeXGbzM0V
gHlGiy+EOyb2Ut4uB+WNUrOE4ZT8k2jhx2zR6nfeX/X8M6XNPFMgW2ktjHY5ndum+aTZb6wl
tCogAYCwoPt5BOLcGfaTJ+3lk9mj34IsnscphNm/XHzyofqb9uieqonx5g3qkcrTujLXZ6IW
5/q916t1HVDEd5RfZfoWoUWJHrbAYEKals7D9nRY/AzqumWeTwlsyqMe/w2W2IekiJsmmBRz
oG3isxHvD+V7FIViKp+XQBbR9vpFfix6nU3RgskF5jvJC37+3X04kLcoZ1kjxKYPxt9VIuNW
8LsHl+YeVxsuxe/D9GvStMdfj9f0Qf9F3/BBLE+P0J0cy9w/67pSh2FhJmYQhiMD38mqhZHw
bLajLpxcilXias+zA/2vPIUTIiSCYmlIahODB+t/LeIiXVTYkJiNr0jJaMtKbk5W/Chu6rPi
UEdEIgfSF3S5s7+ar18B8n5hcSJlmVSWQHWkNpm3GXamqILEv7U77D1ER5bJuONkb26Uy/DH
INyBMhhpvdwljPnuyeE/+BsL3H0clwYGHIgnT+4gxtXIGTjlalS/WB44yQvF3gPSTosaGiQA
YjH0n+Hlmik/7auVMrKoLNdEPwdFOCJ5wTjIDqkjedhwch3W/d4l5kHT1Ky/wqXdXgLM5tsp
xPJav7UaxrKs1OCwBb9ASRc1vLAC69bKIKGUFjKYO7RYeetKXH1uRyKScRt03RZ0jHBxosC8
HVAF6FHifdoBmt4DRIsNpR0JjBAe53xVtRr+0cE0Tk7jQWq13fkArupczswRP3mul3HEbma6
mAikSbBFssbJhv3cmFi/g5U0CDIaKYHwB94obdQ/qOXEfkhw6EramRLp/pvDH0fS2A7zQTHg
fcIbpwr10cnt7qh0NxWOvNpgM2Ib8CFHDBNjMV92cadFrKHJVc+tvOA4mhFfvpJRef2+kgxl
je2YewAfzexNnPW0zA9YT22C2kAcKGObGrmfE/D2LTJuqSbQxsHKFF56HoeGBQp69rvMgXAe
ux/g0BJXYkzVpcFH4u2c5GzGZWCHkxM99Py8xSpPmdyOJWGrDTwjJw0/LocAU324aABC/RrN
xOt5yOFdF2f83Op+m4hSKbJCuiHHCNcPNy2uuTQPOtLO0sFqQqJ1V7bmtUmi5f6vriktiTjE
9PJCntr8xUNtuzcNCzjVUIlNGTQitTMsGuZVYg==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_LRS" AUTHID current_user AS

--
--
-- functions/procedure for defining, creating and manipulating LRS geometric segments
--
--

   --
   -- define an LRS geometric segment, all measures will be automatically populated
   --

   PROCEDURE define_geom_segment(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                 dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                 start_measure IN NUMBER ,
                                 end_measure   IN NUMBER );


   PROCEDURE define_geom_segment(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                 dim_array     IN MDSYS.SDO_DIM_ARRAY);




   PROCEDURE define_geom_segment(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                 start_measure IN NUMBER ,
                                 end_measure   IN NUMBER ,
                                 tolerance     IN NUMBER DEFAULT 1.0e-8);



   PROCEDURE define_geom_segment(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                 tolerance     IN NUMBER DEFAULT 1.0e-8);




   PROCEDURE define_geom_segment_3d(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                    dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                    start_measure IN NUMBER ,
                                    end_measure   IN NUMBER );

   PROCEDURE define_geom_segment_3d(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                    dim_array     IN MDSYS.SDO_DIM_ARRAY);


   PROCEDURE define_geom_segment_3d(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                    start_measure IN NUMBER ,
                                    end_measure   IN NUMBER ,
                                    tolerance     IN NUMBER DEFAULT 1.0e-8);

   PROCEDURE define_geom_segment_3d(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                    tolerance     IN NUMBER DEFAULT 1.0e-8);






   --
   -- create a new geometric segment by clipping the given geometric segment
   --

   FUNCTION clip_geom_segment(geom_segment  IN MDSYS.SDO_GEOMETRY,
                              dim_array     IN MDSYS.SDO_DIM_ARRAY,
                              start_measure IN NUMBER,
                              end_measure   IN NUMBER)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION clip_geom_segment(geom_segment  IN MDSYS.SDO_GEOMETRY,
                              start_measure IN NUMBER,
                              end_measure   IN NUMBER,
                              tolerance     IN NUMBER DEFAULT 1.0e-8)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   FUNCTION clip_geom_segment_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                 dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                 start_measure IN NUMBER,
                                 end_measure   IN NUMBER)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION clip_geom_segment_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                 start_measure IN NUMBER,
                                 end_measure   IN NUMBER,
                                 tolerance     IN NUMBER DEFAULT 1.0e-8)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   --
   -- split a geometric segment into two
   --


   PROCEDURE split_geom_segment(geom_segment  IN  MDSYS.SDO_GEOMETRY,
                                dim_array     IN  MDSYS.SDO_DIM_ARRAY,
                                split_measure IN  NUMBER,
                                segment_1     OUT MDSYS.SDO_GEOMETRY,
                                segment_2     OUT MDSYS.SDO_GEOMETRY);


   PROCEDURE split_geom_segment(geom_segment  IN  MDSYS.SDO_GEOMETRY,
                                split_measure IN  NUMBER,
                                segment_1     OUT MDSYS.SDO_GEOMETRY,
                                segment_2     OUT MDSYS.SDO_GEOMETRY,
                                tolerance     IN  NUMBER DEFAULT 1.0e-8);



   PROCEDURE split_geom_segment_3d(geom_segment  IN  MDSYS.SDO_GEOMETRY,
                                   dim_array     IN  MDSYS.SDO_DIM_ARRAY,
                                   split_measure IN  NUMBER,
                                   segment_1     OUT MDSYS.SDO_GEOMETRY,
                                   segment_2     OUT MDSYS.SDO_GEOMETRY);


   PROCEDURE split_geom_segment_3d(geom_segment  IN  MDSYS.SDO_GEOMETRY,
                                   split_measure IN  NUMBER,
                                   segment_1     OUT MDSYS.SDO_GEOMETRY,
                                   segment_2     OUT MDSYS.SDO_GEOMETRY,
                                   tolerance     IN  NUMBER DEFAULT 1.0e-8);



   --
   -- concatenate two geometric segments into one
   --

   FUNCTION concatenate_geom_segments(geom_segment_1 IN MDSYS.SDO_GEOMETRY,
                                      dim_array_1    IN MDSYS.SDO_DIM_ARRAY,
                                      geom_segment_2 IN MDSYS.SDO_GEOMETRY,
                                      dim_array_2    IN MDSYS.SDO_DIM_ARRAY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION concatenate_geom_segments(geom_segment_1 IN MDSYS.SDO_GEOMETRY,
                                      geom_segment_2 IN MDSYS.SDO_GEOMETRY,
                                      tolerance      IN NUMBER DEFAULT 1.0e-8)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   FUNCTION concatenate_geom_segments_3d(geom_segment_1 IN MDSYS.SDO_GEOMETRY,
                                         dim_array_1    IN MDSYS.SDO_DIM_ARRAY,
                                         geom_segment_2 IN MDSYS.SDO_GEOMETRY,
                                         dim_array_2    IN MDSYS.SDO_DIM_ARRAY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION concatenate_geom_segments_3d(geom_segment_1 IN MDSYS.SDO_GEOMETRY,
                                         geom_segment_2 IN MDSYS.SDO_GEOMETRY,
                                         tolerance      IN NUMBER DEFAULT 1.0e-8)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;





   --
   -- general segment scaling function
   --

   FUNCTION scale_geom_segment(geom_segment  IN MDSYS.SDO_GEOMETRY,
                               dim_array     IN MDSYS.SDO_DIM_ARRAY,
                               start_measure IN NUMBER,
                               end_measure   IN NUMBER,
                               shift_measure IN NUMBER)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION scale_geom_segment(geom_segment  IN MDSYS.SDO_GEOMETRY,
                               start_measure IN NUMBER,
                               end_measure   IN NUMBER,
                               shift_measure IN NUMBER,
                               tolerance     IN NUMBER DEFAULT 1.0e-8)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




--
--
-- LRS query functions/procedures
--
--

   --
   -- check if the given geometric segment is valid
   --

   FUNCTION valid_geom_segment(geom_segment IN MDSYS.SDO_GEOMETRY,
                               dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION valid_geom_segment(geom_segment IN MDSYS.SDO_GEOMETRY)
   RETURN VARCHAR2 PARALLEL_ENABLE;



   FUNCTION valid_geom_segment_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                                  dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION valid_geom_segment_3d(geom_segment IN MDSYS.SDO_GEOMETRY)
   RETURN VARCHAR2 PARALLEL_ENABLE;




   --
   -- check if the measure information of a given geometric segment is defined
   -- the geom segment must be valid, (type, length, and no of dim, etc)
   --

   FUNCTION is_geom_segment_defined(geom_segment IN MDSYS.SDO_GEOMETRY,
                                    dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION is_geom_segment_defined(geom_segment IN MDSYS.SDO_GEOMETRY)
   RETURN VARCHAR2 PARALLEL_ENABLE;



   FUNCTION is_geom_segment_defined_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                                       dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN VARCHAR2 PARALLEL_ENABLE;

   FUNCTION is_geom_segment_defined_3d(geom_segment IN MDSYS.SDO_GEOMETRY)
   RETURN VARCHAR2 PARALLEL_ENABLE;



   --
   -- check if the given LRS point is valid
   --


   FUNCTION valid_lrs_pt(point      IN MDSYS.SDO_GEOMETRY,
                         dim_array  IN MDSYS.SDO_DIM_ARRAY)
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION valid_lrs_pt(point      IN MDSYS.SDO_GEOMETRY)
   RETURN VARCHAR2 PARALLEL_ENABLE;



   FUNCTION valid_lrs_pt_3d(point      IN MDSYS.SDO_GEOMETRY,
                            dim_array  IN MDSYS.SDO_DIM_ARRAY)
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION valid_lrs_pt_3d(point      IN MDSYS.SDO_GEOMETRY)
   RETURN VARCHAR2 PARALLEL_ENABLE;




   --
   -- check if the given measure falls within the start/end measures
   -- of a given geometric segment
   --


   FUNCTION valid_measure(geom_segment IN MDSYS.SDO_GEOMETRY,
                          dim_array    IN MDSYS.SDO_DIM_ARRAY,
                          measure      IN NUMBER)
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION valid_measure(geom_segment IN MDSYS.SDO_GEOMETRY,
                          measure      IN NUMBER)
   RETURN VARCHAR2 PARALLEL_ENABLE;



   FUNCTION valid_measure_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                             dim_array    IN MDSYS.SDO_DIM_ARRAY,
                             measure      IN NUMBER)
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION valid_measure_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                             measure      IN NUMBER)
   RETURN VARCHAR2 PARALLEL_ENABLE;






   --
   -- check if two given geometric segments are connected
   --

   FUNCTION connected_geom_segments(geom_segment_1 IN MDSYS.SDO_GEOMETRY,
                                    dim_array_1    IN MDSYS.SDO_DIM_ARRAY,
                                    geom_segment_2 IN MDSYS.SDO_GEOMETRY,
                                    dim_array_2    IN MDSYS.SDO_DIM_ARRAY)

   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION connected_geom_segments(geom_segment_1 IN MDSYS.SDO_GEOMETRY,
                                    geom_segment_2 IN MDSYS.SDO_GEOMETRY,
                                    tolerance      IN NUMBER)


   RETURN VARCHAR2 PARALLEL_ENABLE;



   FUNCTION connected_geom_segments_3d(geom_segment_1 IN MDSYS.SDO_GEOMETRY,
                                       dim_array_1    IN MDSYS.SDO_DIM_ARRAY,
                                       geom_segment_2 IN MDSYS.SDO_GEOMETRY,
                                       dim_array_2    IN MDSYS.SDO_DIM_ARRAY)

   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION connected_geom_segments_3d(geom_segment_1 IN MDSYS.SDO_GEOMETRY,
                                       geom_segment_2 IN MDSYS.SDO_GEOMETRY,
                                       tolerance      IN NUMBER)
   RETURN VARCHAR2 PARALLEL_ENABLE;





   --
   -- return the length of the given geometric segment
   --

   FUNCTION geom_segment_length(geom_segment IN MDSYS.SDO_GEOMETRY,
                                dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN NUMBER PARALLEL_ENABLE;


   FUNCTION geom_segment_length(geom_segment IN MDSYS.SDO_GEOMETRY,
                                tolerance    IN NUMBER DEFAULT 1.0e-8)

   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION geom_segment_length_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                                   dim_array    IN MDSYS.SDO_DIM_ARRAY)

   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION geom_segment_length_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                                   tolerance    IN NUMBER DEFAULT 1.0e-8)

   RETURN NUMBER PARALLEL_ENABLE;




   --
   -- return the start point of the geometric segment
   --

   FUNCTION geom_segment_start_pt(geom_segment IN MDSYS.SDO_GEOMETRY,
                                  dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION geom_segment_start_pt(geom_segment IN MDSYS.SDO_GEOMETRY)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION geom_segment_start_pt_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                                     dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION geom_segment_start_pt_3d(geom_segment IN MDSYS.SDO_GEOMETRY)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   --
   -- return the start measure of the geometric segment
   --


   FUNCTION geom_segment_start_measure(geom_segment IN MDSYS.SDO_GEOMETRY,
                                       dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN NUMBER PARALLEL_ENABLE;


   FUNCTION geom_segment_start_measure(geom_segment IN MDSYS.SDO_GEOMETRY)
   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION geom_segment_start_measure_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                                          dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN NUMBER PARALLEL_ENABLE;


   FUNCTION geom_segment_start_measure_3d(geom_segment IN MDSYS.SDO_GEOMETRY)
   RETURN NUMBER PARALLEL_ENABLE;



   --
   -- return the end point of the geometric segment
   --

   FUNCTION geom_segment_end_pt(geom_segment IN MDSYS.SDO_GEOMETRY,
                                dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION geom_segment_end_pt(geom_segment IN MDSYS.SDO_GEOMETRY)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION geom_segment_end_pt_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                                   dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION geom_segment_end_pt_3d(geom_segment IN MDSYS.SDO_GEOMETRY)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   --
   -- return the end point of the geometric segment
   --

   FUNCTION geom_segment_end_measure(geom_segment IN MDSYS.SDO_GEOMETRY,
                                     dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN NUMBER PARALLEL_ENABLE;


   FUNCTION geom_segment_end_measure(geom_segment IN MDSYS.SDO_GEOMETRY)

   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION geom_segment_end_measure_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                                        dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN NUMBER PARALLEL_ENABLE;


   FUNCTION geom_segment_end_measure_3d(geom_segment IN MDSYS.SDO_GEOMETRY)
   RETURN NUMBER PARALLEL_ENABLE;





   --
   -- return the measure of a LSR point
   --

   FUNCTION get_measure(point     IN MDSYS.SDO_GEOMETRY,
                        dim_array IN MDSYS.SDO_DIM_ARRAY)
   RETURN NUMBER PARALLEL_ENABLE;


   FUNCTION get_measure(point     IN MDSYS.SDO_GEOMETRY)
   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION get_measure_3d(point     IN MDSYS.SDO_GEOMETRY,
                           dim_array IN MDSYS.SDO_DIM_ARRAY)
   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION get_measure_3d(point     IN MDSYS.SDO_GEOMETRY)
   RETURN NUMBER PARALLEL_ENABLE;



   --
   -- locate the point w.r.t a given geometric segment
   --

   FUNCTION locate_pt(geom_segment IN MDSYS.SDO_GEOMETRY,
                      dim_array    IN MDSYS.SDO_DIM_ARRAY,
                      measure      IN NUMBER,
                      offset       IN NUMBER DEFAULT 0)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION locate_pt(geom_segment IN MDSYS.SDO_GEOMETRY,
                      measure      IN NUMBER,
                      offset       IN NUMBER default 0,
                      tolerance    IN NUMBER default 1.0e-8)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION locate_pt_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                         dim_array    IN MDSYS.SDO_DIM_ARRAY,
                         measure      IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

   FUNCTION locate_pt_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                         measure      IN NUMBER,
                         tolerance    IN NUMBER DEFAULT 1.0e-8)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;





   --
   -- return the projection point of a given point w.r.t. to a given geometric segment
   --

   FUNCTION project_pt(geom_segment    IN MDSYS.SDO_GEOMETRY,
                       dim_array       IN MDSYS.SDO_DIM_ARRAY,
                       point           IN MDSYS.SDO_GEOMETRY,
                       point_dim_array IN MDSYS.SDO_DIM_ARRAY )

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION project_pt(geom_segment    IN MDSYS.SDO_GEOMETRY,
                       dim_array       IN MDSYS.SDO_DIM_ARRAY,
                       point           IN MDSYS.SDO_GEOMETRY)


   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION project_pt(geom_segment    IN  MDSYS.SDO_GEOMETRY,
                       dim_array       IN  MDSYS.SDO_DIM_ARRAY,
                       point           IN  MDSYS.SDO_GEOMETRY,
                       point_dim_array IN  MDSYS.SDO_DIM_ARRAY,
                       offset          OUT NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;





   FUNCTION project_pt(geom_segment    IN MDSYS.SDO_GEOMETRY,
                       point           IN MDSYS.SDO_GEOMETRY,
                       tolerance       IN NUMBER DEFAULT 1.0e-8)


   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION project_pt(geom_segment    IN  MDSYS.SDO_GEOMETRY,
                       point           IN  MDSYS.SDO_GEOMETRY,
                       tolerance       IN  NUMBER,
                       offset          OUT NUMBER )


   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   FUNCTION project_pt_3d(geom_segment    IN MDSYS.SDO_GEOMETRY,
                          dim_array       IN MDSYS.SDO_DIM_ARRAY,
                          point           IN MDSYS.SDO_GEOMETRY,
                          point_dim_array IN MDSYS.SDO_DIM_ARRAY )

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION project_pt_3d(geom_segment    IN MDSYS.SDO_GEOMETRY,
                          dim_array       IN MDSYS.SDO_DIM_ARRAY,
                          point           IN MDSYS.SDO_GEOMETRY)


   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION project_pt_3d(geom_segment    IN  MDSYS.SDO_GEOMETRY,
                          dim_array       IN  MDSYS.SDO_DIM_ARRAY,
                          point           IN  MDSYS.SDO_GEOMETRY,
                          point_dim_array IN  MDSYS.SDO_DIM_ARRAY,
                          offset          OUT NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   FUNCTION project_pt_3d(geom_segment    IN MDSYS.SDO_GEOMETRY,
                          point           IN MDSYS.SDO_GEOMETRY,
                          tolerance       IN NUMBER DEFAULT 1.0e-8)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION project_pt_3d(geom_segment    IN  MDSYS.SDO_GEOMETRY,
                          point           IN  MDSYS.SDO_GEOMETRY,
                          tolerance       IN  NUMBER,
                          offset          OUT NUMBER)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;







---
--- LRS 817 features declaration
---



   --
   -- return geom segment measure range
   --

   FUNCTION measure_range(geom_segment IN MDSYS.SDO_GEOMETRY,
                          dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN NUMBER PARALLEL_ENABLE;


   FUNCTION measure_range(geom_segment IN MDSYS.SDO_GEOMETRY)
   RETURN NUMBER PARALLEL_ENABLE;




   FUNCTION measure_range_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                             dim_array    IN MDSYS.SDO_DIM_ARRAY)
   RETURN NUMBER PARALLEL_ENABLE;


   FUNCTION measure_range_3d(geom_segment IN MDSYS.SDO_GEOMETRY)
   RETURN NUMBER PARALLEL_ENABLE;






   --
   -- Convert standard dim info to lrs diminfo by adding an additional measure informaiotn
   --

   FUNCTION convert_to_lrs_dim_array(dim_array   IN MDSYS.SDO_DIM_ARRAY,
                                     dim_name    IN VARCHAR2,
                                     dim_pos     IN INTEGER,
                                     lower_bound IN NUMBER DEFAULT NULL,
                                     upper_bound IN NUMBER DEFAULT NULL,
                                     tolerance   IN NUMBER DEFAULT NULL)

   RETURN MDSYS.SDO_DIM_ARRAY PARALLEL_ENABLE;



   --
   -- Convert standard dim info to lrs diminfo by adding an additional measure informaiotn
   --

   FUNCTION convert_to_lrs_dim_array(dim_array   IN MDSYS.SDO_DIM_ARRAY,
                                     dim_name    IN VARCHAR2,
                                     lower_bound IN NUMBER DEFAULT NULL,
                                     upper_bound IN NUMBER DEFAULT NULL,
                                     tolerance   IN NUMBER DEFAULT NULL)

   RETURN MDSYS.SDO_DIM_ARRAY PARALLEL_ENABLE;



   FUNCTION convert_to_lrs_dim_array(dim_array   IN MDSYS.SDO_DIM_ARRAY,
                                     lower_bound IN NUMBER DEFAULT NULL,
                                     upper_bound IN NUMBER DEFAULT NULL,
                                     tolerance   IN NUMBER DEFAULT NULL)

   RETURN MDSYS.SDO_DIM_ARRAY PARALLEL_ENABLE;





   FUNCTION convert_to_lrs_dim_array_3d(dim_array   IN MDSYS.SDO_DIM_ARRAY,
                                        dim_name    IN VARCHAR2,
                                        lower_bound IN NUMBER DEFAULT NULL,
                                        upper_bound IN NUMBER DEFAULT NULL,
                                        tolerance   IN NUMBER DEFAULT NULL)

   RETURN MDSYS.SDO_DIM_ARRAY PARALLEL_ENABLE;




   FUNCTION convert_to_std_dim_array(dim_array   IN MDSYS.SDO_DIM_ARRAY)
   RETURN MDSYS.SDO_DIM_ARRAY PARALLEL_ENABLE;


   FUNCTION convert_to_std_dim_array(dim_array   IN MDSYS.SDO_DIM_ARRAY,
                                     m_pos       IN INTEGER)
   RETURN MDSYS.SDO_DIM_ARRAY PARALLEL_ENABLE;



   FUNCTION convert_to_std_dim_array_3d(dim_array   IN MDSYS.SDO_DIM_ARRAY)
   RETURN MDSYS.SDO_DIM_ARRAY PARALLEL_ENABLE;





   --
   -- Convert standard linestring geometry to an LRS geom segment
   --

   FUNCTION convert_to_lrs_geom(standard_geom IN MDSYS.SDO_GEOMETRY,
                                dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                m_pos         IN INTEGER,
                                start_measure IN NUMBER ,
                                end_measure   IN NUMBER )
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION convert_to_lrs_geom(standard_geom IN MDSYS.SDO_GEOMETRY,
                                dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                m_pos         IN INTEGER DEFAULT NULL)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION convert_to_lrs_geom(standard_geom IN MDSYS.SDO_GEOMETRY,
                                dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                start_measure IN NUMBER ,
                                end_measure   IN NUMBER )
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION convert_to_lrs_geom(standard_geom IN MDSYS.SDO_GEOMETRY,
                                m_pos         IN INTEGER,
                                start_measure IN NUMBER,
                                end_measure   IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION convert_to_lrs_geom(standard_geom IN MDSYS.SDO_GEOMETRY,
                                start_measure IN NUMBER,
                                end_measure   IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION convert_to_lrs_geom(standard_geom IN MDSYS.SDO_GEOMETRY,
                                m_pos         IN INTEGER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   FUNCTION convert_to_lrs_geom(standard_geom IN MDSYS.SDO_GEOMETRY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   FUNCTION convert_to_lrs_geom_3d(standard_geom IN MDSYS.SDO_GEOMETRY,
                                   dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                   start_measure IN NUMBER DEFAULT NULL,
                                   end_measure   IN NUMBER DEFAULT NULL)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION convert_to_lrs_geom_3d(standard_geom IN MDSYS.SDO_GEOMETRY,
                                   start_measure IN NUMBER DEFAULT NULL,
                                   end_measure   IN NUMBER DEFAULT NULL)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   --
   -- Convert an LRS geometry to a standard linestring geometry
   --

   FUNCTION convert_to_std_geom(lrs_geom IN MDSYS.SDO_GEOMETRY,
                                dim_array     IN MDSYS.SDO_DIM_ARRAY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION convert_to_std_geom(lrs_geom IN MDSYS.SDO_GEOMETRY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   FUNCTION convert_to_std_geom_3d(lrs_geom      IN MDSYS.SDO_GEOMETRY,
                                   dim_array     IN MDSYS.SDO_DIM_ARRAY)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION convert_to_std_geom_3d(lrs_geom IN MDSYS.SDO_GEOMETRY)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;





   --
   -- Update standard geometry layer to an LRS geometry layer, metadata is updated as well
   --

   FUNCTION convert_to_lrs_layer(table_name    IN VARCHAR2,
                                 column_name   IN VARCHAR2,
                                 lower_bound   IN NUMBER DEFAULT NULL,
                                 upper_bound   IN NUMBER DEFAULT NULL,
                                 tolerance     IN NUMBER DEFAULT NULL)
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION convert_to_lrs_layer(table_name    IN VARCHAR2,
                                 column_name   IN VARCHAR2,
                                 dim_name      IN VARCHAR2,
                                 dim_pos       IN INTEGER,
                                 lower_bound   IN NUMBER DEFAULT NULL,
                                 upper_bound   IN NUMBER DEFAULT NULL,
                                 tolerance     IN NUMBER DEFAULT NULL)
   RETURN VARCHAR2 PARALLEL_ENABLE;



   FUNCTION convert_to_lrs_layer_3d(table_name    IN VARCHAR2,
                                    column_name   IN VARCHAR2,
                                    lower_bound   IN NUMBER DEFAULT NULL,
                                    upper_bound   IN NUMBER DEFAULT NULL,
                                    tolerance     IN NUMBER DEFAULT NULL)
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION convert_to_lrs_layer_3d(table_name    IN VARCHAR2,
                                    column_name   IN VARCHAR2,
                                    dim_name      IN VARCHAR2,
                                    lower_bound   IN NUMBER DEFAULT NULL,
                                    upper_bound   IN NUMBER DEFAULT NULL,
                                    tolerance     IN NUMBER DEFAULT NULL)
   RETURN VARCHAR2 PARALLEL_ENABLE;



   --
   -- Update standard geometry layer to an LRS geometry layer, metadata is updated as well
   --

   FUNCTION convert_to_std_layer(table_name    IN VARCHAR2,
                                 column_name   IN VARCHAR2)
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION convert_to_std_layer_3d(table_name    IN VARCHAR2,
                                    column_name   IN VARCHAR2)
   RETURN VARCHAR2 PARALLEL_ENABLE;



   --
   -- LRS 817 feature
   -- return a new geom_segment by translateing the original geom_segment
   --

   FUNCTION translate_measure(geom_segment IN MDSYS.SDO_GEOMETRY,
                              dim_array    IN MDSYS.SDO_DIM_ARRAY,
                              translate_m  IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION translate_measure(geom_segment IN MDSYS.SDO_GEOMETRY,
                              translate_m  IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION translate_measure_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                                 dim_array    IN MDSYS.SDO_DIM_ARRAY,
                                 translate_m  IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION translate_measure_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                                 translate_m  IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   --
   -- LRS 817 feature
   -- return a new geom_segment by reversing the original geom segment
   --

   FUNCTION reverse_measure(geom_segment IN MDSYS.SDO_GEOMETRY,
                            dim_array    IN MDSYS.SDO_DIM_ARRAY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION reverse_measure(geom_segment IN MDSYS.SDO_GEOMETRY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION reverse_measure_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                               dim_array    IN MDSYS.SDO_DIM_ARRAY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION reverse_measure_3d(geom_segment IN MDSYS.SDO_GEOMETRY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   --
   -- LRS 817 find the measure of the closest pt of a given pt w.r.t. an LRS segment
   -- first project the pt onto the LRS segment then get the measure of the projection pt
   --

   FUNCTION find_measure(geom_segment           IN MDSYS.SDO_GEOMETRY,
                         dim_array              IN MDSYS.SDO_DIM_ARRAY,
                         point                  IN MDSYS.SDO_GEOMETRY,
                         point_dim_array        IN MDSYS.SDO_DIM_ARRAY DEFAULT NULL)

   RETURN NUMBER PARALLEL_ENABLE;




   FUNCTION find_measure(geom_segment IN MDSYS.SDO_GEOMETRY,
                         point        IN MDSYS.SDO_GEOMETRY,
                         tolerance    IN NUMBER DEFAULT 1.0e-8)

   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION find_measure_3d(geom_segment        IN MDSYS.SDO_GEOMETRY,
                            dim_array           IN MDSYS.SDO_DIM_ARRAY,
                            point               IN MDSYS.SDO_GEOMETRY,
                            point_dim_array     IN MDSYS.SDO_DIM_ARRAY DEFAULT NULL)

   RETURN NUMBER PARALLEL_ENABLE;


   FUNCTION find_measure_3d(geom_segment IN MDSYS.SDO_GEOMETRY,
                            point        IN MDSYS.SDO_GEOMETRY,
                            tolerance    IN NUMBER DEFAULT 1.0e-8)

   RETURN NUMBER PARALLEL_ENABLE;

   FUNCTION find_offset(geom_segment            IN MDSYS.SDO_GEOMETRY,
                        dim_array               IN MDSYS.SDO_DIM_ARRAY,
                        point                   IN MDSYS.SDO_GEOMETRY,
                        point_dim_array         IN MDSYS.SDO_DIM_ARRAY DEFAULT NULL)

   RETURN NUMBER PARALLEL_ENABLE;




   FUNCTION find_offset(geom_segment IN MDSYS.SDO_GEOMETRY,
                        point        IN MDSYS.SDO_GEOMETRY,
                        tolerance    IN NUMBER DEFAULT 1.0e-8)

   RETURN NUMBER PARALLEL_ENABLE;





   --
   -- LRS 817 dynamic segmentation, an alias of clip_geom_segment
   --


   FUNCTION dynamic_segment(geom_segment  IN MDSYS.SDO_GEOMETRY,
                            dim_array     IN MDSYS.SDO_DIM_ARRAY,
                            start_measure IN NUMBER,
                            end_measure   IN NUMBER )

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION dynamic_segment(geom_segment  IN MDSYS.SDO_GEOMETRY,
                            start_measure IN NUMBER,
                            end_measure   IN NUMBER,
                            tolerance     IN NUMBER DEFAULT 1.0e-8)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION dynamic_segment_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                               dim_array     IN MDSYS.SDO_DIM_ARRAY,
                               start_measure IN NUMBER,
                               end_measure   IN NUMBER )

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION dynamic_segment_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                               start_measure IN NUMBER,
                               end_measure   IN NUMBER,
                               tolerance     IN NUMBER DEFAULT 1.0e-8)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   --
   -- LRS 817 convert a measure to a percentage (0%~100%) w.r.t. a given geom segment
   --


   FUNCTION measure_to_percentage(geom_segment IN MDSYS.SDO_GEOMETRY,
                                  dim_array    IN MDSYS.SDO_DIM_ARRAY,
                                  measure      IN NUMBER)

   RETURN NUMBER PARALLEL_ENABLE;


   FUNCTION measure_to_percentage(geom_segment IN MDSYS.SDO_GEOMETRY,
                                  measure      IN NUMBER)

   RETURN NUMBER PARALLEL_ENABLE;




   --
   -- LRS 817 convert a percentage (0%~100%) to a measure w.r.t. given geom segment
   --

   FUNCTION percentage_to_measure(geom_segment IN MDSYS.SDO_GEOMETRY,
                                  dim_array    IN MDSYS.SDO_DIM_ARRAY,
                                  percentage   IN NUMBER)

   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION percentage_to_measure(geom_segment IN MDSYS.SDO_GEOMETRY,
                                  percentage   IN NUMBER)

   RETURN NUMBER PARALLEL_ENABLE;



   --
   -- reset the measure values to NULL
   --
   PROCEDURE reset_measure(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                           dim_array     IN MDSYS.SDO_DIM_ARRAY);


   PROCEDURE reset_measure(geom_segment  IN OUT MDSYS.SDO_GEOMETRY);



   --
   -- Redefine the LRS segment (ignore all current measures) and repopulate measure info. based on
   -- the given start/end measure, this is different from define_geom_segment which keeps old measure info
   -- if exist.
   --

   PROCEDURE redefine_geom_segment(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                   dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                   start_measure IN NUMBER ,
                                   end_measure   IN NUMBER );


   PROCEDURE redefine_geom_segment(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                   dim_array     IN MDSYS.SDO_DIM_ARRAY);




   PROCEDURE redefine_geom_segment(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                   start_measure IN NUMBER ,
                                   end_measure   IN NUMBER ,
                                   tolerance     IN NUMBER DEFAULT 1.0e-8);



   PROCEDURE redefine_geom_segment(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                   tolerance     IN NUMBER DEFAULT 1.0e-8);




   PROCEDURE redefine_geom_segment_3d(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                      dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                      start_measure IN NUMBER ,
                                      end_measure   IN NUMBER );


   PROCEDURE redefine_geom_segment_3d(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                      dim_array     IN MDSYS.SDO_DIM_ARRAY);



   PROCEDURE redefine_geom_segment_3d(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                      start_measure IN NUMBER ,
                                      end_measure   IN NUMBER ,
                                      tolerance     IN NUMBER DEFAULT 1.0e-8);


   PROCEDURE redefine_geom_segment_3d(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                                      tolerance     IN NUMBER DEFAULT 1.0e-8);





---
--- 82 LRS Features
---


   --
   -- set the measure value of the closest point (using snap_to_pt) in the given geometry
   --

   FUNCTION set_pt_measure(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                           dim_array     IN MDSYS.SDO_DIM_ARRAY,
                           point         IN MDSYS.SDO_GEOMETRY,
                           pt_dim_array  IN MDSYS.SDO_DIM_ARRAY,
                           measure       IN NUMBER )
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION  set_pt_measure(point         IN OUT MDSYS.SDO_GEOMETRY,
                            dim_array     IN MDSYS.SDO_DIM_ARRAY,
                            measure       IN NUMBER )
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION  set_pt_measure(point         IN OUT MDSYS.SDO_GEOMETRY,
                            measure       IN NUMBER )
   RETURN VARCHAR2 PARALLEL_ENABLE;



   FUNCTION set_pt_measure(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                           point         IN MDSYS.SDO_GEOMETRY,
                           measure       IN NUMBER )
   RETURN VARCHAR2 PARALLEL_ENABLE;




   FUNCTION set_pt_measure_3d(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                              dim_array     IN MDSYS.SDO_DIM_ARRAY,
                              point         IN MDSYS.SDO_GEOMETRY,
                              pt_dim_array  IN MDSYS.SDO_DIM_ARRAY,
                              measure       IN NUMBER )
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION set_pt_measure_3d(geom_segment  IN OUT MDSYS.SDO_GEOMETRY,
                              point         IN MDSYS.SDO_GEOMETRY,
                              measure       IN NUMBER )
   RETURN VARCHAR2 PARALLEL_ENABLE;



   --
   -- reverse the direction of the geometry (shape pt order )
   --

   FUNCTION reverse_geometry(geom          IN MDSYS.SDO_GEOMETRY,
                             dim_array     IN MDSYS.SDO_DIM_ARRAY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION reverse_geometry(geom          IN MDSYS.SDO_GEOMETRY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   --
   -- generate an offset curve w.r.t. to an LRS geometry
   --

   -- for geodetic offset, consider arc_tolerance

   FUNCTION offset_geom_segment(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                start_measure IN NUMBER,
                                end_measure   IN NUMBER,
                                offset        IN NUMBER,
                                unit          IN VARCHAR2)


   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   -- for geodetic offset, consider arc_tolerance

   FUNCTION offset_geom_segment(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                start_measure IN NUMBER,
                                end_measure   IN NUMBER,
                                offset        IN NUMBER,
                                tolerance     IN NUMBER,
                                unit          IN VARCHAR2)


   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION offset_geom_segment(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                start_measure IN NUMBER,
                                end_measure   IN NUMBER,
                                offset        IN NUMBER)


   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION offset_geom_segment(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                start_measure IN NUMBER,
                                end_measure   IN NUMBER,
                                offset        IN NUMBER,
                                tolerance     IN NUMBER)


   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION offset_geom_segment(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                start_measure IN NUMBER,
                                end_measure   IN NUMBER,
                                offset        IN NUMBER)


   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION is_measure_increasing(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                  dim_array     IN MDSYS.SDO_DIM_ARRAY)


   RETURN VARCHAR2 PARALLEL_ENABLE;



   FUNCTION is_measure_increasing(geom_segment  IN MDSYS.SDO_GEOMETRY)

   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION is_measure_increasing_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                     dim_array     IN MDSYS.SDO_DIM_ARRAY)


   RETURN VARCHAR2 PARALLEL_ENABLE;



   FUNCTION is_measure_increasing_3d(geom_segment  IN MDSYS.SDO_GEOMETRY)

   RETURN VARCHAR2 PARALLEL_ENABLE;




   FUNCTION is_measure_decreasing(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                  dim_array     IN MDSYS.SDO_DIM_ARRAY)


   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION is_measure_decreasing(geom_segment  IN MDSYS.SDO_GEOMETRY)

   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION is_measure_decreasing_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                     dim_array     IN MDSYS.SDO_DIM_ARRAY)


   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION is_measure_decreasing_3d(geom_segment  IN MDSYS.SDO_GEOMETRY)

   RETURN VARCHAR2 PARALLEL_ENABLE;



   FUNCTION validate_lrs_geometry(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                  dim_array     IN MDSYS.SDO_DIM_ARRAY)

   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION validate_lrs_geometry(geom_segment  IN MDSYS.SDO_GEOMETRY)
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION validate_lrs_geometry_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                     dim_array     IN MDSYS.SDO_DIM_ARRAY)

   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION validate_lrs_geometry_3d(geom_segment  IN MDSYS.SDO_GEOMETRY)
   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION find_lrs_dim_pos(table_name    IN VARCHAR2,
                             column_name   IN VARCHAR2)
   RETURN INTEGER PARALLEL_ENABLE;


   --
   -- get previous shape point based on the given measure
   --

   FUNCTION get_prev_shape_pt (geom_segment  IN MDSYS.SDO_GEOMETRY,
                               dim_array     IN MDSYS.SDO_DIM_ARRAY,
                               measure       IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION get_prev_shape_pt (geom_segment  IN MDSYS.SDO_GEOMETRY,
                               measure       IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION get_prev_shape_pt_3d (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                  dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                  measure       IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION get_prev_shape_pt_3d (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                  measure       IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   --
   -- get previous shape point based on the given point
   --


   FUNCTION get_prev_shape_pt (geom_segment  IN MDSYS.SDO_GEOMETRY,
                               dim_array     IN MDSYS.SDO_DIM_ARRAY,
                               point         IN MDSYS.SDO_GEOMETRY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION get_prev_shape_pt (geom_segment  IN MDSYS.SDO_GEOMETRY,
                               point         IN MDSYS.SDO_GEOMETRY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION get_prev_shape_pt_3d (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                  dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                  point         IN MDSYS.SDO_GEOMETRY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION get_prev_shape_pt_3d (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                  point         IN MDSYS.SDO_GEOMETRY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   --
   -- get the next shape point based on the given measure
   --


   FUNCTION get_next_shape_pt (geom_segment  IN MDSYS.SDO_GEOMETRY,
                               dim_array     IN MDSYS.SDO_DIM_ARRAY,
                               measure       IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION get_next_shape_pt (geom_segment  IN MDSYS.SDO_GEOMETRY,
                               measure       IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION get_next_shape_pt_3d (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                  dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                  measure       IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION get_next_shape_pt_3d (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                  measure       IN NUMBER)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   --
   -- get the next shape point based on  the given point
   --


   FUNCTION get_next_shape_pt (geom_segment  IN MDSYS.SDO_GEOMETRY,
                               dim_array     IN MDSYS.SDO_DIM_ARRAY,
                               point         IN MDSYS.SDO_GEOMETRY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION get_next_shape_pt (geom_segment  IN MDSYS.SDO_GEOMETRY,
                               point         IN MDSYS.SDO_GEOMETRY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION get_next_shape_pt_3d (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                  dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                  point         IN MDSYS.SDO_GEOMETRY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



   FUNCTION get_next_shape_pt_3d (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                  point         IN MDSYS.SDO_GEOMETRY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;




   --
   -- get previous measure basd on the given measure
   --


   FUNCTION get_prev_shape_pt_measure(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                      dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                      measure        IN NUMBER)

   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION get_prev_shape_pt_measure (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                       measure       IN NUMBER)

   RETURN NUMBER PARALLEL_ENABLE;




   FUNCTION get_prev_shape_pt_measure_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                         dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                         measure       IN NUMBER)

   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION get_prev_shape_pt_measure_3d (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                          measure       IN NUMBER)

   RETURN NUMBER PARALLEL_ENABLE;




   --
   -- get previous measure (of shape point) based on the given point
   --


   FUNCTION get_prev_shape_pt_measure(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                      dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                      point          IN MDSYS.SDO_GEOMETRY)

   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION get_prev_shape_pt_measure(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                      point          IN MDSYS.SDO_GEOMETRY)

   RETURN NUMBER PARALLEL_ENABLE;





   FUNCTION get_prev_shape_pt_measure_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                         dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                         point        IN MDSYS.SDO_GEOMETRY)

   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION get_prev_shape_pt_measure_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                         point        IN MDSYS.SDO_GEOMETRY)

   RETURN NUMBER PARALLEL_ENABLE;





   --
   -- get the next measure (of shape point) based on the given measure
   --


   FUNCTION get_next_shape_pt_measure (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                       dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                       measure       IN NUMBER)

   RETURN NUMBER PARALLEL_ENABLE;


   FUNCTION get_next_shape_pt_measure (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                       measure       IN NUMBER)

   RETURN NUMBER PARALLEL_ENABLE;


   FUNCTION get_next_shape_pt_measure(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                      dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                      point           IN MDSYS.SDO_GEOMETRY)

   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION get_next_shape_pt_measure(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                      point           IN MDSYS.SDO_GEOMETRY)

   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION get_next_shape_pt_measure_3d (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                          dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                          measure       IN NUMBER)

   RETURN NUMBER PARALLEL_ENABLE;


   FUNCTION get_next_shape_pt_measure_3d (geom_segment  IN MDSYS.SDO_GEOMETRY,
                                          measure        IN NUMBER)

   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION get_next_shape_pt_measure_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                         dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                         point        IN MDSYS.SDO_GEOMETRY)

   RETURN NUMBER PARALLEL_ENABLE;



   FUNCTION get_next_shape_pt_measure_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                         point        IN MDSYS.SDO_GEOMETRY)

   RETURN NUMBER;


   FUNCTION is_shape_pt_measure(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                measure       IN NUMBER)

   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION is_shape_pt_measure(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                measure       IN NUMBER)

   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION is_shape_pt_measure_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                   dim_array     IN MDSYS.SDO_DIM_ARRAY,
                                   measure       IN NUMBER)

   RETURN VARCHAR2 PARALLEL_ENABLE;


   FUNCTION is_shape_pt_measure_3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                   measure       IN NUMBER)

   RETURN VARCHAR2 PARALLEL_ENABLE;


   --
   -- intersection for LRS geometries
   --

   FUNCTION lrs_intersection( geom_1 IN MDSYS.SDO_GEOMETRY,
                              dim_array_1    IN MDSYS.SDO_DIM_ARRAY,
                              geom_2 IN MDSYS.SDO_GEOMETRY,
                              dim_array_2    IN MDSYS.SDO_DIM_ARRAY)

   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


   FUNCTION lrs_intersection( geom_1 IN MDSYS.SDO_GEOMETRY,
                              geom_2 IN MDSYS.SDO_GEOMETRY,
                              tolerance      IN NUMBER)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


END sdo_lrs;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_CS" AUTHID current_user AS
/*
  TYPE EPSG_IDS
  IS TABLE OF NUMBER;
*/
  -- for TRANSFORM operator: trusted callout interface
  FUNCTION transform_orig(geom IN mdsys.sdo_geometry,
                     dim  IN mdsys.sdo_dim_array,
                     to_srid IN NUMBER)
              RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform_orig, wnds, rnps, wnps);

  FUNCTION transform_orig_with_arcs(geom IN mdsys.sdo_geometry,
                     dim  IN mdsys.sdo_dim_array,
                     to_srid IN NUMBER)
              RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform_orig_with_arcs, wnds, rnps, wnps);

  FUNCTION transform_orig(geom IN mdsys.sdo_geometry,
                     tolerance  IN number,
                     to_srid IN NUMBER)
              RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform_orig, wnds, rnps, wnps);

  FUNCTION transform_orig(geom   IN mdsys.sdo_geometry,
                     to_srid   IN NUMBER)
              RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform_orig, wnds, rnps, wnps);

  FUNCTION transform_orig_with_arcs(geom   IN mdsys.sdo_geometry,
                     to_srid   IN NUMBER)
              RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform_orig_with_arcs, wnds, rnps, wnps);

  FUNCTION transform_orig(geom   IN mdsys.sdo_geometry,
                     dim    IN mdsys.sdo_dim_array,
                     to_srname IN VARCHAR2)
              RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
--  PRAGMA restrict_references(transform_orig, wnds, rnps, wnps);

  FUNCTION transform_orig(geom   IN mdsys.sdo_geometry,
                     tolerance    IN number,
                     to_srname IN VARCHAR2)
              RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
--  PRAGMA restrict_references(transform_orig, wnds, rnps, wnps);

  FUNCTION transform_orig(geom   IN mdsys.sdo_geometry,
                     to_srname IN VARCHAR2)
              RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
--  PRAGMA restrict_references(transform_orig, wnds, rnps, wnps);

  PROCEDURE transform_layer( table_in   IN  VARCHAR2,
                            column_in  IN  VARCHAR2,
                            table_out  IN  VARCHAR2,
                            to_srid    IN  NUMBER   );

  PROCEDURE transform_layer_with_arcs( table_in   IN  VARCHAR2,
                            column_in  IN  VARCHAR2,
                            table_out  IN  VARCHAR2,
                            to_srid    IN  NUMBER   );

  FUNCTION viewport_transform(geom IN mdsys.sdo_geometry,
                               to_srid   IN NUMBER)
              RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(viewport_transform, wnds, rnps, wnps);
--  FUNCTION viewport_transform(geom IN mdsys.sdo_geometry,
--                               to_srname   IN VARCHAR2)
--              RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
--  PRAGMA restrict_references(transform, wnds, rnps, wnps);
  FUNCTION validate_wkt(srid in NUMBER)
     RETURN varchar2;
  PRAGMA restrict_references(validate_wkt, wnds, rnps, wnps);

  FUNCTION intl_validate_wkt(srid in NUMBER)
     RETURN varchar2;
  PRAGMA restrict_references(intl_validate_wkt, wnds, rnps, wnps);

  FUNCTION internal_read_proj_from_wkt(
    wkt VARCHAR2)
      RETURN VARCHAR2;
  PRAGMA restrict_references(internal_read_proj_from_wkt, wnds, rnps, wnps);

  PROCEDURE transform_layer(
    table_in  IN VARCHAR2,
    column_in IN VARCHAR2,
    table_out IN VARCHAR2,
    use_plan  IN TFM_PLAN);

  PROCEDURE transform_layer(
    table_in  IN VARCHAR2,
    column_in IN VARCHAR2,
    table_out IN VARCHAR2,
    use_case  IN VARCHAR2,
    to_srid   IN NUMBER);

  FUNCTION determine_default_chain(
    source_srid IN NUMBER,
    target_srid IN NUMBER)
      RETURN SDO_SRID_CHAIN;

  FUNCTION determine_chain(
    transient_rule_set  IN SDO_TRANSIENT_RULE_SET,
    use_case            IN VARCHAR2,
    source_srid         IN NUMBER,
    target_srid         IN NUMBER)
      RETURN TFM_PLAN;

  FUNCTION internal_det_chain_VARCHAR(
    plan IN TFM_PLAN)
      RETURN VARCHAR2;

  FUNCTION internal_det_chain(
    transient_rule_set  IN SDO_TRANSIENT_RULE_SET,
    use_case            IN VARCHAR2,
    source_srid         IN NUMBER,
    target_srid         IN NUMBER,
    explain             IN BOOLEAN,
    explanation         OUT VARCHAR2)
      RETURN TFM_PLAN;

  FUNCTION internal_det_srid_wkt(
    srid1 NUMBER)
      RETURN VARCHAR2;

  FUNCTION internal_epsg_param_to_legacy(
    param_id  NUMBER,
    method_id NUMBER)
      RETURN VARCHAR2;

  FUNCTION map_oracle_srid_to_epsg(
    legacy_srid NUMBER)
      RETURN NUMBER;

  FUNCTION map_epsg_srid_to_oracle(
    epsg_srid NUMBER)
      RETURN NUMBER;

  PROCEDURE create_pref_concatenated_op(
    op_id     IN NUMBER,
    op_name   IN VARCHAR2,
    use_plan  IN TFM_PLAN,
    use_case  IN VARCHAR2);

  PROCEDURE create_concatenated_op(
    op_id     IN NUMBER,
    op_name   IN VARCHAR2,
    use_plan  IN TFM_PLAN);

  PROCEDURE delete_op(
    op_id     IN NUMBER);

  PROCEDURE add_preference_for_op(
    op_id       IN NUMBER,
    source_crs  IN NUMBER   DEFAULT NULL,
    target_crs  IN NUMBER   DEFAULT NULL,
    use_case    IN VARCHAR2 DEFAULT NULL);

  PROCEDURE revoke_preference_for_op(
    op_id       IN NUMBER,
    source_crs  IN NUMBER   DEFAULT NULL,
    target_crs  IN NUMBER   DEFAULT NULL,
    use_case    IN VARCHAR2 DEFAULT NULL);

  PROCEDURE create_obvious_epsg_rules(
    use_case    IN VARCHAR2 DEFAULT NULL);

  PROCEDURE delete_all_epsg_rules(
    use_case    IN VARCHAR2 DEFAULT NULL);

  FUNCTION transform_to_base_unit(
    value           IN NUMBER,
    source_unit_id  IN NUMBER)
      RETURN NUMBER;

  FUNCTION transform_to_wkt_param_unit(
    value                     IN NUMBER,
    source_unit_id            IN NUMBER,
    target_unit_id_if_length  IN NUMBER)
      RETURN NUMBER;

  PROCEDURE create_crs_using_legacy_proj(
    epsg_srid   IN NUMBER,
    new_srid    IN NUMBER);

  ------------------------------------------------------------------------------

  PROCEDURE internal_get_densification_res(
    crs_srid    IN NUMBER,
    minimum     IN NUMBER,
    maximum     IN NUMBER,
    resolution  OUT NUMBER,
    num_steps   OUT NUMBER);
  PRAGMA restrict_references(internal_get_densification_res, wnds, rnps, wnps);

  FUNCTION internal_densify_prior_to_tfm(
    mbr SDO_GEOMETRY)
      RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(internal_densify_prior_to_tfm, wnds, rnps, wnps);

  ------------------------------------------------------------------------------

  FUNCTION transform(
    geom    IN MDSYS.SDO_GEOMETRY,
    dim     IN MDSYS.SDO_DIM_ARRAY,
    to_srid IN NUMBER)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform, wnds, rnps, wnps);

  FUNCTION transform(
    geom      IN MDSYS.SDO_GEOMETRY,
    tolerance IN NUMBER,
    to_srid   IN NUMBER)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform, wnds, rnps, wnps);

  FUNCTION transform(
    geom    IN MDSYS.SDO_GEOMETRY,
    to_srid IN NUMBER)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform, wnds, rnps, wnps);

  FUNCTION transform_with_arcs(
    geom    IN MDSYS.SDO_GEOMETRY,
    to_srid IN NUMBER)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform_with_arcs, wnds, rnps, wnps);

  FUNCTION transform_using_plan(
    geom     IN MDSYS.SDO_GEOMETRY,
    use_plan IN TFM_PLAN)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

  FUNCTION transform(
    geom     IN MDSYS.SDO_GEOMETRY,
    use_plan IN TFM_PLAN)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

  FUNCTION transform_orig_using_rules(
    geom     IN  mdsys.sdo_geometry,
    dim      IN  mdsys.sdo_dim_array,
    use_case IN VARCHAR2,
    tfmChain IN VARCHAR2,
    to_srid  IN  NUMBER)
      RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform_orig_using_rules, wnds, rnps, wnps);

  FUNCTION transform_orig_using_rules(
    geom     IN MDSYS.SDO_GEOMETRY,
    use_case IN VARCHAR2,
    tfmChain IN VARCHAR2,
    to_srid  IN NUMBER)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform_orig_using_rules, wnds, rnps, wnps);

  FUNCTION transform_using_case_name(
    geom     IN MDSYS.SDO_GEOMETRY,
    use_case IN VARCHAR2,
    to_srid  IN NUMBER)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform_using_case_name, wnds, rnps, wnps);

  FUNCTION transform(
    geom     IN MDSYS.SDO_GEOMETRY,
    use_case IN VARCHAR2,
    to_srid  IN NUMBER)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform, wnds, rnps, wnps);

  FUNCTION transform(
    geom      IN MDSYS.SDO_GEOMETRY,
    dim       IN MDSYS.SDO_DIM_ARRAY,
    to_srname IN  VARCHAR2)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
--  PRAGMA restrict_references(transform, wnds, rnps, wnps);

  FUNCTION transform(
    geom      IN MDSYS.SDO_GEOMETRY,
    tolerance IN NUMBER,
    to_srname IN VARCHAR2)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
--  PRAGMA restrict_references(transform, wnds, rnps, wnps);

  FUNCTION transform(
    geom      IN MDSYS.SDO_GEOMETRY,
    to_srname IN VARCHAR2)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
--  PRAGMA restrict_references(transform, wnds, rnps, wnps);

  ------------------------------------------------------------------------------

  PROCEDURE convert_NADCON_to_XML(
    LAA_CLOB  IN CLOB,
    LOA_CLOB  IN CLOB,
    xml_grid  OUT XMLTYPE);

  PROCEDURE convert_NTv2_to_XML(
    NTv2_CLOB IN CLOB,
    xml_grid  OUT XMLTYPE);

  PROCEDURE convert_XML_to_NADCON(
    xml_grid  IN XMLTYPE,
    LAA_CLOB  OUT CLOB,
    LOA_CLOB  OUT CLOB);

  PROCEDURE convert_XML_to_NTv2(
    xml_grid  IN XMLTYPE,
    NTv2_CLOB OUT CLOB);

  PROCEDURE convert_XML_table_to_NTv2(
    ntv2_file_id IN NUMBER,
    NTv2_CLOB    OUT CLOB);

  PROCEDURE convert_NTv2_to_XML_table(
    NTv2_CLOB    IN CLOB,
    ntv2_file_id OUT NUMBER);

  PROCEDURE delete_NTv2_xml_data(
    ntv2_file_id in number);

  function determine_nadcon_coverage(
    coord_op_id number)
      return sdo_geometry DETERMINISTIC PARALLEL_ENABLE;

  FUNCTION find_geog_crs(
    reference_srid          IN NUMBER,
    is_legacy               IN VARCHAR2,
    max_rel_num_difference  IN NUMBER DEFAULT 0.000001)
      RETURN SDO_SRID_LIST;

  FUNCTION find_geog_crs(
    reference_wkt           IN VARCHAR2,
    is_legacy               IN VARCHAR2,
    max_rel_num_difference  IN NUMBER DEFAULT 0.000001)
      RETURN SDO_SRID_LIST;

  FUNCTION find_proj_crs(
    reference_srid          IN NUMBER,
    is_legacy               IN VARCHAR2,
    max_rel_num_difference  IN NUMBER DEFAULT 0.000001)
      RETURN SDO_SRID_LIST;

  FUNCTION find_proj_crs(
    reference_wkt           IN VARCHAR2,
    is_legacy               IN VARCHAR2,
    max_rel_num_difference  IN NUMBER DEFAULT 0.000001)
      RETURN SDO_SRID_LIST;

  FUNCTION get_epsg_data_version
    RETURN VARCHAR2;

  ------------------------------------------------------------------------------

  FUNCTION from_OGC_SimpleFeature_SRS(
    wkt VARCHAR2)
      RETURN VARCHAR2;

  FUNCTION to_OGC_SimpleFeature_SRS(
    wkt VARCHAR2)
      RETURN VARCHAR2;

  ------------------------------------------------------------------------------

  PROCEDURE intl_populate_datum_3params(
    datum_id  NUMBER,
    op_id     NUMBER);

  PROCEDURE intl_populate_datum_7params(
    datum_id  NUMBER,
    op_id     NUMBER);

  ------------------------------------------------------------------------------

  FUNCTION to_USNG(
    geom              SDO_GEOMETRY,
    accuracyInMeters  NUMBER,
    datum             VARCHAR2 DEFAULT 'NAD83')
      RETURN
        VARCHAR2;

  FUNCTION from_USNG(
    usng              VARCHAR2,
    srid              NUMBER,
    datum             VARCHAR2 DEFAULT 'NAD83')
      RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

  ------------------------------------------------------------------------------

  PROCEDURE update_wkts_for_all_epsg_crs;

  PROCEDURE update_wkts_for_epsg_crs(
    srid NUMBER);

  PROCEDURE update_wkts_for_epsg_param(
    coord_op_id   NUMBER,
    parameter_id  NUMBER);

  PROCEDURE update_wkts_for_epsg_op(
    coord_op_id   NUMBER);

  PROCEDURE update_wkts_for_epsg_datum(
    datum_id NUMBER);

  PROCEDURE update_wkts_for_epsg_ellips(
    ellipsoid_id NUMBER);

  PROCEDURE update_wkts_for_epsg_pm(
    prime_meridian_id NUMBER);

  function disambiguate_proj_name(
    srid number,
    wkt varchar2)
      return varchar2;

  function disambiguate_proj_name(
    srid number)
      return varchar2;

  ------------------------------------------------------------------------------

  function is_within_tolerance(
    a               number,
    b               number,
    rel_tolerance   number)
      return number;

  FUNCTION lookup_epsg_param(
    coord_op_id     number,
    parameter_id    number)
      return number;

  PROCEDURE find_srid(
    srid                OUT NUMBER,
    epsg_srid_geog      IN NUMBER DEFAULT NULL,
    epsg_srid_proj      IN NUMBER DEFAULT NULL,
    datum_id            IN NUMBER DEFAULT NULL,
    ellips_id           IN NUMBER DEFAULT NULL,
    pm_id               IN NUMBER DEFAULT NULL,
    proj_method_id      IN NUMBER DEFAULT NULL,
    coord_ref_sys_kind  IN VARCHAR2 DEFAULT NULL,
    semi_major_axis     IN NUMBER DEFAULT NULL,
    semi_minor_axis     IN NUMBER DEFAULT NULL,
    inv_flattening      IN NUMBER DEFAULT NULL,
    params              IN MDSYS.epsg_params DEFAULT NULL);

  PROCEDURE find_srid(
    srid                OUT NUMBER,
    epsg_srid_geog      IN NUMBER DEFAULT NULL,
    epsg_srid_proj      IN NUMBER DEFAULT NULL,
    datum_id            IN NUMBER DEFAULT NULL,
    ellips_id           IN NUMBER DEFAULT NULL,
    pm_id               IN NUMBER DEFAULT NULL,
    proj_method_id      IN NUMBER DEFAULT NULL,
    proj_op_id          IN NUMBER DEFAULT NULL,
    coord_ref_sys_kind  IN VARCHAR2 DEFAULT NULL,
    semi_major_axis     IN NUMBER DEFAULT NULL,
    semi_minor_axis     IN NUMBER DEFAULT NULL,
    inv_flattening      IN NUMBER DEFAULT NULL,
    params              IN MDSYS.epsg_params DEFAULT NULL,
    max_rel_num_difference  IN NUMBER DEFAULT 0.000001);

  function fill_in_default_units(
    params mdsys.epsg_params,
    crs number)
      return mdsys.epsg_params;

  PROCEDURE sdo_cs_context_invalidate;

  PROCEDURE find_epsg_params(
    srid                IN  NUMBER,
    epsg_srid_geog      OUT NUMBER,
    datum_id            OUT NUMBER,
    ellips_id           OUT NUMBER,
    pm_id               OUT NUMBER,
    proj_method_id      OUT NUMBER,
    proj_op_id          OUT NUMBER,
    coord_ref_sys_kind  OUT VARCHAR2,
    semi_major_axis     OUT NUMBER,
    semi_minor_axis     OUT NUMBER,
    inv_flattening      OUT NUMBER,
    params              OUT MDSYS.epsg_params);

  function make_3d(
    geom2d in mdsys.sdo_geometry,
    height in number default 0,
    target_srid in number default null)
      return mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;

  function make_2d(
    geom3d in mdsys.sdo_geometry,
    target_srid in number default null)
      return mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;

  function convert_2d_to_3d(
    geom2d      mdsys.sdo_geometry,
    height      number             default 0,
    vert_id     number             default 9903,
    ellipsoidal varchar2           default 'TRUE',
    uom_id      number             default 9001)
      return mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;

  function convert_3d_srid_to_2d(
    srid3d number)
      return number DETERMINISTIC PARALLEL_ENABLE;

  function convert_2d_srid_to_3d(
    srid2d      number,
    vert_id     number             default 9903,
    ellipsoidal varchar2           default 'TRUE',
    uom_id      number             default 9001)
      return number;

  ------------------------------------------------

  FUNCTION transform_across_dims(
    geom      IN MDSYS.SDO_GEOMETRY,
    to_srid   IN NUMBER)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform_across_dims, wnds, rnps, wnps);

  FUNCTION transform_across_dims_wa(
    geom      IN MDSYS.SDO_GEOMETRY,
    to_srid   IN NUMBER)
      RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(transform_across_dims_wa, wnds, rnps, wnps);

  PROCEDURE transform_layer_across_dims(
    table_in  IN VARCHAR2,
    column_in IN VARCHAR2,
    table_out IN VARCHAR2,
    to_srid   IN NUMBER);

  PROCEDURE transform_layer_across_dims(
    table_in  IN VARCHAR2,
    column_in IN VARCHAR2,
    table_out IN VARCHAR2,
    use_plan  IN TFM_PLAN);

  PROCEDURE transform_layer_across_dims(
    table_in  IN VARCHAR2,
    column_in IN VARCHAR2,
    table_out IN VARCHAR2,
    use_case  IN VARCHAR2,
    to_srid   IN NUMBER);

  ------------------------------------------------

  function reformat_gtype(
    geom1 mdsys.sdo_geometry,
    srid2 number)
      return mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;

    PROCEDURE register_SrsNameSpace ( SrsNameSpace IN varchar2,
                                      SrsName IN varchar2, sdo_srid in number);
    FUNCTION get_SRID_for_NameSpace(  SrsNameSpace IN varchar2,
                                    SrsName IN varchar2) return NUMBER;
    FUNCTION get_SrsName_for_NameSpace(  SrsNameSpace IN varchar2,
                                    sdo_srid IN number) return varchar2;

  function convert_mixed_axes_units(
    srid           number,
    unitless_value number,
    output_unit    varchar2)
      return number;

  function get_3d_wkt(
    srid number)
      return varchar2;

  function generate_crs_from_wkt(
    wkt                    varchar2, -- Input WKT
    proj_op_id             number,   -- ID of new proj operation, if required
    proj_op_name           varchar2, -- Name of new proj operation, if required
    datum_tfm_op_id        number,   -- ID of new datum tfm operation, if required
    datum_tfm_op_name      varchar2, -- Name of new datum tfm operation, if required
    exclude_existing_elems varchar2 default 'FALSE') -- Exclude elements that already exist in mdsys
      return CLOB;

  function generate_epsg_rule_for_3785(
    source_srid     number,
    datum_tfm_op_id number,
    concat_op_id    number)
      return CLOB;

  function get_wkt_path(
    wkt           varchar2,
    path          varchar2,
    default_value varchar2 default null)
      return varchar2;
  PRAGMA restrict_references(get_wkt_path, wnds, rnps, wnps);

  function tfm_axis_orientation_to_wkt(
    axis_orientation VARCHAR2)
      return VARCHAR2;

  procedure update_wkt_with_7_params(
    params     varchar2,
    datum_name varchar2);

  procedure update_wkts_with_hc_params;

  procedure determine_srid_units(
    srid        in  number,
    uom_id1     out number,
    uom_id2     out number,
    uom_id3     out number);

  function transform_ogc_cs_wkt_to_srs(
    wktext varchar2)
      return varchar2;

  --------------------------------------------------------

  function generate_script_from_uom_id(
    uom_id number,
    offset number default 0)
      return clob;

  function generate_script_from_cs_id(
    cs_id number,
    offset number default 0)
      return clob;

  function generate_script_from_op_id(
    op_id number,
    offset number default 0)
      return clob;

  function generate_script_from_pm_id(
    pm_id number,
    offset number default 0)
      return clob;

  function generate_script_from_ellips_id(
    ellipsoid_id number,
    offset number default 0)
      return clob;

  function generate_script_from_datum_id(
    datum_id number,
    offset number default 0)
      return clob;

  function generate_script_from_SRID(
    srid number,
    offset number default 0,
    include_units number default 1)
      return clob;

  function validate_op(
    op_id number)
      return varchar2;

  FUNCTION dms_to_decimal_degree(
    lat_deg VARCHAR2,
    lat_min VARCHAR2,
    lat_sec VARCHAR2,
    lat_dir CHAR,
    lon_deg VARCHAR2,
    lon_min VARCHAR2,
    lon_sec VARCHAR2,
    lon_dir CHAR,
    srid    NUMBER default 8307)
      RETURN sdo_geometry DETERMINISTIC PARALLEL_ENABLE;

  procedure decimal_degrees_to_dms(
    dec_deg   in  number,
    coord_deg out integer,
    coord_min out integer,
    coord_sec out number,
    coord_dir out char)
      DETERMINISTIC PARALLEL_ENABLE;

  procedure decimal_degrees_to_dms(
    lat     in  number,
    lon     in  number,
    lat_deg out integer,
    lat_min out integer,
    lat_sec out number,
    lat_dir out char,
    lon_deg out integer,
    lon_min out integer,
    lon_sec out number,
    lon_dir out char)
      DETERMINISTIC PARALLEL_ENABLE;

  procedure load_epsg_matrix(
    op_id        number,
    parameter_id number,
    directory    varchar2,
    file_name    varchar2)
      DETERMINISTIC PARALLEL_ENABLE;

  function validate_epsg_matrix(
    method_id    number,
    parameter_id number,
    matrix       clob)
      return varchar2
      DETERMINISTIC PARALLEL_ENABLE;

  function get_axis_order(
    srid number)
      return varchar2 DETERMINISTIC;

  function reverse_axis_order(
    srid number)
      return number DETERMINISTIC;

END sdo_cs;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_IDX" AUTHID current_user AS

  PROCEDURE ie_crt_geom_metadata;

  PROCEDURE cmt_idx_chngs(schema IN varchar2,
                          iname IN varchar2,
                          iptn IN varchar2,
                          ins_no IN number,
                          del_no IN number);

  FUNCTION ENDIANCONVERT(entry   IN BLOB,
                         fanout  IN NUMBER,
                         dim     IN NUMBER)
  RETURN BLOB DETERMINISTIC PARALLEL_ENABLE;

  PROCEDURE tts_index_initialize(
    schema_name               IN VARCHAR2,
    SDO_INDEX_TYPE            IN VARCHAR2,
    SDO_LEVEL                 IN NUMBER,
    SDO_NUMTILES              IN NUMBER,
    SDO_MAXLEVEL              IN NUMBER,
    SDO_COMMIT_INTERVAL       IN NUMBER,
    SDO_INDEX_TABLE           IN VARCHAR2,
    SDO_INDEX_NAME            IN VARCHAR2,
    SDO_INDEX_PRIMARY         IN NUMBER,
    SDO_TSNAME                IN VARCHAR2,
    SDO_COLUMN_NAME           IN VARCHAR2,
    SDO_RTREE_HEIGHT          IN NUMBER,
    SDO_RTREE_NUM_NODES       IN NUMBER,
    SDO_RTREE_DIMENSIONALITY  IN NUMBER,
    SDO_RTREE_FANOUT          IN NUMBER,
    SDO_RTREE_ROOT            IN VARCHAR2,
    SDO_RTREE_SEQ_NAME        IN VARCHAR2,
    SDO_FIXED_META            IN RAW,
    SDO_TABLESPACE            IN VARCHAR2,
    SDO_INITIAL_EXTENT        IN VARCHAR2,
    SDO_NEXT_EXTENT           IN VARCHAR2,
    SDO_PCTINCREASE           IN NUMBER,
    SDO_MIN_EXTENTS           IN NUMBER,
    SDO_MAX_EXTENTS           IN NUMBER,
    SDO_INDEX_DIMS            IN NUMBER,
    SDO_LAYER_GTYPE           IN VARCHAR2,
    SDO_RTREE_PCTFREE         IN NUMBER,
    SDO_INDEX_PARTITION       IN VARCHAR2,
    SDO_PARTITIONED           IN NUMBER,
    SDO_RTREE_QUALITY         IN NUMBER,
    SDO_INDEX_VERSION         IN NUMBER,
    SDO_INDEX_GEODETIC        IN VARCHAR2,
    SDO_INDEX_STATUS          IN VARCHAR2,
    SDO_NL_INDEX_TABLE        IN VARCHAR2,
    SDO_DML_BATCH_SIZE        IN NUMBER,
    SDO_RTREE_ENT_XPND        IN NUMBER,
    SDO_ROOT_MBR              IN MDSYS.SDO_GEOMETRY,
    ENDIAN_FLAG               IN VARCHAR2);

  FUNCTION  process_params(params IN varchar2, invert_mask IN number,
                           mask_str IN OUT varchar2, dst IN OUT number,
                           units_str IN OUT varchar2, mltpl_msks IN OUT number)
            RETURN number;


END sdo_idx;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_UTIL" AUTHID current_user AS

-- CONSTANT DECLARATION
  SDO_GTYPE_CURVE         CONSTANT  NUMBER := 2;
  SDO_GTYPE_POLYGON       CONSTANT  NUMBER := 3;
  SDO_GTYPE_COLLECTION    CONSTANT  NUMBER := 4;
  SDO_GTYPE_MULTICURVE    CONSTANT  NUMBER := 6;
  SDO_GTYPE_MULTIPOLYGON  CONSTANT  NUMBER := 7;


  Function expand_multi_point (geometry IN mdsys.sdo_geometry)
  RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

  FUNCTION expand_geom (geometry IN mdsys.sdo_geometry)
  RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;

  FUNCTION extract(geometry IN mdsys.sdo_geometry,
                   element  IN NUMBER,
                   ring     IN NUMBER DEFAULT 0)
    RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
    PRAGMA restrict_references(extract, wnds, rnps, wnps, trust);

  FUNCTION extract_all(geometry IN mdsys.sdo_geometry,
                       flatten  IN NUMBER DEFAULT 1)
    RETURN mdsys.sdo_geometry_array DETERMINISTIC PARALLEL_ENABLE;
    PRAGMA restrict_references(extract_all, wnds, rnps, wnps, trust);

  FUNCTION append(geometry1 IN MDSYS.sdo_geometry,
                  geometry2 IN MDSYS.sdo_geometry)
    RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
    PRAGMA restrict_references(append, wnds, wnps);

  FUNCTION ExtractVoids(geometry IN mdsys.sdo_geometry,
                        dim      IN mdsys.sdo_dim_array)
    RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
    PRAGMA restrict_references(ExtractVoids, rnds, wnds, rnps, wnps, trust);

 FUNCTION GetVertices(geometry IN mdsys.sdo_geometry)
 RETURN vertex_set_type;
-- PRAGMA restrict_references(GetVertices, wnds, rnps, wnps);

  FUNCTION GetNumElem(geometry IN mdsys.sdo_geometry)
    RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;
    PRAGMA restrict_references(GetNumElem, rnds, wnds, rnps, wnps, trust);

  FUNCTION GetNumRings(
    geom IN MDSYS.SDO_GEOMETRY)
      RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;
  PRAGMA restrict_references(GetNumRings, rnds, wnds, rnps, wnps, trust);

  FUNCTION GetNumVertices(geometry IN mdsys.sdo_geometry)
    RETURN NUMBER PARALLEL_ENABLE;
    PRAGMA restrict_references(GetNumVertices, rnds, wnds, rnps, wnps, trust);

  FUNCTION OuterLn(geometry IN mdsys.sdo_geometry,
                   dim      IN mdsys.sdo_dim_array)
    RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
    PRAGMA restrict_references(OuterLn,rnds,wnds,rnps,wnps,trust);

  FUNCTION RefineMGon(mgon IN mdsys.sdo_geometry,
                      gon  IN mdsys.sdo_geometry,
                      dim  IN mdsys.sdo_dim_array)
    RETURN mdsys.sdo_geometry;
    PRAGMA restrict_references(RefineMGon,rnds,wnds,rnps,wnps,trust);

 -- Determine whether or not a string contains a valid numeric value.
 FUNCTION mdutl_is_numeric(instr varchar2,
                           format_mask varchar2)
 RETURN number DETERMINISTIC PARALLEL_ENABLE;
 PRAGMA restrict_references(mdutl_is_numeric, wnds, rnps, wnps, trust);

 -- Safely convert "number" to corresponding "character" representation
 -- For more information on this function, please refer to the PL/SQL
 -- documentation for the TO_CHAR() function.
 FUNCTION number_to_char(value IN NUMBER,
                         format_mask IN VARCHAR2 DEFAULT NULL,
                         nls_language IN VARCHAR2 DEFAULT NULL)
    RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
 PRAGMA restrict_references(number_to_char, wnds, rnps, wnps, trust);

 FUNCTION number_to_char(value IN VARCHAR2,
                         format_mask IN VARCHAR2 DEFAULT NULL,
                         nls_language IN VARCHAR2 DEFAULT NULL)
    RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
 PRAGMA restrict_references(number_to_char, wnds, rnps, wnps, trust);

 FUNCTION number_to_char(value IN DATE,
                         format_mask IN VARCHAR2 DEFAULT NULL,
                         option_setting IN VARCHAR2 DEFAULT NULL)
    RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
 PRAGMA restrict_references(number_to_char, wnds, rnps, wnps, trust);

 FUNCTION number_to_char(value IN TIMESTAMP,
                         format_mask IN VARCHAR2 DEFAULT NULL,
                         option_setting IN VARCHAR2 DEFAULT NULL)
    RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
 PRAGMA restrict_references(number_to_char, wnds, rnps, wnps, trust);

 FUNCTION number_to_char(value IN RAW)
    RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
 PRAGMA restrict_references(number_to_char, wnds, rnps, wnps, trust);

 FUNCTION number_to_char(value IN CLOB) -- NTEXT
    RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
 PRAGMA restrict_references(number_to_char, wnds, rnps, wnps, trust);

 -- truncate the original number up to no_of_digits
 -- no_of_digits positive:  truncate the number to no_of_digits AFTER the decimal point
 -- ex: truncate_number(1.123456789,5) returns 1.12345
 -- no_of_digits negative:  truncate the number up to no_of_digits BEFORE the decimal point
 -- ex: truncate_number(987654321.123456789,-5) returns 987600000.0

 FUNCTION truncate_number(value NUMBER, no_of_digits NUMBER)
    RETURN NUMBER PARALLEL_ENABLE;
 PRAGMA restrict_references(truncate_number, wnds, rnps, wnps);

 FUNCTION rectify_geometry(
    geometry     IN MDSYS.SDO_GEOMETRY,
    tolerance    IN NUMBER)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
   PRAGMA RESTRICT_REFERENCES(rectify_geometry, rnds, wnds, rnps, wnps, trust);

  /* simplify a geometry */
  FUNCTION simplify(
   geometry       IN mdsys.sdo_geometry,
   threshold      IN NUMBER,
   tolerance      IN NUMBER := 0.0000005,
   remove_loops   IN NUMBER := 0)
    RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
    PRAGMA restrict_references(simplify, rnds, wnds, rnps, wnps, trust);

  FUNCTION simplifyVW(
   geometry       IN mdsys.sdo_geometry,
   vertex_threshold  IN NUMBER,
   tolerance      IN NUMBER := 0.0000005,
   remove_loops   IN NUMBER := 0)
    RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
    PRAGMA restrict_references(simplifyVW, rnds, wnds, rnps, wnps, trust);


 FUNCTION polygontoline(geometry IN mdsys.sdo_geometry)
    return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION point_to_line(
   geom1 IN mdsys.sdo_geometry,
   geom2 IN mdsys.sdo_geometry,
   tol   IN number := 10e-16)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION remove_duplicates(geometry IN sdo_geometry, dim in sdo_dim_array)
    return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION remove_duplicate_vertices(geometry IN sdo_geometry,
                                                tolerance in NUMBER)
    return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION circle_polygon (point                           MDSYS.SDO_GEOMETRY,
                          radius                          number,
                          arc_tolerance                   number,
                          start_azimuth                   number default NULL,
                          end_azimuth                     number default NULL,
                          orientation                     number default NULL,
                          arc                             number default NULL)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION circle_polygon (center_longitude     number,
                          center_latitude      number,
                          radius               number,
                          arc_tolerance            number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION circle_polygon (center_longitude     number,
                          center_latitude      number,
                          radius               number,
                          start_azimuth        number,
                          end_azimuth          number,
                          arc_tolerance            number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION ellipse_polygon (center_longitude                number,
                           center_latitude                 number,
                           semi_major_axis                 number,
                           semi_minor_axis                 number,
                           azimuth                         number,
                           arc_tolerance                       number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION point_at_bearing(start_point sdo_geometry,
                   bearing number,
                   distance number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 PROCEDURE bearing_tilt_for_points(
                   start_point sdo_geometry,
                   end_point sdo_geometry,
                   tol number,
                   bearing OUT number,
                   tilt OUT number) ;

 FUNCTION convert_unit(value NUMBER, in_unit varchar2, out_unit varchar2)
 RETURN number PARALLEL_ENABLE;

 FUNCTION convert_distance(srid  number, distance NUMBER, unit_spec  varchar2)
 RETURN number PARALLEL_ENABLE;

 PROCEDURE Prepare_For_TTS (table_space IN VARCHAR2);

 PROCEDURE Initialize_Indexes_For_TTS ;

 FUNCTION to_clob(Geometry IN MDSYS.SDO_GEOMETRY)
  RETURN CLOB DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_clob(ClobGeom IN CLOB)
  RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION to_gmlgeometry(Geometry IN MDSYS.SDO_GEOMETRY)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE;

 FUNCTION to_gmlgeometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            srsNameSpace IN varchar2, srsNSAlias IN varchar2)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE;

 FUNCTION to_gmlgeometry(Geometry IN MDSYS.SDO_GEOMETRY,
                         coordOrder IN number)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE;

 FUNCTION to_gmlgeometry(Geometry IN MDSYS.SDO_GEOMETRY,
                         srsNameSpace IN varchar2, srsNSAlias IN varchar2,
                         coordOrder IN number)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE;

 FUNCTION to_gml311geometry(Geometry IN MDSYS.SDO_GEOMETRY)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE;

 FUNCTION to_gml311geometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            srsNameSpace IN varchar2, srsNSAlias IN varchar2)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE;

 FUNCTION to_gml311geometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            coordOrder IN number)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE;

 FUNCTION to_gml311geometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            srsNameSpace IN varchar2, srsNSAlias IN varchar2,
                            coordOrder IN number)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE;

 FUNCTION to_gml321geometry(Geometry IN MDSYS.SDO_GEOMETRY)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE;

 FUNCTION to_gml321geometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            srsNameSpace IN varchar2, srsNSAlias IN varchar2)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE;

 FUNCTION to_gml321geometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            coordOrder IN number)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE;

 FUNCTION to_gml321geometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            srsNameSpace IN varchar2, srsNSAlias IN varchar2,
                            coordOrder IN number)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE;

 FUNCTION to_kmlgeometry(Geometry IN MDSYS.SDO_GEOMETRY)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE;

 FUNCTION to_wkbgeometry(geometry IN MDSYS.SDO_GEOMETRY)
 RETURN BLOB DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION to_wktgeometry(geometry IN MDSYS.SDO_GEOMETRY)
 RETURN CLOB DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION to_wktgeometry_varchar(geometry IN MDSYS.SDO_GEOMETRY)
 RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_wkbgeometry(geometry IN BLOB)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_wktgeometry(geometry IN CLOB)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_wktgeometry(geometry IN VARCHAR2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GMLgeometry(geometry IN CLOB)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GMLgeometry(geometry IN CLOB, srsNameSpace IN varchar2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GMLgeometry(geometry IN VARCHAR2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GMLgeometry(geometry IN VARCHAR2, srsNameSpace IN varchar2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GMLgeometry(geometry IN CLOB,
                           coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GMLgeometry(geometry IN CLOB, srsNameSpace IN varchar2,
                           coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GMLgeometry(geometry IN VARCHAR2,
                           coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GMLgeometry(geometry IN VARCHAR2, srsNameSpace IN varchar2,
                           coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GML311geometry(geometry IN CLOB)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GML311geometry(geometry IN CLOB, srsNameSpace IN varchar2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GML311geometry(geometry IN VARCHAR2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GML311geometry(geometry IN VARCHAR2, srsNameSpace IN varchar2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GML311geometry(geometry IN CLOB,
                              coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GML311geometry(geometry IN CLOB, srsNameSpace IN varchar2,
                              coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GML311geometry(geometry IN VARCHAR2,
                              coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_GML311geometry(geometry IN VARCHAR2, srsNameSpace IN varchar2,
                              coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_KMLgeometry(geometry IN CLOB)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION from_KMLgeometry(geometry IN VARCHAR2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION extrude(geometry IN MDSYS.SDO_GEOMETRY,
                  grdHeight IN SDO_NUMBER_ARRAY,
                  height IN SDO_NUMBER_ARRAY,
                  cond IN VARCHAR2,
                  tol IN NUMBER)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION extrude(geometry IN MDSYS.SDO_GEOMETRY,
                  grdHeight IN SDO_NUMBER_ARRAY,
                  height IN SDO_NUMBER_ARRAY,
                  tol IN NUMBER,
                  optional3dSrid IN NUMBER DEFAULT NULL)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


 FUNCTION affinetransforms(geometry IN MDSYS.SDO_GEOMETRY,
                           translation IN VARCHAR2 DEFAULT 'FALSE', tx IN NUMBER DEFAULT 0.0, ty IN NUMBER DEFAULT 0.0, tz IN NUMBER DEFAULT 0.0,
                           scaling IN VARCHAR2 DEFAULT 'FALSE', Psc1 IN MDSYS.SDO_GEOMETRY DEFAULT NULL, sx IN NUMBER DEFAULT 0.0, sy IN NUMBER DEFAULT 0.0, sz IN NUMBER DEFAULT 0.0,
                           rotation IN VARCHAR2 DEFAULT 'FALSE', P1 IN MDSYS.SDO_GEOMETRY DEFAULT NULL, line1 IN MDSYS.SDO_GEOMETRY DEFAULT NULL, angle IN NUMBER DEFAULT 0.0, dir IN NUMBER DEFAULT -1,
                           shearing IN VARCHAR2 DEFAULT 'FALSE', SHxy IN NUMBER DEFAULT 0.0, SHyx IN NUMBER DEFAULT 0.0, SHxz IN NUMBER DEFAULT 0.0, SHzx IN NUMBER DEFAULT 0.0, SHyz IN NUMBER DEFAULT 0.0, SHzy IN NUMBER DEFAULT 0.0,
                           reflection IN VARCHAR2 DEFAULT 'FALSE', Pref IN MDSYS.SDO_GEOMETRY DEFAULT NULL, lineR IN MDSYS.SDO_GEOMETRY DEFAULT NULL, dirR IN NUMBER DEFAULT -1, planeR IN VARCHAR2 DEFAULT 'FALSE', n IN SDO_NUMBER_ARRAY DEFAULT NULL, bigD IN SDO_NUMBER_ARRAY DEFAULT NULL)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION extract3d(geometry IN MDSYS.SDO_GEOMETRY, label IN VARCHAR2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION getlabelbyelement(sourceGeometry IN MDSYS.SDO_GEOMETRY, queryElement IN MDSYS.SDO_GEOMETRY, tol IN NUMBER)
 RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION validate_wkbgeometry(geometry IN BLOB)
 RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION validate_wktgeometry(geometry IN CLOB)
 RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION validate_wktgeometry(geometry IN VARCHAR2)
 RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION concat_lines (geometry1 IN MDSYS.SDO_GEOMETRY,
                        geometry2 IN MDSYS.SDO_GEOMETRY)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 PROCEDURE internal_ordinate_copy(src IN MDSYS.SDO_ORDINATE_ARRAY,
                            src_position IN INTEGER,
                            dst IN OUT NOCOPY MDSYS.SDO_ORDINATE_ARRAY,
                            dst_position IN INTEGER,
                            length IN INTEGER);

 FUNCTION reverse_linestring(geometry IN MDSYS.SDO_GEOMETRY)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION internal_merge_linestrings(geometry IN MDSYS.SDO_GEOMETRY)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC;

 FUNCTION internal_merge_linestrings(geomArr IN MDSYS.SDO_GEOMETRY_ARRAY)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC;

 FUNCTION internal_make_line_out_of_elem(
     multilinestring IN MDSYS.SDO_GEOMETRY, element_index IN INTEGER)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 PROCEDURE internal_reverse_line_points(
       ordinates IN OUT NOCOPY MDSYS.SDO_ORDINATE_ARRAY);

------------------------------------------------------------------
-- Name
--   Partition_Table
-- Purpose
--   Partitions the input "schema.tablename" into buckets of at
--   most ptn_capacity each. The partitioning is based on the
--   spatial extent or MBR stored as the intervals <min_di, max_di>
--   in each dimension di.  The data is written back with
--   the ptn_id into the "output_table" which is assumed to be
--   be pre-created by the user.
--   The input <tablename> table is expected to have the following columns:
--      "rid" -- unique id for each row (e.g., the table rowid)
--      min_d1, max_d1 -- minimum and maximum values in dimension 1
--      min_d2, max_d2 -- minimum and maximum values in dimension 2
--      ..
--      min_dn, max_dn -- minimum and maximum values in dimension n
--      where n is the dimensionality specified by inp arg "numdim"
--   The input "wrk_tblspc" specifies the tablespace where "scratch-pad"
--      tables are created and dropped. Keep this tablespace different from
--      the tablespace in which the input <tablename> and output_table are.
--      (typical usage: create wrk_tblspc and drop after this procedure)
--   The arg "output_table" specifies where to write the output partitions
--     This routine assumes the output_table is pre-created and has the
--     following columns:
--     ptn_id number, rid varchar2(24), min_d1 number, max_d1 number,
--     min_d2, max_d2, ...., min_dn, max_dn (all number columns).
--     This routine writes the rows from <tablename> back to <output_table>
--       with the ptn_id set.
--  The arg <output_ptn_table> specifies where to write ptn extent information
--     This table should have the following numeric columns:
--     ptn_id, min_d1, max_d1, min_d2, max_d2, ...., min_dn, max_dn.
--  Parameter "numdim" specifies the number of dimensions.
--  Parameter "commit_interval" "n" specifies that commits happen
--  after every batch of n rows that are written to the <output_table>.
--  Parameter "packed_ptns" tries to pack the partitions.


 PROCEDURE partition_table(schemaname in varchar2, tablename in varchar2,
                           output_data_table in varchar2,
                           output_ptn_table in varchar2,
                           ptn_capacity in number default 100,
                           numdim in number default 2,
                           wrk_tblspc in varchar2 default null,
                           ptn_type in varchar2 default null,
                           dop in number default 1);


------------------------------------------------------------------
-- Name
--   DROP_WORK_TABLES
-- Purpose
--   This function drops any work tables and views in the current schema
--   created as part of partition_table, index creation, or
--   TIN/Point Cloud utilities.
--
--   DROPS all tables/views that match 'M%_<oidstr>$$%'
--   Input oidstr has to contain only hexadecimal numbers w/o spaces

 PROCEDURE DROP_WORK_TABLES(oidstr varchar2);

 FUNCTION remove_inner_rings(inpgeom SDO_GEOMETRY, inptol number)
 RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION quad_tiles(geom SDO_GEOMETRY, sdo_level number, tol number:=0.0000000005)
 RETURN mdsys.F81_index_obj_array DETERMINISTIC;

 /* This function generates hybrid tiles for a given Geometry.
    Only 2D Geometry is supported.
    The SDO_META values are appended to the SDO_CODE to make it easier
    for use with other HHCODE functions. */
 FUNCTION hybrid_tiles(geom SDO_GEOMETRY, sdo_level number := 4,
                       sdo_ntiles number := 100, tol number:=0.0000000005)
 RETURN mdsys.H81_index_obj_array DETERMINISTIC;

 FUNCTION interior_point (geom SDO_GEOMETRY, tol number := 0.00000000005)
 RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION number_of_components(geometry SDO_GEOMETRY, requested_type varchar2)
 RETURN NUMBER PARALLEL_ENABLE;

 FUNCTION get_2d_footprint(geometry SDO_GEOMETRY, tolerance number := 0.05)
 RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION convert3007to3008(geometry sdo_geometry)
 RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION get_boundary(geometry  in sdo_geometry)
 RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-------------------------------------------------------------------------

  function validate_3dtheme(
    theme_name varchar2)
      return varchar2;

  function validate_scene(
    scene_name varchar2)
      return varchar2;

  function validate_viewframe(
    viewframe_name varchar2)
      return varchar2;

  function theme3d_has_lod(
    theme_name varchar2)
      return number;

  function theme3d_has_texture(
    theme_name varchar2)
      return number;

  function theme3d_get_block_table(
    theme_name varchar2)
      return varchar2;

 FUNCTION ToGnomonic(geom in sdo_geometry, longitude in number,
                     latitude in number)
 RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION getNurbsApprox(geometry  IN mdsys.sdo_geometry,
                         tolerance IN number)
 RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
 PRAGMA restrict_references(getNurbsApprox, rnds, wnds, rnps, wnps, trust);

 FUNCTION jsph_getnurbsapprox(geometry  IN mdsys.sdo_geometry)
 RETURN mdsys.sdo_geometry DETERMINISTIC PARALLEL_ENABLE;
 PRAGMA restrict_references(jsph_getnurbsapprox, rnds, wnds, rnps, wnps, trust);

 FUNCTION linear_key(geometry  IN mdsys.sdo_geometry,
                     diminfo mdsys.sdo_dim_array,
                     lvl IN NUMBER := 8)
 RETURN RAW DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION linear_key(geometry  IN mdsys.sdo_geometry,
                     min_x IN NUMBER, min_y IN NUMBER,
                     max_x IN NUMBER, max_y IN NUMBER,
                     lvl IN NUMBER := 8)
 RETURN RAW DETERMINISTIC PARALLEL_ENABLE;

 procedure insert_sdo_geom_metadata(owner IN VARCHAR2,
                                    table_name IN VARCHAR2,
                                    column_name IN VARCHAR2,
                                    diminfo IN mdsys.sdo_dim_array,
                                    srid IN number);

END sdo_util;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_TOPO_METADATA_INT" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
8ab 278
XZ8iWnM4VBawfbdIHFy4nHnuU+cwg9enLsDWfHQCmIuOh+iCTDIFjeDVSrrvguYhOEP4mlHf
FPvxoMjSF5fFHXopOhJg3ESSslblg0YWa54tovsd4bP3Fk1tUWmUW/DoOMNaSzME8AjMtJNt
5GVCy9SiFO4rO8O088J7cUp32ksZ4SQklPySjQX4cLoybYXMevxRgu3j7MDw5Oks0HQaUncX
YAnH6hJon9zgbjIJxqLe1X9+UTXN8qWZiV8yhgH17yHA4QgwvWinmnBBThQWCDnwy7w+3i9i
swTqQIEeRg8ZUimfNskRu8pPoV/MBMs9LCC8uvH8inORw78BKm+QHUcSoYq+DZh9YiW0fWvN
q6SfhHiqVkAhrFPNLP/lToAktaGtZVPQHUBS3G3rc8Vx0hYwNbuqUfh5BFMfOWLtsErU/KCF
bAran31X3EcySyPBF3OAzY0ocJ/e9zi/7WTxEBkqvhV8oWBE7MWQqjCJPyvv2imZY9bT66HO
TRvfoMbSZX1i/+pXtIVE37LeUjfD0/zEQTgjCzLkf18kXF3DGu5rESWuVn43VkgaHWH8QodU
fa7co3Vfd/rqvRcB3Lfek/MVTDTloTXKWB616YccIqbNyYM/
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_TOPO_METADATA" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
1ce 134
GaaOav3q8ZU1SRMOl133XY+eixwwgwL3LkhqZ+cCmDM+VOgJ6lUj6Ygn0ODWAmvc6ry1YhiG
oqF3nZNrsxIsKHXISrR/R+nqsaGx96SZe+FA/g2mAohtZH8D+/+yWejbbF83rkhavPj182Fq
K8uDEOaUzmeMHM2BYzckmjG9qz/H3Yg+V5tqtccSmhw5lcLDPkXkaB/koIs2/TXgzwsMtQDK
6HaJZDyaBLrxpMOVvgyeetsON15fd061RgxfsqUc5odcyvD1aL91GGoNWtvpkB6CM0v9A3lU
l/63Da4PMxEwLg==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."MDPRVT_IDX" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
ce2 3d1
/wle+eGfDwfa21EZHFuHwCKnKRYwg2OcACAFfC9A2vjquFmpDmfCyXu3F1jnoX9d+veYuPol
a2fMjumqP9Dx8VqeYvpNH7oVx78juwygWzo2lBgsZCSqczqQvJ35lC+/5s5pDMMuZzWOt+ms
ExbQETVuyoXvRgfaa6RUdg/4+vAFgKiftuorbJ7KCNTUGDuAXYnr3OuLdV1gnIro0rM2+G2z
S+kxL+jlCJ7nmX/GPL8f5tJPnvbZZYatP/Dl3DrTPm4kmXo3s62j8d3uSPWK9fDAwnYXhWqU
z//r5x+eKFAE0+J/ydffHp2RE2PN6PzFGhqQFWEKqApGHoFMZKW1IeJNcQ2f8rrMeFhhEnQK
5PMyMhr2VnQkD5zxfgOtSeIRPP6Ga1Lx9c0w4c7iClOyNV08O413TPsN2ncfQPJqEDdiUX3c
uxa10YStc/79oAG5OB3BYXv1ugD843L+/b4mnQV/H8jsj0Dlch6PtyfYLNcuLcoV7tkZd5sm
bQYuXVLv2HxfHbJSGUE4YTeSTP5/6LQCHkf4c5xF6FjQXVkjGVLtmXsScemyQVCOORBl4Yhd
9iU5hsURa2JXYqnCYStenLDdmP5lV4U37a95l8FCo2cQUG8VQimtPm+bhzM+9utUeNAPoh1E
2yGKbmOlAIW/two9EvmWrDTSUOlITD8Ts0L7eqnZO6PnYsmRTfbTBdKlbi53H7PWSMwyHSpO
q48BiTNxu306fsJriewhdUZia4zpd3+ChtFrQXipt/uoBvLG9nhTXwqMLbKKErcMiOrJhd2I
hOXJjLxpym8yj7uBjxzhKUhE0WN9suZs3yEIx4IhQ6OltkDO8yP7Xetu5iXAahqA4ScG8vFu
PnkTZuXYoRLKQlnMqmpczXHSdyOwp2dBA5H+7utRkyTtOV/PFdm1mcmwNPYPLENEo6KabZ2g
IDo1lcuTYVwibjAFCjMI2SQYh3eY
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."PRVT_IDX" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
10f8 268
ySysld9E4fYTt2GlV8FeSc3h9Mwwg83qAK5qfC8Bi+poVBrn+/awChDeO5LvtBd33IdUtC/m
40/QpMN8N46oRqKMo8yJbrvk5EFOBhqELdRsr3Nq6wtFmBA5XzQJ06LSQVawBIUdQF6pz6Cz
niv/rA0DbK0dl6z3OP3/1vUmouNzYTfAMiolWAcmE69L0Vh4fZWec1wd8kjxj7KJ8kkCCSsl
G1tAjWsUQ/IfiJ7mT5xlhZf69UJr7G44uvAMS7NWhU89gUFXkr/DfVCMPBq2k3ER7LtJ2YDi
arw+aVX4dCwcsSROivWke5Mk3LEQtdT2lCom4YyUIfAumw3BEz12jEeA1FtL9OQYpTVIEwtf
tTyFXsTN2y57Mgz5eB2esXnaYZdhSOhLyj91k/R4ATY/bZwT0/meCF7NpkfH8bN1eZdlX2qy
Gk2rH+H6UWuSDTnxo1/sgjg7xgLOS0vg6eCQGCHJPE8KnBroTKG3TjwBd5Cn2hptEHwqy0Dk
v3ImDRUp+1C8ck+ticx7uzb6fb3msJSwHuOjDRiRnrFFnDhh3WftxbtOLJxkSJnLkx3Wc7Yz
hoM/vfyXA1n4idhHx7zuwjROtx86jRQc
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_TPIDX" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
2e8 140
4Pf1OZR9/rHGPb2s4NT6bWxE32Iwg5X3Ldwdf3RAWLs+emEJld2D+vBVCpWQx8BujHgBKRU2
03R6IimhoKSe03wht2NdA50kHHx64NmlnzA+u2RyByjditqo5zFfPQzcfqkm3qZhk9YMwy9s
GZx6L3tq5i8libnvRFiWosRSRCsSXxE4BzNL5aW/SZ8h4FsApBIUGJWGLwzZLRfEKUkJOinQ
FB4wCeKBm5smLRdeUGggtDzq4G08LAi11Lz3elLGxGgxZF1yud6RDA3go3aAMi2QJw63Hptt
lDJIF1M4bHU9OWtzkrm2bnAmjw==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_RELATE_MASK" authid definer as
procedure insert_mask(mask      in varchar2,
                 relation  in varchar2);

procedure update_mask(mask      in varchar2,
                 relation  in varchar2);

procedure delete_mask(mask      in varchar2);
end sdo_relate_mask;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_JAVA_STP" AUTHID current_user AS

 FUNCTION to_gmlgeometry(Geometry IN MDSYS.SDO_GEOMETRY)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE AS LANGUAGE JAVA NAME
    'oracle.spatial.util.GML2.to_GMLGeometryCLOBJS(java.sql.Struct) return oracle.jdbc.OracleClob' ;

 FUNCTION to_gmlgeometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            srsNameSpace IN varchar2, srsNSAlias IN varchar2)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE AS LANGUAGE JAVA NAME
    'oracle.spatial.util.GML2.to_GMLGeometryCLOBJS(java.sql.Struct, java.lang.String, java.lang.String) return oracle.jdbc.OracleClob' ;

 FUNCTION to_gmlgeometry(Geometry IN MDSYS.SDO_GEOMETRY,
                         coordOrder number)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE AS LANGUAGE JAVA NAME
    'oracle.spatial.util.GML2.to_GMLGeometryCLOBJS(java.sql.Struct, oracle.sql.NUMBER) return oracle.jdbc.OracleClob' ;

 FUNCTION to_gmlgeometry(Geometry IN MDSYS.SDO_GEOMETRY,
                         srsNameSpace IN varchar2, srsNSAlias IN varchar2,
                         coordOrder number)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE AS LANGUAGE JAVA NAME
    'oracle.spatial.util.GML2.to_GMLGeometryCLOBJS(java.sql.Struct, java.lang.String, java.lang.String, oracle.sql.NUMBER) return oracle.jdbc.OracleClob' ;

 FUNCTION to_gml311geometry(Geometry IN MDSYS.SDO_GEOMETRY)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE AS LANGUAGE JAVA NAME
    'oracle.spatial.util.GML3.to_GML3GeometryCLOBJS(java.sql.Struct) return oracle.jdbc.OracleClob' ;

 FUNCTION to_gml311geometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            srsNameSpace IN varchar2, srsNSAlias IN varchar2)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE AS LANGUAGE JAVA NAME
    'oracle.spatial.util.GML3.to_GML3GeometryCLOBJS(java.sql.Struct, java.lang.String, java.lang.String) return oracle.jdbc.OracleClob' ;

 FUNCTION to_gml311geometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            coordOrder number)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE AS LANGUAGE JAVA NAME
    'oracle.spatial.util.GML3.to_GML3GeometryCLOBJS(java.sql.Struct, oracle.sql.NUMBER) return oracle.jdbc.OracleClob' ;

 FUNCTION to_gml311geometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            srsNameSpace IN varchar2, srsNSAlias IN varchar2,
                            coordOrder number)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE AS LANGUAGE JAVA NAME
    'oracle.spatial.util.GML3.to_GML3GeometryCLOBJS(java.sql.Struct, java.lang.String, java.lang.String, oracle.sql.NUMBER) return oracle.jdbc.OracleClob' ;

 FUNCTION to_gml321geometry(Geometry IN MDSYS.SDO_GEOMETRY)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE AS LANGUAGE JAVA NAME
    'oracle.spatial.util.GML3.to_GML3_2GeometryCLOBJS(java.sql.Struct) return oracle.jdbc.OracleClob' ;

 FUNCTION to_gml321geometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            srsNameSpace IN varchar2, srsNSAlias IN varchar2)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE AS LANGUAGE JAVA NAME
    'oracle.spatial.util.GML3.to_GML3_2GeometryCLOBJS(java.sql.Struct, java.lang.String, java.lang.String) return oracle.jdbc.OracleClob' ;

 FUNCTION to_gml321geometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            coordOrder number)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE AS LANGUAGE JAVA NAME
    'oracle.spatial.util.GML3.to_GML3_2GeometryCLOBJS(java.sql.Struct, oracle.sql.NUMBER) return oracle.jdbc.OracleClob' ;

 FUNCTION to_gml321geometry(Geometry IN MDSYS.SDO_GEOMETRY,
                            srsNameSpace IN varchar2, srsNSAlias IN varchar2,
                            coordOrder number)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE AS LANGUAGE JAVA NAME
    'oracle.spatial.util.GML3.to_GML3_2GeometryCLOBJS(java.sql.Struct, java.lang.String, java.lang.String, oracle.sql.NUMBER) return oracle.jdbc.OracleClob' ;

FUNCTION to_kmlgeometry(Geometry IN MDSYS.SDO_GEOMETRY)
 RETURN CLOB DETERMINISTIC  PARALLEL_ENABLE AS LANGUAGE JAVA NAME
    'oracle.spatial.util.KML2.to_KMLGeometryCLOBJS(java.sql.Struct) return oracle.jdbc.OracleClob' ;


 FUNCTION from_wkbgeometry(geometry IN BLOB)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.wkbToSTRUCT(oracle.jdbc.OracleBlob) return java.sql.Struct';

 FUNCTION from_wktgeometry(geometry IN CLOB)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.wktToSTRUCT(oracle.jdbc.OracleClob) return java.sql.Struct';


 FUNCTION from_wktgeometry(geometry IN VARCHAR2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.wktToSTRUCT(java.lang.String) return java.sql.Struct';


 FUNCTION from_GMLgeometry(geometry IN CLOB)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gmlToSTRUCT(oracle.jdbc.OracleClob) return java.sql.Struct';

 FUNCTION from_GMLgeometry(geometry IN CLOB, srsNameSpace IN varchar2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gmlToSTRUCT(oracle.jdbc.OracleClob, java.lang.String) return java.sql.Struct';

 FUNCTION from_GMLgeometry(geometry IN VARCHAR2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gmlToSTRUCT(java.lang.String) return java.sql.Struct';

 FUNCTION from_GMLgeometry(geometry IN VARCHAR2, srsNameSpace IN varchar2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gmlToSTRUCT(java.lang.String, java.lang.String) return java.sql.Struct';

 FUNCTION from_GMLgeometry(geometry IN CLOB,
                           coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gmlToSTRUCT(oracle.jdbc.OracleClob, oracle.sql.NUMBER) return java.sql.Struct';

 FUNCTION from_GMLgeometry(geometry IN CLOB, srsNameSpace IN varchar2,
                           coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gmlToSTRUCT(oracle.jdbc.OracleClob, java.lang.String, oracle.sql.NUMBER) return java.sql.Struct';

 FUNCTION from_GMLgeometry(geometry IN VARCHAR2,
                           coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gmlToSTRUCT(java.lang.String, oracle.sql.NUMBER) return java.sql.Struct';

 FUNCTION from_GMLgeometry(geometry IN VARCHAR2, srsNameSpace IN varchar2,
                           coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gmlToSTRUCT(java.lang.String, java.lang.String, oracle.sql.NUMBER) return java.sql.Struct';

 FUNCTION from_GML311geometry(geometry IN CLOB)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gml311ToSTRUCT(oracle.jdbc.OracleClob) return java.sql.Struct';

 FUNCTION from_GML311geometry(geometry IN CLOB, srsNameSpace IN varchar2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gml311ToSTRUCT(oracle.jdbc.OracleClob, java.lang.String) return java.sql.Struct';

 FUNCTION from_GML311geometry(geometry IN VARCHAR2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gml311ToSTRUCT(java.lang.String) return java.sql.Struct';

 FUNCTION from_GML311geometry(geometry IN VARCHAR2, srsNameSpace IN varchar2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gml311ToSTRUCT(java.lang.String, java.lang.String) return java.sql.Struct';

 FUNCTION from_GML311geometry(geometry IN CLOB,
                              coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gml311ToSTRUCT(oracle.jdbc.OracleClob, oracle.sql.NUMBER) return java.sql.Struct';

 FUNCTION from_GML311geometry(geometry IN CLOB, srsNameSpace IN varchar2,
                              coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gml311ToSTRUCT(oracle.jdbc.OracleClob, java.lang.String, oracle.sql.NUMBER) return java.sql.Struct';

 FUNCTION from_GML311geometry(geometry IN VARCHAR2,
                              coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gml311ToSTRUCT(java.lang.String, oracle.sql.NUMBER) return java.sql.Struct';

 FUNCTION from_GML311geometry(geometry IN VARCHAR2, srsNameSpace IN varchar2,
                              coordOrder IN number)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.gml311ToSTRUCT(java.lang.String, java.lang.String, oracle.sql.NUMBER) return java.sql.Struct';

 FUNCTION from_KMLgeometry(geometry IN CLOB)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.kmlToSTRUCT(oracle.jdbc.OracleClob) return java.sql.Struct';


 FUNCTION from_KMLgeometry(geometry IN VARCHAR2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.kmlToSTRUCT(java.lang.String) return java.sql.Struct';


 FUNCTION affinetransforms(geometry IN MDSYS.SDO_GEOMETRY,
                           translation IN VARCHAR2, tx IN NUMBER, ty IN NUMBER, tz IN NUMBER,
                           scaling IN VARCHAR2, Psc1 IN MDSYS.SDO_GEOMETRY, sx IN NUMBER, sy IN NUMBER, sz IN NUMBER,
                           rotation IN VARCHAR2, P1 IN MDSYS.SDO_GEOMETRY, line1 IN MDSYS.SDO_GEOMETRY, angle IN NUMBER, dir IN NUMBER,
                           shearing IN VARCHAR2, SHxy IN NUMBER, SHyx IN NUMBER, SHxz IN NUMBER, SHzx IN NUMBER, SHyz IN NUMBER, SHzy IN NUMBER,
                           reflection IN VARCHAR2, Pref IN MDSYS.SDO_GEOMETRY, lineR IN MDSYS.SDO_GEOMETRY, dirR IN NUMBER, planeR IN VARCHAR2, n IN SDO_NUMBER_ARRAY, bigD IN SDO_NUMBER_ARRAY)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.affineTransforms(java.sql.Struct, java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER,
java.lang.String, java.sql.Struct, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER,
java.lang.String, java.sql.Struct, java.sql.Struct, oracle.sql.NUMBER, oracle.sql.NUMBER,
java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER,
java.lang.String, java.sql.Struct, java.sql.Struct, oracle.sql.NUMBER, java.lang.String, oracle.spatial.type.SdoNumberArray, oracle.spatial.type.SdoNumberArray) return java.sql.Struct';


 FUNCTION extract3d(geometry IN MDSYS.SDO_GEOMETRY, label IN VARCHAR2)
 RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.extract3d(java.sql.Struct, java.lang.String) return java.sql.Struct';

 FUNCTION getlabelbyelement(sourceGeometry IN MDSYS.SDO_GEOMETRY, queryElement IN MDSYS.SDO_GEOMETRY, tol IN NUMBER)
 RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.getlabelbyelement(java.sql.Struct, java.sql.Struct, oracle.sql.NUMBER) return java.lang.String';

 FUNCTION validate_wkbgeometry(geometry IN BLOB)
 RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.validateWkb(oracle.jdbc.OracleBlob) return java.lang.String';

 FUNCTION validate_wktgeometry(geometry IN CLOB)
 RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.validateWkt(oracle.jdbc.OracleClob) return java.lang.String';

 FUNCTION validate_wktgeometry(geometry IN VARCHAR2)
 RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.validateWkt(java.lang.String) return java.lang.String';


 -- these functions are from sdo_3gl package
  FUNCTION generate_buffer(geomobj IN mdsys.sdo_geometry,
                           dist  IN NUMBER,
                           sma   IN NUMBER, iflat IN NUMBER,
                           arcT  IN NUMBER)
  RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.buffer(java.sql.Struct, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER) return java.sql.Struct ';

 FUNCTION anyInteract3D(Geometry1 IN MDSYS.SDO_GEOMETRY,
                        Geometry2 IN MDSYS.SDO_GEOMETRY,
                        is_g3d IN VARCHAR2,
                        tolerance IN number)
 RETURN VARCHAR2 DETERMINISTIC
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.anyInteract(java.sql.Struct, java.sql.Struct, java.lang.String, oracle.sql.NUMBER) return java.lang.String';

 FUNCTION distance3D(Geometry1 IN MDSYS.SDO_GEOMETRY,
                     Geometry2 IN MDSYS.SDO_GEOMETRY,
                     is_g3d IN VARCHAR2,
                     smajax IN NUMBER,
                     flattening IN NUMBER,
                     g3d_geog_crs_uom_factor IN NUMBER,
                     tolerance IN number)
 RETURN number DETERMINISTIC
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.distance(java.sql.Struct, java.sql.Struct, java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER) return oracle.sql.NUMBER';

 FUNCTION length3D(Geometry IN MDSYS.SDO_GEOMETRY,
                   count_shared_edges IN NUMBER,
                   is_g3d IN VARCHAR2,
                   smajax IN NUMBER,
                   flattening IN NUMBER,
                   g3d_geog_crs_uom_factor IN NUMBER,
                   tolerance IN number)
 RETURN number DETERMINISTIC
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.length(java.sql.Struct, oracle.sql.NUMBER, java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER) return oracle.sql.NUMBER';

 FUNCTION area3D(Geometry IN MDSYS.SDO_GEOMETRY,
                 is_g3d IN VARCHAR2,
                 smajax IN NUMBER,
                 flattening IN NUMBER,
                 g3d_geog_crs_uom_factor IN NUMBER,
                 tolerance IN number)
 RETURN number DETERMINISTIC
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.area(java.sql.Struct, java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER) return oracle.sql.NUMBER';

 FUNCTION volume3D(Geometry IN MDSYS.SDO_GEOMETRY,
                   is_g3d IN VARCHAR2,
                   smajax IN NUMBER,
                   flattening IN NUMBER,
                   g3d_geog_crs_uom_factor IN NUMBER,
                   tolerance IN number)
 RETURN number DETERMINISTIC
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.volume(java.sql.Struct, java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER) return oracle.sql.NUMBER';


 FUNCTION validateGeom3D(Geometry IN MDSYS.SDO_GEOMETRY,
                         conditional IN VARCHAR2,
                         chck3dsrid IN NUMBER,
                         tolerance IN number)
 RETURN VARCHAR2 DETERMINISTIC
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.validateGeom(java.sql.Struct, java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER) return java.lang.String';

 FUNCTION validate_layer_with_context3D(geom_table IN VARCHAR2,
                         geom_column IN VARCHAR2,
                         result_table IN VARCHAR2,
                         commit_interval IN NUMBER,
                         conditional IN VARCHAR2,
                         chck3dsrid IN NUMBER,
                         tolerance IN NUMBER)
 RETURN NUMBER DETERMINISTIC
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.validate_layer_with_context_3D(java.lang.String, java.lang.String, java.lang.String, oracle.sql.NUMBER, java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER) return java.sql.NUMBER';

 FUNCTION closestPoints3D(Geometry1 IN MDSYS.SDO_GEOMETRY,
                         Geometry2 IN MDSYS.SDO_GEOMETRY,
                         is_g3d IN VARCHAR2,
                         smajax IN NUMBER,
                         flattening IN NUMBER,
                         g3d_geog_crs_uom_factor IN NUMBER,
                         tolerance IN number)
  RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.closestPoints(java.sql.Struct, java.sql.Struct, java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER) return java.sql.Struct';

FUNCTION centroid3D(Geometry IN MDSYS.SDO_GEOMETRY,
                    tolerance IN number)
RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
 AS LANGUAGE JAVA NAME
 'oracle.spatial.util.Adapters.centroid_3d(java.sql.Struct, oracle.sql.NUMBER) return java.sql.Struct';

  -- Removes innner rings of geom and returns collection
  FUNCTION ring_union_approx(geom SDO_GEOMETRY, tol number)
  RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.ringUnionApprox(java.sql.Struct, oracle.sql.NUMBER) return java.sql.Struct';

  FUNCTION inside3D(Geometry1 IN MDSYS.SDO_GEOMETRY,
                    Geometry2 IN MDSYS.SDO_GEOMETRY,
                    is_g3d IN VARCHAR2,
                    tolerance IN number)
  RETURN VARCHAR2 DETERMINISTIC
   AS LANGUAGE JAVA NAME
   'oracle.spatial.util.Adapters.inside3d(java.sql.Struct, java.sql.Struct, java.lang.String, oracle.sql.NUMBER) return java.lang.String';

  FUNCTION pctrclip(qry IN sdo_geometry,
                    other_qry IN mdsys.sdo_mbr,
                    pts IN BLOB, npts IN number, totdim IN number,
                    trs IN BLOB, ntrs IN number,
                    tol IN number,
                    include_custom_dim IN NUMBER) RETURN BLOB
   AS LANGUAGE JAVA NAME
   'oracle.spatial.util.Adapters.pctrclipJS(java.sql.Struct, java.sql.Struct, oracle.jdbc.OracleBlob, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.jdbc.OracleBlob, oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER) return oracle.jdbc.OracleBlob';

  function expandG3DGeoms(geom IN mdsys.sdo_geometry)
  RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.expandG3Dgeoms(java.sql.Struct) return java.sql.Struct';


 FUNCTION internal_simplifyvw(geometry IN MDSYS.SDO_GEOMETRY,
                              vertex_threshold IN NUMBER,
                              sma number,
                              iflat number)
 return MDSYS.SDO_GEOMETRY deterministic PARALLEL_ENABLE
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.simplifyVW(java.sql.Struct,  oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER) return java.sql.Struct';

-- Java API for NURBS curve approximation
  FUNCTION internal_getnurbsapprox(geometry IN MDSYS.SDO_GEOMETRY)
  RETURN MDSYS.SDO_GEOMETRY deterministic PARALLEL_ENABLE
  AS LANGUAGE JAVA NAME
    'oracle.spatial.util.Adapters.getNurbsApprox(java.sql.Struct) return java.sql.Struct';

  FUNCTION intl_to_wkbgeometry(geometry IN MDSYS.SDO_GEOMETRY)
  RETURN BLOB DETERMINISTIC
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.structToWkbJS(java.sql.Struct) return oracle.jdbc.OracleBlob';

  FUNCTION intl_to_wktgeometry(geometry IN MDSYS.SDO_GEOMETRY)
  RETURN CLOB DETERMINISTIC
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.structToWktJS(java.sql.Struct) return oracle.jdbc.OracleClob';

  FUNCTION intl_to_wktgeometry_varchar(geometry IN MDSYS.SDO_GEOMETRY)
  RETURN VARCHAR2 DETERMINISTIC
  AS LANGUAGE JAVA NAME
  'oracle.spatial.util.Adapters.structToWktString(java.sql.Struct) return String';


  FUNCTION intl_extrude(geometry IN MDSYS.SDO_GEOMETRY,
                        grdHeight IN SDO_NUMBER_ARRAY,
                        height IN SDO_NUMBER_ARRAY,
                        tol IN NUMBER,
                        optional3dSrid IN NUMBER)
  RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
   AS LANGUAGE JAVA NAME
   'oracle.spatial.util.Adapters.extrusion2(java.sql.Struct, oracle.spatial.type.SdoNumberArray, oracle.spatial.type.SdoNumberArray, oracle.sql.NUMBER, oracle.sql.NUMBER) return java.sql.Struct';



   --
   -- geodetic 3D related functions/procedures
   --


   FUNCTION populate_measure_geo3d(geom_segment      IN MDSYS.SDO_GEOMETRY,
                                   smax      IN NUMBER,
                                   flat      IN NUMBER,
                                   geog_crs_uom_factor IN NUMBER,
                                   start_measure IN NUMBER,
                                   end_measure   IN NUMBER,
                                   tolerance     IN NUMBER)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
   AS LANGUAGE JAVA NAME
   'oracle.spatial.geometry.LRSGeometryG3D.defineG3D(
    java.sql.Struct,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER)  return java.sql.Struct';


   FUNCTION locate_pt_geo3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                            smax             IN NUMBER,
                            flat             IN NUMBER,
                            geog_crs_uom_factor IN NUMBER,
                            measure      IN NUMBER,
                            tolerance    IN NUMBER)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
   AS LANGUAGE JAVA NAME
   'oracle.spatial.geometry.LRSGeometryG3D.locateG3D(
    java.sql.Struct,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER)  return java.sql.Struct';

   FUNCTION clip_geom_segment_geo3d(geom_segment  IN MDSYS.SDO_GEOMETRY,
                                    smax             IN NUMBER,
                                    flat             IN NUMBER,
                                    geog_crs_uom_factor IN NUMBER,
                                    start_measure IN NUMBER,
                                    end_measure   IN NUMBER,
                                    tolerance     IN NUMBER)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
   AS LANGUAGE JAVA NAME
   'oracle.spatial.geometry.LRSGeometryG3D.clipG3D(
    java.sql.Struct,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER)  return java.sql.Struct';

   FUNCTION project_pt_geo3d(geom_segment    IN MDSYS.SDO_GEOMETRY,
                             smax            IN NUMBER,
                             flat            IN NUMBER,
                             geog_crs_uom_factor IN NUMBER,
                             point           IN MDSYS.SDO_GEOMETRY,
                             tolerance       IN NUMBER)
   RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
   AS LANGUAGE JAVA NAME
   'oracle.spatial.geometry.LRSGeometryG3D.projectG3D(
    java.sql.Struct,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    java.sql.Struct,
    oracle.sql.NUMBER)  return java.sql.Struct';

   FUNCTION length_geo3d(geom_segment    IN MDSYS.SDO_GEOMETRY,
                         smax            IN NUMBER,
                         flat            IN NUMBER,
                         geog_crs_uom_factor IN NUMBER,
                         tolerance       IN NUMBER)
   RETURN NUMBER PARALLEL_ENABLE
   AS LANGUAGE JAVA NAME
   'oracle.spatial.geometry.LRSGeometryG3D.lengthG3D(
    java.sql.Struct,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER,
    oracle.sql.NUMBER)  return oracle.sql.NUMBER';


    ---
    --- NDM sdo_net java stored procedure/function
    ---

  --
  -- sdonetb.sql
  --

  -- private procedure to call java wrapper
  PROCEDURE generate_partition_blobs_java(
                              network                   IN VARCHAR2,
                              link_level                IN NUMBER,
                              partition_blob_table_name IN VARCHAR2,
                              include_user_data         IN BOOLEAN,
                              commit_for_each_blob      IN BOOLEAN,
                              perform_delta_update      IN BOOLEAN)
  AS LANGUAGE JAVA
  NAME 'oracle.spatial.network.lod.LODNetworkWrapper.generatePartitionBlobs(java.lang.String, int, java.lang.String, boolean, boolean, boolean)';


  -- private procedure to call java wrapper
  PROCEDURE generate_partition_blobs_java2(
                              network                   IN VARCHAR2,
                              partition_blob_table_name IN VARCHAR2,
                              include_user_data         IN BOOLEAN,
                              commit_for_each_blob      IN BOOLEAN,
                              perform_delta_update      IN BOOLEAN)
  AS LANGUAGE JAVA
  NAME 'oracle.spatial.network.lod.LODNetworkWrapper.generatePartitionBlobs(java.lang.String, java.lang.String, boolean, boolean, boolean)';


  -- private procedure to call java wrapper
  PROCEDURE generate_partition_blob_java(
                              network           IN VARCHAR2,
                              link_level        IN NUMBER,
                              partition_id      IN NUMBER,
                              include_user_data IN BOOLEAN,
                              perform_delta_update IN BOOLEAN)
  AS LANGUAGE JAVA
  NAME 'oracle.spatial.network.lod.LODNetworkWrapper.generatePartitionBlob(java.lang.String, int, int, boolean, boolean)';


  -- private procedure to call java wrapper
  PROCEDURE find_connected_components_java(
                              network              IN VARCHAR2,
                              link_level           IN NUMBER,
                              component_table_name IN VARCHAR2)
  AS LANGUAGE JAVA
  NAME 'oracle.spatial.network.lod.LODNetworkWrapper.findConnectedComponents(java.lang.String, int, java.lang.String)';


  FUNCTION find_conn_comp_part_java(
                              network                IN VARCHAR2,
                              link_level             IN NUMBER,
                              partition_id           IN NUMBER,
                              start_comp_id          IN NUMBER,
                              node_id_array          OUT MDSYS.SDO_NUMBER_ARRAY, --SYS.ODCINUMBERLIST,
                              comp_id_array          OUT MDSYS.SDO_NUMBER_ARRAY) -- SYS.ODCINUMBERLIST)
  RETURN NUMBER
  AS LANGUAGE JAVA
  NAME 'oracle.spatial.network.lod.LODNetworkWrapper.findConnectedComponentsInPartition(
          java.lang.String,
          int,
          int,
          int,
          java.sql.Array[],
          java.sql.Array[])
        return int';

  PROCEDURE set_max_java_heap_size(bytes NUMBER)
   AS LANGUAGE JAVA NAME
   'oracle.aurora.vm.OracleRuntime.setMaxMemorySize(long)';


  PROCEDURE load_config_java( config_xml  IN CLOB )
  AS LANGUAGE JAVA
  NAME 'oracle.spatial.network.lod.LODNetworkWrapper.loadConfig(java.sql.Clob)';


  FUNCTION get_partition_size_java( network                     IN VARCHAR2,
                                    partition_id                IN NUMBER,
                                    link_level                  IN NUMBER,
                                    inlcude_user_data           IN BOOLEAN,
                                    include_spatial_data        IN BOOLEAN)
  RETURN NUMBER
  AS LANGUAGE JAVA
  NAME 'oracle.spatial.network.lod.LODNetworkWrapper.getPartitionSize(
        java.lang.String,
        int,
        int,
        boolean,
        boolean) return long';

  ---
  --- prvtnetb.sql
  ---

  PROCEDURE set_logging_level_java( level     IN NUMBER )
  AS LANGUAGE JAVA
  NAME 'oracle.spatial.network.lod.LODNetworkWrapper.setLoggingLevel(int)';


END;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_3GL" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
7ff2 da3
qcY7iu4aKFWvPrP8ttlRYmt9IR4wg81MLtCMV7YZx7WeSt4mDYPcLPhdcEkIoH9feSX6cc9C
Y/7CJRwztQz2HfsdOX5bI3ssO7MWLphN5bAiimUB8TfOHYpp0ru1+fcgtbXa4b60CwSVrQvj
nljH22bdT0FRERPrVI+JYHTzylCeBhRV5DDwUTabtrW3asPlDNN8OdyW92Z9+YppowkhNpLT
00ciPwzd4s5Lr45Lt9vDDqTglqdrY1b2IJM8b5NB1wh09G6zfaZUNFtZf4WmHUbKZvNE/axR
/rBa1oZt0El6p+6jyEYKKBcxNFKTBG8y9zdM4Xdw0QRKApERbYnqleNk8l+HUa6evvkkhnK7
HVcn+4fvWTtIjCQ7W/m065b75ITQO/NtfHqXVHbvLhMVBAues8xMfevAAFmz6L7jIZzgGsNf
Mz6JZKruHyqsbxwMTpHWtE7no6RLGaSJb7HiTmjybf09QneYZFwpSJEdIyX6bjdUXx2lkQxp
/7y18Ka4w4doDrlO1dFIgCAkIJ3LlZizHLDDplk6EEaSoIMGa4Hw6c5ZHD+Q7jvS1C9Vk7go
FmIce5rDcHIGBbGIPGbXhnOQ6Q1MFwhpOqfgI8vGvP/IYCTHZ7lWGs17bQeXxI4lx1czDTw8
W9u5ZMJhxWIce5pUXADWIA9SVO9TrVULkbqBbygNIGW8F7ibHnRSO3r7MZBEzsg8BmvSeUT+
erkQXGt55WS0GtL/4AXiAzBNzwxSAAcLD4FG7TdJ4zrQjl5ST8f+BKYGa7U7cn1OOrUNsDdR
JgeMzj9O3XzhBvvdAJGsvuaPe16virL8dGrjY08EvNKYQkS0NDPi2LrqkqkWSDakLyaOPz7i
aTe9BoFjrllsAletD84uObgntw9o4WEi/CKbUvKj6qMjV+WzszXJVvDzwQqsqmoYqEG2OHHK
3pL3F+7Yus4Q4C3qi+q2RaYhMyQD0yMwlVcOFekIOIU60VdHBsDlAYnRsFR9tt+ytDXeUZmb
dcQi8MUtM+j8Qk6laf58Tz4ZhErGWTg+HGn5KxaVHfq+4eRBDm7yWA8ilq2Q4nH1ySNKbt2g
a63AucIdijqmyRDh6yEVb7YNRQ+b5EN4kx66pMDMFLyavuv7lJVM9hZINa+PtmOaPgQf8NQS
0ZgQCj0dygT8I1xqvuWLlrF4e6DoDB5+JukeGDb3Zb+sJuwDuIqtmg3bAHKfWS6fiwxbGCX9
i3QNDbcjwomSfh97GGdcOxj44tOjvOX1egWDaB11pvribPtJ25In8sw0amtDgeKblPewuWCb
RjkZa2ibS+fuzwdXLtNWGB9AfGPYvPqtim67zDbz6AXDXsTgaQ/PCD3UrOO7YhiOPVWf/LqD
XzykUePeDCCbOxj0Pa2bdy7mseWko2RMHC6DGg7F//j+7PWLCmmzJrxQai7H0db0a+rIoy7k
X/BDxVsTC+/Yi3buWth8fIiIVM5RUDnmbIwh63BNDxNlZdva/All3QAn856DKf6IgZ7ZmTaH
KL16WSNYSW8bEckTGG+XkWpRe3rZrHxaa9E7bfuJU5tUuoTXkOvRWKmMePQGwJvB4O/0G7Tk
mxcLqEI/0CMzCQqmc4tk9dWUPFrpAQsDqQIMeYJy2wuDRy6Vp9d6Wv/fTobA/OEp1gv1qKf5
+SwEHTdSLwSZCwiP3c3qBMSmwpLX9ZKwkNd582MDTz394XOPipn3v5QVMiYe6As3Wg7ZiaA4
P15OAEzd/pEMMgCYL6K/5dL7dDfddh+JVXoZ9lT5icB7ZmsNKQoioxT9V3UgXdWZQ9XULiSd
OyetB+UemGtoqs7uN1K+rYsqriH2LiTf9g/fPba14XuAikVy1bnzU4MTbUPkiYSWRMdMoym+
66z1qBO/0TB50pv6582bhU/Ne187T2w58FKh9yonYGpl3KdGBBTskDhgmqwDf1EXQmhwMRl0
WPUeK/xMdJeCIdxXP+AWM2vKQKh9HZrqC+rd7uFuRbVAFQQDdQ6Zz6XTeNL+25qmTfTr5+KE
tezWxBRD/DNl6y7kNAIw3UpH9o4JyN8m2uMpe+PesdvcEgif1ZagQt8ntWFVfhxpAMXNNBOl
qUr4bsgODUW+wY9FAlPK4Q1l0ULp9x1F2W1v7r3p6DwEn1C8oxCEqJzOeBDKOVsaUrcTuBZ0
fOSMYdFk/Mma7rJt6aRNNeDThP2pec6s7T6RH8j748cZTID5yQTtdvPIfigUmtZ0O3QEAC8h
ptKv/6lIUaB4MzOD+HSubQDV3mh0zK8JdB1lDapBvKVSC4DS4NzyPnIxb3dE7gHQMLyK9D1N
CsSU/aWfTjCgP/+UaG4a0lOFG0AW8l/soMgXWm7g7yNwJhD0eowMk4RT+1kTsqRAnxhE4GUH
4ALuzG5lxtQvKlN+1sAc0QP8mVJu54ln/x0BMcSLIrx6BF0i+QNVdiVODAtsV/xBl86QnfCq
nEpqJp4QcoHdAJzALWGX0Te6sJo67r1EF85K3htyUnAi3yucgcsDehoac7CIgm2bfL3zQzAS
RdjouE/+Hj/kn/jrZkoLTcGgEjfxwzvT5+EsCsjeUwW7Vw29UEsTm96GbUkZ8rA85lNPJSrN
YwfY7T5/nJh4xl3VCVGiXHthRal6EzWyzXK6Du7lW/zN2CGu3Si4bn7IJUzD4cxZv7eElA9i
GdzUX9l6LhqjA+OJLiXw4A+NiLmFnGNBN5goP1LsXmsMNkAOorgHzkbSSrjaN810MgRQgt1o
/2rnNmuKNlgdcEq4AqkqZIAc9f5intKFIPxwswkcb9JOdyRmDsyyRuRunhbbkqcBmcQM1UI0
0CQZcLOLBiW/e9luC1wZJboPOO6xTCxQ3CxQJCRofLsgkGR/StechBCx+goK1/7Au1U4Ln9I
JS0BlYXzh9BDiR78FccCUvrFC7RNNe0Z7XkDKZFOXVYJqWfN0Ykw0AYoQfs3+ylunTHK3Y48
1Q0iAT3rbtzVLFFQn1XFPzLE3Aq6nT6LqajxIxpobv/Q+XzX5qu9vYMYR+lhK6MVmO0kjRlu
m35KjuU5G3VRknpu2sQuxYoazOuxMemnJqyKqRRHgqwLkDoo4z61ZzQZ9U6cjJ9Hh0+fToME
efpu5dDTkfLshpfgoYbLNzXJb0WPjMAOYl41ZFIGCmLJNB7tdim+qPyK9kBBwX3PiF4R/LLV
i3GCuTCjTpOh9a5LNDXt9DL6Obnm/YaNkYS6FNe3N1RLdY9+gQNZ2ctNsOBkPNwkmN56MXRH
VlgWGNuyoXiW8zs/2pa36cUhZ7a3t3CLYuWaYL0lPL7mWQvxCjb9wXFNjxFS2MQw0lWMGTnT
e8mp5kSwYALQVCP/gC7FdcPs8aLXBj1CJ9iLduLJO04+0cbHGOxfrDaBq3mMoUVZrqpEO9qY
K4BFBbPC//M5F2YDW1UHtwIW7MmB1UZcT02dkE3Jy8MBhsSkQrWGJAqPtfs=
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."MD1" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
eb1 33b
GSrq1iIGRhaLPXnUcSIZ6dNsnO8wg2Oc1/GMyi/G/opeuEfDQuPO9xrAZpdNDfNW26HXPru1
b5nxKpPNWgOGqDc8+XOY9FCQQY2dk9eh6mxGsszSrRgJxAnICZ8AXm6K7OiJlK5a1ePgxHVT
rUxH68bk7wlx0PLIluiXQD4jSiOV/ErzlVs7gwmalLVdGG3xKJgHWllIUavgUehyE32wUiTP
bu/mQahMWLzya2M979qC9oERYGBUX1UCCnV1BYEVV1uRrAVfQ42881CCbhje4gE9n5EXBw+K
J1zNfEErrp7RoCpMo693/u2U7LH7+9fPwyEfjCT58MGb58mHnG126YEniOpvA3dtCuo0fluZ
tbUUhxXmY7M06DhJvZMKxsniu+rRJ1Wp/rG+WZxDzCjQOZsJKJayXQEch2+F2QA0esjqMDDp
yruP7qThQoAouwSF2kIwsGeHwv40cvhnhwbubDd6/O6zZ4f87mM3NEdq2eFCvgecW5ueKGTO
r96DcNxeXmVPwSYIE+VjCI8VQUO5NG7F/n6MqWKQeR6RwQdl3X9bfkQ5n6Z20KnNRje+edJk
C/Gm3xg3Y6kLObTAdNimdiipzeM3kKkPtlqQG+cEY6nvyHvXfEt2uDYJsFt0iudX4SawEjZW
RIfWidH46por9f2ZsRbAxFtMsDRvnRNvikkQZoCAUUNVoL6WsK9l9rF0SJetOaP/z+2cavyh
Nz0DLk5ADu3NXseketz/DcT2NVnZpFN93J79VE7ffLoYI62gq36Kmo1hQ4FWEUZ+NJhTd6uu
J+gOUgPAiyT8OrEsUpLQMg==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."MD2" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
4f1b 861
U4qY9piZZtX0mV3T76e8a3R4MDgwg81uDCAFYI4CmDNkdWOyBAJyY0EqRQ76LWZGZkwicdX9
eUXNtZqnGmL09UoatkmTGgQ72LNHQ0N48a8oeo9ebs9K6hlz+NC+UyYkO16cIQEpTiOxw7z1
UjI9nW7HrpVFpDvErhntvPFmZPxXZEzauerNXST59VO76MkeaOoyvv/qIE4xw5iqO+x56uk/
2NnoYP7iIGvybUKOkCLOVVVzBaBEuf9Z9piKHgDfQglkbTS6LQwrk0FDsYiHj5vJTo/Zupw4
2s9O4GquyyDidqoB31YBagnfVgEHCXhMJiWxLliYBzIcnAVVuoZkS5cwDfQFvaRoGhmN+bPE
Eo3O/JIwOcSqwd4yuouuXPixXjLHJCI94oeISYEybyAQvf52nPqwU6C6xKOwV6ryc9P9lq2g
vLsStSljSv7w5Ns/D58y9w0KBYakESCdHIZtT7u5uRnJ9ZrsNPrCBUgvu1uu0XhhevGcrrSb
JjTP1KdyQ0OZYc8m0VuEW4ikBHuFfd1QNWBbQMtle3z1yLOIhBdlewt9WWAXdJD6fV9rgoiQ
f/UbjG0ERVpgH3/191/R4H1miEzbUOllReNrbZH1tkBIZowTfPW2iFVGaxOFfRt0VaJgeDh9
G2VFPoR4jbMuiEUmX0iXUC4B9V5ASMWME2X1XohVX2sT+n3JdFVZYHgLfcllRYiEeLez1wRF
WF9I/1DXAfXHQEjRjBOC9ceIVW5rE9l9i3RVcWDEcH1vZUVEhMTIs2IERQJfSK9QYpH1mUBI
qIy6ZfUMiFXxa7qXfad0VQlgxJF9p2VFbITEw7M3MTaRE6YDvYXf+8m2yHnhRxvKBTZ1Lmdh
vXwTqX62cN/7MRvdfuHCLqkxNpETpgO9hd/7ybbIeeFHG8oFNnUuZ2G9fBOpfrZw3/sxG91+
4cIuqTE2kROmA72F3/vJtsh54UcbygU2dS5nYb18E6l+tnDf+zEb3X7hwi6pMTaRE6YDvYXf
+8m2yHnhRxvKBTZ1LmdhvXwTqX62cN/7MRvdfuHCLqkxNpETpgO9hd/7ybbIeeFHG8oFNnUu
Z2G9fBOpfrZw3/sxG91+4cIuqTE2kROmA72F3/vJtsh54UcbygU2dS5nYb18E6l+tnDf+zEb
3X7hwi6pMTaRE6YDvYXfOEcbWWG9C984wi4EA723eRV1LnV+ttR+FZETfMm2GwVGfxN8MRtf
MUb63zhHG1lhvQvfOMIuBAO9t3kVdS51frbUfhWRE3zJthsFRn8TfDEbXzFG+t84RxtZYb0L
3zjCLgQDvbd5FXUudX621H4VkRN8ybYbBUZ/E3wxG18xRvrfOEcbitUTBIs5GUjItQ4Fu2Ny
BoMPmCCd+Lz0CnLWOuqaqxa4D2yecRLcLH3/Q+mtMP5e7BAAhTqihai/uIpDfPX5GpD4/y7M
3JYabOajZhps5qNmGmzmo2YabOajZhps5qNmGmzmo2YabOajZhps5qNmGmzmo2YabOajZhps
5qNmGmzmo2YabOajZhps5qNmGmzmowa196cOeDHqvLTdO8fEoQp5gRL+bgJIhbFDp5parrHN
5AisnxEfnAE0Y/D+eMGYRAf90n4rv2nas8b034rD/Tap8+FyUmHcujlzN4dPnXz/q3bg4byb
qqRBHVLlzlh8l31axOLQGlMitwYza4mxnukG6+jS4jNcQwM/1v/SMvyvduIW6xRk0K6PpXLG
doADJrFYZNE8hbpuH0kBKMZLgE5nrCwv8rQORpD/Sm4+CG6yQQCbbqRtfofChibqoYEBnW1M
d4sd20zirxLE+zdDv0uKP4NVR1ULb2RohLNBDG5b0pxQuxyxliIAmPsAtZYf+JJXsSxg/gd/
+ZRavw/OLuTxjiaSkLVQKGx+HlK6xq6X/N3qHpa7tRIQwesKM1xCZoHOlfwbnCLcv3Ozv81s
aWiH2tsgUoWzAnc//hiLVcvLOeLcflW4LsQdav7XmHITCMHqenOth+vLX21h6qgwJLgtfp1S
aulzi6RbSI7SRosCVLj4huK/k/Ow1gxq887Cc1IoOUgiuMxXe0COXhmBD/HlRbmWJsZzzuX6
/MwM5J60wd4S+n7+nXNbR6cnXA==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO" as


--
-- NAME:
--
-- DESCRIPTION:
--
-- ARGUMENTS:
--
-- RETURNS:
--

function compare (hhcode1 IN RAW, hhcode2 IN RAW, hhcode3 IN RAW:=NULL)
return VARCHAR2;
pragma restrict_references(compare, WNDS, RNDS, WNPS, RNPS);


--
-- NAME:
--
-- DESCRIPTION:
--
-- ARGUMENTS:
--
-- RETURNS:
--

function latlontocode (latitude IN NUMBER, longitude IN NUMBER)
return RAW;
pragma restrict_references(latlontocode, WNDS, RNDS, WNPS, RNPS);


--
-- NAME:
--
-- DESCRIPTION:
--
-- ARGUMENTS:
--
-- RETURNS:
--

function datetodim (dateval IN DATE, component IN BINARY_INTEGER:=0)
return RAW;
pragma restrict_references(datetodim, WNDS, RNDS, WNPS, RNPS);


--
-- NAME:
--
-- DESCRIPTION:
--
-- ARGUMENTS:
--
-- RETURNS:
--

function bvaluetodim (bval IN NUMBER, lbound IN NUMBER, ubound IN NUMBER,
                 precision IN BINARY_INTEGER)
return RAW;
pragma restrict_references(bvaluetodim, WNDS, RNDS, WNPS, RNPS);


--
-- NAME:
--
-- DESCRIPTION:
--
-- ARGUMENTS:
--
-- RETURNS:
--

function hvaluetodim (hval1 IN BINARY_INTEGER, bit_length1 IN BINARY_INTEGER,
                 hval2  IN BINARY_INTEGER:=0, bit_length2  IN BINARY_INTEGER:=0,
                 hval3  IN BINARY_INTEGER:=0, bit_length3  IN BINARY_INTEGER:=0,
                 hval4  IN BINARY_INTEGER:=0, bit_length4  IN BINARY_INTEGER:=0,
                 hval5  IN BINARY_INTEGER:=0, bit_length5  IN BINARY_INTEGER:=0,
                 hval6  IN BINARY_INTEGER:=0, bit_length6  IN BINARY_INTEGER:=0,
                 hval7  IN BINARY_INTEGER:=0, bit_length7  IN BINARY_INTEGER:=0,
                 hval8  IN BINARY_INTEGER:=0, bit_length8  IN BINARY_INTEGER:=0,
                 hval9  IN BINARY_INTEGER:=0, bit_length9  IN BINARY_INTEGER:=0,
                 hval10 IN BINARY_INTEGER:=0, bit_length10 IN BINARY_INTEGER:=0,
                 hval11 IN BINARY_INTEGER:=0, bit_length11 IN BINARY_INTEGER:=0,
                 hval12 IN BINARY_INTEGER:=0, bit_length12 IN BINARY_INTEGER:=0,
                 hval13 IN BINARY_INTEGER:=0, bit_length13 IN BINARY_INTEGER:=0,
                 hval14 IN BINARY_INTEGER:=0, bit_length14 IN BINARY_INTEGER:=0,
                 hval15 IN BINARY_INTEGER:=0, bit_length15 IN BINARY_INTEGER:=0,
                 hval16 IN BINARY_INTEGER:=0, bit_length16 IN BINARY_INTEGER:=0)
return RAW;
pragma restrict_references(hvaluetodim, WNDS, RNDS, WNPS, RNPS);


--
-- NAME:
--
-- DESCRIPTION:
--
-- ARGUMENTS:
--
-- RETURNS:
--

function encode (dimension1  IN RAW,       dimension2  IN RAW:=NULL,
                 dimension3  IN RAW:=NULL, dimension4  IN RAW:=NULL,
                 dimension5  IN RAW:=NULL, dimension6  IN RAW:=NULL,
                 dimension7  IN RAW:=NULL, dimension8  IN RAW:=NULL,
                 dimension9  IN RAW:=NULL, dimension10 IN RAW:=NULL,
                 dimension11 IN RAW:=NULL, dimension12 IN RAW:=NULL,
                 dimension13 IN RAW:=NULL, dimension14 IN RAW:=NULL,
                 dimension15 IN RAW:=NULL, dimension16 IN RAW:=NULL,
                 dimension17 IN RAW:=NULL, dimension18 IN RAW:=NULL,
                 dimension19 IN RAW:=NULL, dimension20 IN RAW:=NULL,
                 dimension21 IN RAW:=NULL, dimension22 IN RAW:=NULL,
                 dimension23 IN RAW:=NULL, dimension24 IN RAW:=NULL,
                 dimension25 IN RAW:=NULL, dimension26 IN RAW:=NULL,
                 dimension27 IN RAW:=NULL, dimension28 IN RAW:=NULL,
                 dimension29 IN RAW:=NULL, dimension30 IN RAW:=NULL,
                 dimension31 IN RAW:=NULL, dimension32 IN RAW:=NULL)
return RAW;
pragma restrict_references(encode, WNDS, RNDS, WNPS, RNPS);


--
-- NAME:
--
-- DESCRIPTION:
--
-- ARGUMENTS:
--
-- RETURNS:
--

function decode (hhcode IN RAW, dimension_num IN BINARY_INTEGER)
return RAW;
pragma restrict_references(decode, WNDS, RNDS, WNPS, RNPS);


--
-- NAME:
--
-- DESCRIPTION:
--
-- ARGUMENTS:
--
-- RETURNS:
--

function to_lat (dimension IN RAW)
return NUMBER;
pragma restrict_references(to_lat, WNDS, RNDS, WNPS, RNPS);


--
-- NAME:
--
-- DESCRIPTION:
--
-- ARGUMENTS:
--
-- RETURNS:
--

function to_lon (dimension IN RAW)
return  NUMBER;
pragma restrict_references(to_lon, WNDS, RNDS, WNPS, RNPS);


--
-- NAME:
--
-- DESCRIPTION:
--
-- ARGUMENTS:
--
-- RETURNS:
--

function to_date (dimension IN RAW)
return DATE;
pragma restrict_references(to_date, WNDS, RNDS, WNPS, RNPS);


--
-- NAME:
--
-- DESCRIPTION:
--
-- ARGUMENTS:
--
-- RETURNS:
--

function to_bvalue (dimension IN RAW, lbound IN NUMBER, ubound IN NUMBER)
return NUMBER;
pragma restrict_references(to_bvalue, WNDS, RNDS, WNPS, RNPS);


--
-- NAME:
--
-- DESCRIPTION:
--
-- ARGUMENTS:
--
-- RETURNS:
--

function to_hvalue (dimension IN RAW, bit_position IN BINARY_INTEGER,
                                      bit_length   IN BINARY_INTEGER)
return NUMBER;
pragma restrict_references(to_hvalue, WNDS, RNDS, WNPS, RNPS);


end SDO;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_ADMIN" authid current_user as


-- NAME:
--    sdo_version - Return version number as a string
--
function sdo_version return varchar2;
pragma restrict_references(sdo_version,rnds,wnds,rnps,wnps);

function sdo_code_size ( layer varchar2 ) return binary_integer;
pragma restrict_references(sdo_code_size,wnds,rnps,wnps);

--
--  NAME:
--     populate_index - tesselate all geometric objects in a geometry table
--  DESCRIPTION:
--     This procedure creates a maximum number of tiles to cover every geometric
--     object in the geometry table (LAYER_sdogeom).  If the synch_flag is
--     TRUE only the geometric objects which do not already have corresponding
--     entries in the spatial index table (LAYER_sdoindex) are processed.
--  NOTES:
--     The behaviour of the POPULATE_INDEX( layer IN VARCHAR2 ) function is
--     determined by the values for the SDO_LEVEL and SDO_NUMTILES columns
--     in the <layer>_SDOLAYER table.  The behaviour is described in the
--     following table:
--
--     VALUE OF SDO_LEVEL   VALUE OF SDO_NUMTILES   BEHAVIOUR
--     ------------------   ---------------------   ------------------------
--           NULL                 NULL              Error (use 7.3.3)
--           NULL               NOT NULL            Variable Tessellation
--         NOT NULL               NULL              Fixed Tessellation
--         NOT NULL             NOT NULL            Hybrid Tessellation
--  ARGUMENTS:
--     layer         - geometry table name (LAYER_sdogeom) and spatial
--                     index table name (LAYER_sdoindex) input argument
--     gid           - Geometry IDentifier input argument
--     maxtiles      -  MAXimum number of TILES to generate input argument
--     synch_flag    - tesselate only geometric objects having no corresponding
--                     entries in the spatial index table if TRUE
--                     (default value is TRUE)
--     sdo_tile_flag - INTERNAL PARAMETER; DO NOT MODIFY
--
procedure populate_index ( layer IN VARCHAR2 );

procedure populate_index (layer IN VARCHAR2, maxtiles IN INTEGER,
                          synch_flag IN BOOLEAN := TRUE,
                          sdo_tile_flag IN BOOLEAN := FALSE );

procedure populate_index_fixed (layer IN VARCHAR2, tile_size IN INTEGER,
                                synch_flag IN BOOLEAN := TRUE,
                                sdo_tile_flag IN BOOLEAN := FALSE,
                                sdo_maxcode_flag IN BOOLEAN := TRUE );

--
--  NAME:
--     update_index - tesselate a single geometric object
--  DESCRIPTION:
--     This procedure creates a maximum number of tiles to cover a geometric
--     object in the geometry table (LAYER_sdogeom).  If the replace_flag is
--     TRUE then any existing tiles for the specified object are first
--     removed from the index table (LAYER_sdoindex).
--  NOTES:
--     The behaviour of the POPULATE_INDEX( layer IN VARCHAR2 ) function is
--     determined by the values for the SDO_LEVEL and SDO_NUMTILES columns
--     in the <layer>_SDOLAYER table.  The behaviour is described in the
--     following table:
--
--     VALUE OF SDO_LEVEL   VALUE OF SDO_NUMTILES   BEHAVIOUR
--     ------------------   ---------------------   ------------------------
--           NULL                 NULL              Error (use 7.3.3)
--           NULL               NOT NULL            Variable Tessellation
--         NOT NULL               NULL              Fixed Tessellation
--         NOT NULL             NOT NULL            Hybrid Tessellation
--  ARGUMENTS:
--     layer        - geometry table name (LAYER_sdogeom) and
--                    index table name (LAYER_sdoindex) input argument
--     gid          - Geometry IDentifier input argument
--     maxtiles     - MAXimum number of TILES to generate input argument
--     replace_flag - REPLACE existing tiles in LAYER_sdoindex if TRUE
--                    (default value is TRUE)
--     sdo_tile_flag - INTERNAL PARAMETER; DO NOT MODIFY
--
procedure update_index (layer varchar2, gid number);

procedure update_index (layer IN VARCHAR2, gid IN NUMBER, maxtiles IN INTEGER,
                        replace_flag IN BOOLEAN := TRUE,
                        sdo_tile_flag IN BOOLEAN := FALSE);

procedure update_index_fixed (layer IN VARCHAR2, gid IN NUMBER,
                              tile_size IN INTEGER,
                              replace_flag IN BOOLEAN := TRUE,
                              sdo_tile_flag IN BOOLEAN := FALSE,
                              sdo_maxcode_flag IN BOOLEAN := TRUE );

--
--  NAME:
--     change_index_parameters - modify parameters in <layer>_SDOLAYER table
--  DESCRIPTION:
--     This function allows the user to modify the values of the SDO_LEVEL and
--     SDO_NUMTILES columns AND also takes the appropriate action to synchron-
--     ize the index according to the following rules:
--
--     VALUE OF LEVEL   VALUE OF MXTILES   BEHAVIOUR
--     --------------   ----------------   ---------------------------------
--          NULL             NULL          Do nothing.
--
--          NULL           NOT NULL        Call POPULATE_INDEX().  _SDOINDEX
--                                         table must be empty.
--        NOT NULL           NULL          Use UPDATE statement to update
--                                         SDO_GROUPCODE column.
--        NOT NULL         NOT NULL        Call POPULATE_INDEX(). _SDOINDEX
--                                         table must be empty.
--  ARGUMENTS:
--     layer        - name of LAYER to modify
--     sdo_level    - new value for SDO_LEVEL column
--     sdo_numtiles - new value for SDO_NUMTILES column
--
procedure change_index_parameters( layer varchar2,
                                   sdo_level number,
                                   sdo_numtiles number );

  --------------------------------------------------------------------------------
  --
  -- Description:
  --
  --   This routine is ONLY for creating fixed tiles for point data.
  --   All rows with SDO_CODE is NULL will be tiled.
  --   This routine will perform a database commit.
  --
  --   The <layer>_sdolayer table must be populated before this routine is called.
  --   The <layer>_sdodim table must be populated before this routine is called.
  --   The <layer>_sdogeom table must be populated before this routine is called.
  --   The <layer>_sdogeom table must contain the SDO_CODE column.
  --   The <layer>_sdogeom table can optionally contain the SDO_TILE column.
  --
  -- Parameters:
  --                layer         - The layer to tile
  --                sdo_tile_flag - If TRUE, will generate the sdo_tile column.
  --                                Default is FALSE.
  --                commit_cnt     - Routine updates in increments of commit_cnt,
  --                                 and commits each increment.
  --
  --------------------------------------------------------------------------------
  PROCEDURE populate_index_fixed_points (layer         varchar2,
                                         sdo_tile_flag boolean := FALSE,
                                         commit_cnt    number := 50);

  --------------------------------------------------------------------------------
  --
  -- Description:
  --
  --   This routine is ONLY for creating fixed tiles for point data.
  --   Set SDO_CODE column to NULL for all rows in layer.
  --   This routine will performe a database commit.
  --
  --   The <layer>_sdogeom table must contain the SDO_CODE column.
  --
  -- Parameters:
  --                layer - The layer to tile
  --                commit_cnt - Routine updates in increments of commit_cnt,
  --                             and commits each increment.
  --
  --------------------------------------------------------------------------------
  PROCEDURE set_code_null (layer         varchar2,
                           commit_cnt    number := 50);



end SDO_ADMIN;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_TUNE" AUTHID current_user AS

------------------------------------------------------------------------------
-- Purpose
--   This function can be used to determine which level to use when indexing
--   a layer using the fixed tile method. The level you choose to tile a
--   layer is a major factor in query performance. If you choose to use a
--   very small tile size then many tiles are generated for a large
--   area-of-interest. If you choose a very large tile size then the primary
--   filter will return too many candidate rows, and is less effective.
--
-- Syntax
--   ESTIMATE_TILING_LEVEL (layer, maxtiles, type_of_estimate)
--
-- Keywords and Parameters
--   layer             is the name of the spatial layer for which the tile
--                     level is to be determined. Datatype is VARCHAR2.
--   maxtiles          is the maximum number of valid tiles that can be used
--                     to index the type_of_estimate object defined below.
--                     Datatype is INTEGER.
--   type_of_estimate  There are three different type_of_estimate objects
--                     that can be defined:
--     LAYER_EXTENT    defines the type_of_estimate object to be the rectangle
--                     defined by the users coordinate system.
--     ALL_GID_EXTNET  defines the type_of_estimate object to be the rectangle
--                     that defines the bounds of all the SDO_GID's of a layer.
--     AVG_GID_EXTENT  defines the type_of_estimate object to be the rectangle
--                     that represents the average individual geometry bounding
--                     box. The average bounding box is determined by sampling
--                     every geometry in the specified layer. Datatype is
--                     VARCHAR2.
--
-- Returns
--   This function returns an integer representing the level used to index the
--   specified layer.
--
--   0 is returned if the data is inconsistent:
--   e.g. _sdodim does not match _sdogeom table.
--   This needs to be fixed by adding more error checking in future versions.
--
-- Usage Notes
--   Using the AVG_GID_EXTENT performs the most analysis of the three types.
--
/* DEPRECATED
  FUNCTION estimate_tiling_level (layer            VARCHAR2,
                                  num_tiles        INTEGER,
                                  type_of_estimate VARCHAR2 := 'ALL_GID_EXTENT')
  RETURN INTEGER;
*/


------------------------------------------------------------------------------
-- Purpose
--   This procedure caclulates the extents of a layer by keeping track of the
--   max and min x and y values for all geometries in the layer. These numbers
--   also gives the MBR (minimal bounding rectangle) of all the geometries.
--
-- Syntax
--   EXTENT_OF (layer, min_x, max_x, min_y, max_y)
--
-- Keywords and Paramters
--   layer   is the name of the spatial layer for which the extent is to
--           be determined. Datatype is VARCHAR2.
--   min_x   smallest x value for all geometries. Datatype is out number.
--   max_x   largest x value for all geometries. Datatype is out number.
--   min_y   smallest y value for all geometries. Datatype is out number.
--   max_y   largest y value for all geometries. Datatype is out number.
--

  PROCEDURE extent_of (layer       VARCHAR2,
                       min_x       OUT NUMBER,
                       max_x       OUT NUMBER,
                       min_y       OUT NUMBER,
                       max_y       OUT NUMBER);


------------------------------------------------------------------------------
-- Purpose
--   This procedure caclulates the average MBR (minimal bounding rectangle)
--   for a layer by keeping track of the max and min x and y values for all
--   geometries in the layer.
--
-- Syntax
--   AVERAGE_MBR (layer, width, height)
--
-- Keywords and Paramters
--   layer   is the name of the spatial layer for which the average MBR is to
--           be determined. Datatype is VARCHAR2.
--   width   width of the average MBR. Datatype is out number.
--   height  height of the average MBR. Datatype is out number.
--

  PROCEDURE average_mbr (layer      VARCHAR2,
                         width      OUT NUMBER,
                         height     OUT NUMBER);


------------------------------------------------------------------------------
-- Purpose
--   This procedure caclulates statistical histograms for a spatial layer.
--   Information from such histograms could be helpful to determine proper
--   spatial index type (fixed, variable, or hybrid) and index parameters
--   for the layer.
--
-- Syntax
--   HISTOGRAM_ANALYSIS (layer, result_table, type_of_histogram,
--                       max_value, intervals)
--
-- Keywords and Paramters
--   layer               the name of the spatial layer for which the histogram
--                       is to be computed. Datatype is VARCHAR2.
--   result_table        result table name where the histogram is stored. User
--                       must create this table before this procedure is
--                       called. This table contains two columnsof type
--                       NUMBER: 'value' and 'count'. For an example,
--                       CREATE TABLE histogram (value NUMBER, count NUMBER);
--   type_of_histogram   There are three types of histograms:
--     TILES_VS_LEVEL    Number of tiles at different spatial index level.
--                       This histogram is used to evaluate the spatial index
--                       that is already built on the layer.
--     GEOMS_VS_TILES    Number of geometries in different #tiles range.
--                       This histogram is used to evaluate the spatial index
--                       that is already built on the layer.
--     GEOMS_VS_AREA     Number of geometries in different size range. The
--                       shape of this histogram could be hepful for users
--                       to choose a proper index type and index level.
--     GEOMS_VS_VERTICES A histogram of geometry count vs the number of
--                       vertices (complexity) could tell users if spatial
--                       index selectivity is important for the layer. Since
--                       the number of vertices determine the performance of
--                       secondary filter (RELATE), selectivity of the primary
--                       filter could be crucial for layer that contains many
--                       complicated geometries.
--   max_value           The upper limit of the histogram. i.e. The histogram
--                       runs in range (0, max_value).
--   intervals           Number of intervals between 0 and max_value.
--
/* DEPRECATED
  PROCEDURE histogram_analysis (layer              VARCHAR2,
                                result_table       VARCHAR2,
                                type_of_histogram  VARCHAR2 := 'TILES_VS_LEVEL',
                                max_value          NUMBER,
                                intervals          INTEGER);
*/


------------------------------------------------------------------------------
-- Purpose
--   This procedure caclulates geometry type information for the layer. It
--   outputs the number of geometries of different type, as well as the
--   percentages of points, linestrings, polygons, and complex geometries.
--
-- Syntax
--   MIX_INFO (layer, total_geom, point_geom, line_geom, poly_geom,
--             complex_geom)
--
-- Keywords and Paramters
--   layer        the name of the spatial layer for which the geometry type
--                information is to be calculated. Datatype is VARCHAR2.
--   total_geom   the total number of geometries. Datatype is OUT NUMBER.
--   point_geom   the number of point geometries. Datatype is OUT NUMBER.
--   line_geom    the number of linestring geometries. Datatype is OUT NUMBER.
--   poly_geom    the number of polygon geometries. Datatype is OUT NUMBER.
--   complex_geom the number of complex geometries. Datatype is OUT NUMBER.
--

  PROCEDURE mix_info (layer         VARCHAR2,
                      total_geom    OUT INTEGER,
                      point_geom    OUT INTEGER,
                      line_geom     OUT INTEGER,
                      poly_geom     OUT INTEGER,
                      complex_geom  OUT INTEGER);


------------------------------------------------------------------------------
-- Purpose
--   This procedure caclulates geometry type information for the layer. It
--   prints out the number of geometries of different type, as well as the
--   percentages of points, linestrings, polygons, and complex geometries.
--
-- Syntax
--   MIX_INFO (layer)
--
-- Keywords and Paramters
--   layer     the name of the spatial layer for which the geometry type
--             information is to be calculated. Datatype is VARCHAR2.
--

  PROCEDURE mix_info (layer     VARCHAR2);


------------------------------------------------------------------------------
-- Purpose
--   This function estimates tiling time for a layer. The estimate is based
--   on the tiling time of a small sample layer that is automatically
--   generated from the original layer. User must have create-table privilege
--   to call this function. The sample layer will be cleaned up before this
--   funtion exits.
--
-- Syntax
--   ESTIMATE_TILING_TIME (layer, sample_ratio, tiling_level, num_tiles)
--
-- Keywords and Paramters
--   layer         the name of the spatial layer for which the tiling time is
--                 to be estimated. Datatype is VARCHAR2.
--   sample_ratio  The size ratio between the original layer and the sample
--                 layer (to be generated). Larger ratio means faster but
--                 less accurate estimation. Datatype is INTEGER.
--   tiling_level  The spatial index level at which the layer is to be
--                 tessellated. Datatype is INTEGER.
--   num_tiles     The number of tiles for variable or hybrid tessellation.
--                 Should be NULL for fixed tessellation. Datatype is INTEGER.
--
-- Returns
--   This function returns a number representing estimated tiling time in
--   seconds, or 0 is returned on error.
--
/* DEPRECATED
  FUNCTION estimate_tiling_time (layer          VARCHAR2,
                                 sample_ratio   INTEGER := 20,
                                 tiling_level   INTEGER,
                                 num_tiles      INTEGER := NULL)
  RETURN NUMBER;
*/


------------------------------------------------------------------------------
-- Purpose
--   This function estimates the total number of spatial tiles for a layer.
--   The estimate is based on the total number of tiles for a small sample
--   layer that is automatically generated from the original layer. User
--   must have create-table privilege to call this function. The sample
--   layer will be cleaned up before this funtion exits.
--
-- Syntax
--   ESTIMATE_TOTAL_NUMTILES (layer, sample_ratio, tiling_level, num_tiles,
--                            num_largetiles)
--
-- Keywords and Paramters
--   layer           the name of the spatial layer for which the tiling time
--                   is to be estimated. Datatype is VARCHAR2.
--   sample_ratio    The size ratio between the original layer and the sample
--                   layer (to be generated). Larger ratio means faster but
--                   less accurate estimation. Datatype is INTEGER.
--   tiling_level    The spatial index level at which the layer is to be
--                   tessellated. Datatype is INTEGER.
--   num_tiles       The number of tiles for variable or hybrid tessellation.
--                   Should be NULL for fixed tessellation. Datatype is
--                   INTEGER.
--   num_largetiles  An output parameter indicating how many spatial tiles
--                   are of the same size as group tiles for hybrid indexing.
--                   For fixed indexing, this value should always be the same
--                   as the returned value (total number of spatial tiles).
--                   Datatype is OUT INTEGER.
--
-- Returns
--   This function returns an integer representing estimated total number of
--   spatial tiles, or 0 is returned on error.
--
/* DEPRECATED
  FUNCTION estimate_total_numtiles (layer           VARCHAR2,
                                    sample_ratio    INTEGER := 20,
                                    tiling_level    INTEGER,
                                    num_tiles       INTEGER := NULL,
                                    num_largetiles  OUT INTEGER)
  RETURN INTEGER;
*/


------------------------------------------------------------------------------
-- Purpose
--   This function estimates spatial index performance such as query
--   selectivity and window query time for a layer. The estimate is based
--   on the window query time of a small sample layer that is automatically
--   generated from the original layer. User must have create-table privilege
--   to call this function. The sample layer will be cleaned up before this
--   funtion exits.
--
-- Syntax
--   ESTIMATE_INDEX_PERFORMANCE (layer, sample_ratio, tiling_level, num_tiles,
--                               window_layer, window_gid, tiling_time,
--                               filter_time, query_time)
--
-- Keywords and Paramters
--   layer         the name of the spatial layer for which the tiling time is
--                 to be estimated. Datatype is VARCHAR2.
--   sample_ratio  The size ratio between the original layer and the sample
--                 layer (to be generated). Larger ratio means faster but
--                 less accurate estimation. Datatype is INTEGER.
--   tiling_level  The spatial index level at which the layer is to be
--                 tessellated. Datatype is INTEGER.
--   num_tiles     The number of tiles for variable or hybrid tessellation.
--                 Should be NULL for fixed tessellation. Datatype is INTEGER.
--   window_layer  The name of the spatial layer in which window geometry is
--                 stored. Datatype is VARCHAR2.
--   window_gid    The window geometry ID. Datatype is NUMBER.
--   tiling_time   The estimated tiling time in seconds. Datatype is OUT
--                 NUMBER.
--   filter_time   The estimated spatial index filter time in seconds.
--                 Datatype is OUT NUMBER.
--   query_time    The estimated window query time in seconds. Datatype is
--                 OUT NUMBER.
--
-- Returns
--   This function returns a number between 0.0 and 1.0 representing estimated
--   spatial index selectivity (large number means better selectivity, and 0.0
--   implies an error).
--
/*  DEPRECATED
  FUNCTION estimate_index_performance (layer          VARCHAR2,
                                       sample_ratio   INTEGER := 20,
                                       tiling_level   INTEGER,
                                       num_tiles      INTEGER := NULL,
                                       window_layer   VARCHAR2,
                                       window_gid     NUMBER,
                                       tiling_time    OUT NUMBER,
                                       filter_time    OUT NUMBER,
                                       query_time     OUT NUMBER)
  RETURN NUMBER;
*/


--==========================================================================--
-- For object schema:
--==========================================================================--

------------------------------------------------------------------------------
-- Purpose
--   This procedure estimates which level to use when indexing geometry
--   objects using the fixed tile method.
--
-- Syntax
--   ESTIMATE_TILING_LEVEL (table_name, column_name, maxtiles,
--                          type_of_estimate)
--
-- Keywords and Parameters
--   table_name        is the name of the geometry object table. Datatype is
--                     VARCHAR2.
--   column_name       is the name of the geometry object column for which the
--                     tile level is to be determined. Datatype is VARCHAR2.
--   maxtiles          is the maximum number of valid tiles that can be used
--                     to index the type_of_estimate object defined below.
--                     Datatype is INTEGER.
--   type_of_estimate  There are three different type_of_estimate objects
--                     that can be defined:
--     LAYER_EXTENT    defines the type_of_estimate object to be the rectangle
--                     defined by the users coordinate system.
--     ALL_GID_EXTNET  defines the type_of_estimate object to be the rectangle
--                     that defines the bounds of all the SDO_GID's of a layer.
--     AVG_GID_EXTENT  defines the type_of_estimate object to be the rectangle
--                     that represents the average individual geometry bounding
--                     box. The average bounding box is determined by sampling
--                     every geometry in the specified layer. Datatype is
--                     VARCHAR2.
--
-- Returns
--   This function returns an integer representing the level used to index the
--   specified layer.
--
--   0 is returned if the data is inconsistent:
--   e.g. invalid combination of table name and column name.
--   This needs to be fixed by adding more error checking in future versions.
-- Usage Notes
--   Using the AVG_GID_EXTENT performs the most analysis of the three types.
--
/* DEPRECATED
  FUNCTION estimate_tiling_level(table_name       VARCHAR2,
                                 column_name      VARCHAR2,
                                 num_tiles        INTEGER,
                                 type_of_estimate VARCHAR2 := 'AVG_GID_EXTENT')
  RETURN INTEGER;
*/


------------------------------------------------------------------------------
-- Purpose
--   This procedure caclulates the extents (known as Minimal Bounding
--   Rectangle, or MBR) of all geometry objects in the specified table column.
--
-- Syntax
--   EXTENT_OF (table_name, column_name)
--
-- Keywords and Paramters
--   table_name   is the name of the geometry object table. Datatype is
--                VARCHAR2.
--   column_name  is the name of the geometry object column for which the
--                extent is to be determined. Datatype is VARCHAR2.
--
-- Returns
--   This function returns a geometry object representing extent (MBR) of the
--   specified geometry object column.
--
--   NULL is returned if the data is inconsistent:
--   e.g. invalid combination of table name and column name.
--   This needs to be fixed by adding more error checking in future versions.
--

  FUNCTION extent_of(table_name      VARCHAR2,
                     column_name     VARCHAR2,
                     use_index       VARCHAR2 default 'TRUE')
  RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


------------------------------------------------------------------------------
-- Purpose
--   This procedure caclulates the average MBR (minimal bounding rectangle)
--   for a geometry object column by keeping track of the max and min x and y
--   values for all geometry objects in the column.
--
-- Syntax
--   AVERAGE_MBR (table_name, column_name, width, height)
--
-- Keywords and Paramters
--   table_name   the name of the geometry object table. Datatype is VARCHAR2.
--   column_name  the name of the geometry object column for which the
--                average MBR is to be calculated. Datatype is VARCHAR2.
--   width        width of the average MBR. Datatype is OUT NUMBER.
--   height       height of the average MBR. Datatype is OUT NUMBER.
--

  PROCEDURE average_mbr (table_name      VARCHAR2,
                         column_name     VARCHAR2,
                         width           OUT NUMBER,
                         height          OUT NUMBER);


------------------------------------------------------------------------------
-- Purpose
--   This procedure caclulates statistical histograms for a geometry object
--   column. Information from such histograms could be helpful to determine
--   proper spatial index type (fixed, variable, or hybrid) and index
--   parameters for the geometry column.
--
-- Syntax
--   HISTOGRAM_ANALYSIS (table_name, column_name, result_table,
--                       type_of_histogram, max_value, intervals)
--
-- Keywords and Paramters
--   table_name          the name of the geometry object table.
--   column_name         the name of the geometry object column for which the
--                       histogram is to be computed.
--   result_table        result table name where the histogram is stored. User
--                       must create this table before this procedure is
--                       called. This table contains two columnsof type
--                       NUMBER: 'value' and 'count'. For an example,
--                       CREATE TABLE histogram (value NUMBER, count NUMBER);
--   type_of_histogram   There are three types of histograms:
--     TILES_VS_LEVEL    Number of tiles at different spatial index level.
--                       This histogram is used to evaluate the spatial index
--                       that is already built on the geometry column.
--     GEOMS_VS_TILES    Number of geometries in different #tiles range.
--                       This histogram is used to evaluate the spatial index
--                       that is already built on the geometry column.
--     GEOMS_VS_AREA     Number of geometries in different size range. The
--                       shape of this histogram could be hepful for users
--                       to choose a proper index type and index level.
--     GEOMS_VS_VERTICES A histogram of geometry count vs the number of
--                       vertices (complexity) could tell users if spatial
--                       index selectivity is important for the column. Since
--                       the number of vertices determine the performance of
--                       secondary filter (RELATE), selectivity of the primary
--                       filter could be crucial for geometry column that
--                       contains many complicated geometries.
--   max_value           The upper limit of the histogram. i.e. The histogram
--                       runs in range (0, max_value).
--   intervals           Number of intervals between 0 and max_value.
--
/* DEPRECATED
  PROCEDURE histogram_analysis (table_name         VARCHAR2,
                                column_name        VARCHAR2,
                                result_table       VARCHAR2,
                                type_of_histogram  VARCHAR2 := 'TILES_VS_LEVEL',
                                max_value          NUMBER,
                                intervals          INTEGER);
*/


------------------------------------------------------------------------------
-- Purpose
--   This procedure caclulates geometry type information for the geometry
--   object column. It outputs the number of geometries of different type,
--   as well as the percentages for various geometry types.
--
-- Syntax
--   MIX_INFO (table_name, column_name, total_geom, point_geom, curve_geom,
--             poly_geom, complex_geom)
--
-- Keywords and Paramters
--   table_name   the name of the geometry object table. Datatype is VARCHAR2.
--   column_name  the name of the geometry object column for which the
--                geometry type infomation is to be calculated. Datatype is
--                VARCHAR2.
--   total_geom   the total number of geometries. Datatype is OUT NUMBER.
--   point_geom   the number of point geometries. Datatype is OUT NUMBER.
--   curve_geom   the number of curvestring geometries. Datatype is OUT NUMBER.
--   poly_geom    the number of polygon geometries. Datatype is OUT NUMBER.
--   complex_geom the number of complex geometries. Datatype is OUT NUMBER.
--

  PROCEDURE mix_info (table_name    VARCHAR2,
                      column_name   VARCHAR2,
                      total_geom    OUT INTEGER,
                      point_geom    OUT INTEGER,
                      curve_geom    OUT INTEGER,
                      poly_geom     OUT INTEGER,
                      complex_geom  OUT INTEGER);


------------------------------------------------------------------------------
-- Purpose
--   This procedure caclulates geometry type information for the geometry
--   object column. It prints out the number of geometries of different type,
--   as well as the percentages for various geometry types.
--
-- Syntax
--   MIX_INFO (table_name, column_name)
--
-- Keywords and Paramters
--   table_name   the name of the geometry object table. Datatype is VARCHAR2.
--   column_name  the name of the geometry object column for which the
--                geometry type infomation is to be calculated. Datatype is
--                VARCHAR2.
--

  PROCEDURE mix_info (table_name      VARCHAR2,
                      column_name     VARCHAR2);


------------------------------------------------------------------------------
-- Purpose
--   This function estimates tiling time for a geometry column. The estimate
--   is based on the tiling time of a small sample geometry table that is
--   automatically generated from the original table column. User must have
--   create-table privilege to call this function. The sample table will be
--   cleaned up before this funtion exits.
--
-- Syntax
--   ESTIMATE_TILING_TIME (table_name, column_name, sample_ratio,
--                         tiling_level, num_tiles)
--
-- Keywords and Paramters
--   table_name    The name of the geometry object table. Datatype is VARCHAR2.
--   column_name   The name of the geometry object column for which the
--                 tiling time is to be estimated. Datatype is VARCHAR2.
--   sample_ratio  The size ratio between the original table and the sample
--                 table (to be generated). Larger ratio means faster but
--                 less accurate estimation. Datatype is INTEGER.
--   tiling_level  The spatial index level at which the geometry column is to
--                 be tessellated. Datatype is INTEGER.
--   num_tiles     The number of tiles for variable or hybrid tessellation.
--                 Should be 0 for fixed tessellation. Datatype is INTEGER.
--
-- Returns
--   This function returns a number representing estimated tiling time in
--   seconds, or 0 is returned on error.
--
/* DEPRECATING
  FUNCTION estimate_tiling_time (table_name      VARCHAR2,
                                 column_name     VARCHAR2,
                                 sample_ratio    INTEGER := 20,
                                 tiling_level    INTEGER,
                                 num_tiles       INTEGER := 0)
  RETURN NUMBER;
*/


------------------------------------------------------------------------------
-- Purpose
--   This function estimates the total number of spatial tiles for a geometry
--   column. The estimate is based on the total number of tiles for a small
--   sample geometry table that is automatically generated from the original
--   table column. User must have create-table privilege to call this
--   function. The sample table will be cleaned up before this funtion exits.
--
-- Syntax
--   ESTIMATE_TOTAL_NUMTILES (table_name, column_name, sample_ratio,
--                            tiling_level, num_tiles, num_largetiles)
--
-- Keywords and Paramters
--   table_name      The name of the geometry object table. Datatype is
--                   VARCHAR2.
--   column_name     The name of the geometry object column for which the
--                   tiling time is to be estimated. Datatype is VARCHAR2.
--   sample_ratio    The size ratio between the original layer and the sample
--                   layer (to be generated). Larger ratio means faster but
--                   less accurate estimation. Datatype is INTEGER.
--   tiling_level    The spatial index level at which the layer is to be
--                   tessellated. Datatype is INTEGER.
--   num_tiles       The number of tiles for variable or hybrid tessellation.
--                   Should be 0 for fixed tessellation. Datatype is INTEGER.
--   num_largetiles  An output parameter indicating how many spatial tiles
--                   are of the same size as group tiles for hybrid indexing.
--                   For fixed indexing, this value should always be the same
--                   as the returned value (total number of spatial tiles).
--                   Datatype is OUT INTEGER.
--
-- Returns
--   This function returns an integer representing estimated total number of
--   spatial tiles, or 0 is returned on error.
--
/* DEPRECATED
  FUNCTION estimate_total_numtiles (table_name      VARCHAR2,
                                    column_name     VARCHAR2,
                                    sample_ratio    INTEGER := 20,
                                    tiling_level    INTEGER,
                                    num_tiles       INTEGER := 0,
                                    num_largetiles  OUT INTEGER)
  RETURN INTEGER;
*/

------------------------------------------------------------------------------
-- Purpose
--   This function estimates spatial index performance such as query
--   selectivity and window query time for a geometry column. The estimate
--   is based on the window query time of a small sample geometry table that
--   is automatically generated from the original table column. User must
--   have create-table privilege to call this function. The sample table will
--   be cleaned up before this funtion exits.
--
-- Syntax
--   ESTIMATE_INDEX_PERFORMANCE (table_name, column_name, sample_ratio,
--                               tiling_level, num_tiles, window_obj,
--                               tiling_time, filter_time, query_time)
--
-- Keywords and Paramters
--   table_name    The name of the geometry object table. Datatype is VARCHAR2.
--   column_name   The name of the geometry object column for which the
--                 tiling time is to be estimated. Datatype is VARCHAR2.
--   sample_ratio  The size ratio between the original table and the sample
--                 table (to be generated). Larger ratio means faster but
--                 less accurate estimation. Datatype is INTEGER.
--   tiling_level  The spatial index level at which the geometry column is to
--                 be tessellated. Datatype is INTEGER.
--   num_tiles     The number of tiles for variable or hybrid tessellation.
--                 Should be 0 for fixed tessellation. Datatype is INTEGER.
--   window_obj    The window geometry object. Datatype is MDSYS.SDO_GEOMETRY.
--   tiling_time   The estimated tiling time in seconds. Datatype is OUT
--                 NUMBER.
--   filter_time   The estimated spatial index filter time in seconds.
--                 Datatype is OUT NUMBER.
--   query_time    The estimated window query time in seconds. Datatype is
--                 OUT NUMBER.
--
-- Returns
--   This function returns a number between 0.0 and 1.0 representing estimated
--   spatial index selectivity (large number means better selectivity, and 0.0
--   implies an error).
--
/* DEPRECATED
  FUNCTION estimate_index_performance (table_name      VARCHAR2,
                                       column_name     VARCHAR2,
                                       sample_ratio    INTEGER := 20,
                                       tiling_level    INTEGER,
                                       num_tiles       INTEGER := 0,
                                       window_obj      MDSYS.SDO_GEOMETRY,
                                       tiling_time     OUT NUMBER,
                                       filter_time     OUT NUMBER,
                                       query_time      OUT NUMBER)
  RETURN NUMBER;
*/

------------------------------------------------------------------------------
-- Purpose
--   This function estimates the quality_degradation of an R-tree index.
--   This computes the ratio of the current quality and the quality
--   at the time when the R-tree is last built/rebuilt.
--   This number gives an estimate of how much the query performance
--   degrades (i.e., how slow queries become) in comparison to
--   queries at index creation time. The quality could have
--   degraded due to updates between tree-creation time and
--   current time.
--
--   The quality of an R-tree is estimated as the ratio of the
--   sum of the areas of all index_level mbrs to the ((sum of the  area
--   of all mbrs at leaf level, i.e., data mbrs) times the height
--   of the tree.
--
-- Syntax
--   QUALITY_DEGRADATAION(schema_name, index_name, index_table_name)
--
-- Keywords and Paramters
--   schema_name   The name of the user's schema. Datatype is VARCHAR2.
--   index_name    The name of the index to be analyzed. Datatype is VARCHAR2.
--   index_table   The name of the R-tree index table. The R-tree can
--                 be either a primary or a secondary index for
--                 the specified index_name. Datatype is VARCHAR2.
--
-- Returns
--   This function returns a number that represents the degradation
--   factor (small number close to 1 means index is very efficient;
--   large numbers may mean index-quality has degraded; rebuilding
--   the index may improve the quality

  FUNCTION quality_degradation(schemaname varchar2,
                               indexname varchar2,
                               indextable varchar2)
  RETURN number;

------------------------------------------------------------------------------
-- Purpose
--  Same as above but indextable is not specified. Whole index is analyzed.

  FUNCTION quality_degradation(schemaname varchar2,
                               indexname varchar2)
  RETURN number;


------------------------------------------------------------------------------
-- Purpose
--   This procedure prints the quality for a specified R-tree index
--
-- Syntax
--   RTREE_QUALITY(schema_name, index_name, index_table_name)
--
-- Keywords and Paramters
--   schema_name   The name of the user's schema.
--                 Datatype is VARCHAR2.
--
--   index_name    The name of the index to be analyzed.
--                 Datatype is VARCHAR2.
--
--   index_table   The specific R-tree index for the index.
--                 Datatype is VARCHAR2.
--


  PROCEDURE analyze_rtree(schemaname varchar2,
                          indexname varchar2);

------------------------------------------------------------------------------
-- Purpose
--   This procedure prints just the quality for a specified R-tree index
--   (does not compare with the previous quality in the metadata)
--
-- Syntax
--   RTREE_QUALITY(schema_name, index_name, index_table_name)
--
-- Keywords and Paramters
--   schema_name   The name of the user's schema.
--                 Datatype is VARCHAR2.
--
--   index_name    The name of the index to be analyzed.
--                 Datatype is VARCHAR2.
--
--   index_table   The specific R-tree index for the index.
--                 Datatype is VARCHAR2.
--

  FUNCTION rtree_quality(schemaname varchar2,
                         indexname varchar2,
                         indextable varchar2)
  RETURN number;

------------------------------------------------------------------------------
-- Purpose
--  Same as above but indextable is not specified. Whole index is analyzed.

  FUNCTION rtree_quality(schemaname varchar2,
                         indexname varchar2)
  RETURN number;


---------------------------------------------------------------------------
-- Purpose
--
--   Function to estimate size of an R-tree index (table) in MB.
--   (tablespace needed at creation times is 3 times this size)
--
-- Syntax
--
--   estimate_rtree_index_size(number_of_geoms, db_block_size,
--                             sdo_rtr_pctfree, num_dimensions, is_geodetic)
--
-- Keywords and Parameters:
--
--   number_of_geoms - number of non-null geometries to be indexed
--   db_block_size   - block size of the underlying tablespace/database
--   sdo_rtr_pctfree - the percentage of space to be left empty in each node.
--                     This empty space can be consumed by subsequent inserts.
--                     If unspecified, the default in Oracle Spatial is 10
--   num_dimensions  - the number of dimensions in the
--                     data - NOTE: if geodetic, use 3
--
-- Returns: Size in MB.

  FUNCTION estimate_rtree_index_size (number_of_geoms integer,
                                      db_block_size integer,
                                      sdo_rtr_pctfree integer default 10,
                                      num_dimensions  integer default 2,
                                      is_geodetic number default 0)
  RETURN number;

---------------------------------------------------------------------------
-- Purpose
--
--   Function to approximately compute R-tree index size (in MB)
--
-- Syntax
--
--   estimate_rtree_index_size(schema, tabname, colname, partname)
--
-- Keywords and Parameters:
--
--   schema          - user's schema
--   tabname         - table on which R-tree index needs to be constructed
--   colname         - column on which R-tree index needs to be constructed
--   partname        - name of partition for which to build the index
--
-- Returns: Size in MB

  FUNCTION estimate_rtree_index_size (schema varchar2,
                                      tabname varchar2,
                                      colname varchar2,
                                      partname varchar2 default null)
  RETURN number;

END sdo_tune;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."TRANSFORM_MAP" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
166 fb
n9JILj+Zk/zLCGSTV8vvNrSDXF4wg/DIfyisZ3QCkHOUpH84wAHlcfdth7sl2vU0S1NrOXO1
80Tp73+8LXOSkqMHOjmxNrFhIofLsGH0LhA50nxbuODHCY0vFnQEKhLxpqGoPKKWozfJj5fY
WiXaIn2z1MWJ97Mvimmb0wFYSttNcBLvMDr1jaoXRDEfK1mKdEAIPv+BH2CYF/Gap67SCzpm
+D8CUWJE8htm9SEtI5kXUAED/S2bXDY=
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_GEOM" authid current_user as

------------------------------------------------------------------------------
-- PART I. Functions and procedures for non-object model                    --
------------------------------------------------------------------------------

/*
-- Package constants which represent geometry element types for calling
-- the init_element() function.
*/

POINT_TYPE       CONSTANT INTEGER := MDSYS.MD2.POINT_TYPE;
LINESTRING_TYPE  CONSTANT INTEGER := MDSYS.MD2.LINESTRING_TYPE;
POLYGON_TYPE     CONSTANT INTEGER := MDSYS.MD2.POLYGON_TYPE;

/*
-- Storage type
-- SDO_NORMALIZED_STORAGE indicates pre-8.1.3 schema
-- SDO_OBJECT_STORAGE indicates 8.1.3 schema
*/

SDO_NORMALIZED_STORAGE  CONSTANT INTEGER := 805;
SDO_OBJECT_STORAGE      CONSTANT INTEGER := 813;

/*
-- This pacakge constant represents the maximum number of ordinate values
-- in the parameter lists for add_nodes() and interact().
*/

MAX_ORD_PARAMS CONSTANT INTEGER := 250;

--
--  NAME:
--     init_element - INITialize an ELEMENT of a geometric object
--  DESCRIPTION:
--     This function generates a unique sequence number for each element of a
--     geometric object.  The user must ensure that each GID is unique in a
--     data set layer.
--  ARGUMENTS:
--     layer  - SDO geometry table name (LAYER_sdogeom) input argument
--     gid    - Geometry IDentifier input argument
--  RETURNS:
--     a unique sequence number for each element of a geometric object

function init_element (layer IN VARCHAR2, gid IN NUMBER)
return INTEGER;


--
--  NAME:
--     add_nodes - ADD the NODES of the element components of geometric objects
--                 to the SDO geometry table
--  DESCRIPTION:
--     This procedure adds vertex coordinates representing the linestring
--     segments of the element components of geometric objects to the geometry
--     table.  A unique sequence number is generated for each row of linestring
--     segments represented by the vertex coordinates in the parameter list.
--     Iterative calls to this function with the same GID and ESEQ are used to
--     add linestring segments represented by the vertex coordinates to an
--     element of a geometric object.
--  ARGUMENTS:
--     layer  - geometry table name (LAYER_sdogeom) input argument
--     gid    - Geometry IDentifier input argument
--     eseq   - Element SEQuence number input argument
--     etype  - Element TYPE input argument (see types defined above)
--     ordn   - ORDinate Nth input argument (up to 250 per call, 2 required)
/*
procedure add_nodes (layer  IN VARCHAR2, gid IN NUMBER, eseq IN INTEGER,
                     etype  IN INTEGER, ord1 IN NUMBER, ord2 IN  NUMBER,
                     ord3   IN NUMBER:=NULL, ord4   IN NUMBER:=NULL,
                     ord5   IN NUMBER:=NULL, ord6   IN NUMBER:=NULL,
                     ord7   IN NUMBER:=NULL, ord8   IN NUMBER:=NULL,
                     ord9   IN NUMBER:=NULL, ord10  IN NUMBER:=NULL,
                     ord11  IN NUMBER:=NULL, ord12  IN NUMBER:=NULL,
                     ord13  IN NUMBER:=NULL, ord14  IN NUMBER:=NULL,
                     ord15  IN NUMBER:=NULL, ord16  IN NUMBER:=NULL,
                     ord17  IN NUMBER:=NULL, ord18  IN NUMBER:=NULL,
                     ord19  IN NUMBER:=NULL, ord20  IN NUMBER:=NULL,
                     ord21  IN NUMBER:=NULL, ord22  IN NUMBER:=NULL,
                     ord23  IN NUMBER:=NULL, ord24  IN NUMBER:=NULL,
                     ord25  IN NUMBER:=NULL, ord26  IN NUMBER:=NULL,
                     ord27  IN NUMBER:=NULL, ord28  IN NUMBER:=NULL,
                     ord29  IN NUMBER:=NULL, ord30  IN NUMBER:=NULL,
                     ord31  IN NUMBER:=NULL, ord32  IN NUMBER:=NULL,
                     ord33  IN NUMBER:=NULL, ord34  IN NUMBER:=NULL,
                     ord35  IN NUMBER:=NULL, ord36  IN NUMBER:=NULL,
                     ord37  IN NUMBER:=NULL, ord38  IN NUMBER:=NULL,
                     ord39  IN NUMBER:=NULL, ord40  IN NUMBER:=NULL,
                     ord41  IN NUMBER:=NULL, ord42  IN NUMBER:=NULL,
                     ord43  IN NUMBER:=NULL, ord44  IN NUMBER:=NULL,
                     ord45  IN NUMBER:=NULL, ord46  IN NUMBER:=NULL,
                     ord47  IN NUMBER:=NULL, ord48  IN NUMBER:=NULL,
                     ord49  IN NUMBER:=NULL, ord50  IN NUMBER:=NULL,
                     ord51  IN NUMBER:=NULL, ord52  IN NUMBER:=NULL,
                     ord53  IN NUMBER:=NULL, ord54  IN NUMBER:=NULL,
                     ord55  IN NUMBER:=NULL, ord56  IN NUMBER:=NULL,
                     ord57  IN NUMBER:=NULL, ord58  IN NUMBER:=NULL,
                     ord59  IN NUMBER:=NULL, ord60  IN NUMBER:=NULL,
                     ord61  IN NUMBER:=NULL, ord62  IN NUMBER:=NULL,
                     ord63  IN NUMBER:=NULL, ord64  IN NUMBER:=NULL,
                     ord65  IN NUMBER:=NULL, ord66  IN NUMBER:=NULL,
                     ord67  IN NUMBER:=NULL, ord68  IN NUMBER:=NULL,
                     ord69  IN NUMBER:=NULL, ord70  IN NUMBER:=NULL,
                     ord71  IN NUMBER:=NULL, ord72  IN NUMBER:=NULL,
                     ord73  IN NUMBER:=NULL, ord74  IN NUMBER:=NULL,
                     ord75  IN NUMBER:=NULL, ord76  IN NUMBER:=NULL,
                     ord77  IN NUMBER:=NULL, ord78  IN NUMBER:=NULL,
                     ord79  IN NUMBER:=NULL, ord80  IN NUMBER:=NULL,
                     ord81  IN NUMBER:=NULL, ord82  IN NUMBER:=NULL,
                     ord83  IN NUMBER:=NULL, ord84  IN NUMBER:=NULL,
                     ord85  IN NUMBER:=NULL, ord86  IN NUMBER:=NULL,
                     ord87  IN NUMBER:=NULL, ord88  IN NUMBER:=NULL,
                     ord89  IN NUMBER:=NULL, ord90  IN NUMBER:=NULL,
                     ord91  IN NUMBER:=NULL, ord92  IN NUMBER:=NULL,
                     ord93  IN NUMBER:=NULL, ord94  IN NUMBER:=NULL,
                     ord95  IN NUMBER:=NULL, ord96  IN NUMBER:=NULL,
                     ord97  IN NUMBER:=NULL, ord98  IN NUMBER:=NULL,
                     ord99  IN NUMBER:=NULL, ord100 IN NUMBER:=NULL,
                     ord101 IN NUMBER:=NULL, ord102 IN NUMBER:=NULL,
                     ord103 IN NUMBER:=NULL, ord104 IN NUMBER:=NULL,
                     ord105 IN NUMBER:=NULL, ord106 IN NUMBER:=NULL,
                     ord107 IN NUMBER:=NULL, ord108 IN NUMBER:=NULL,
                     ord109 IN NUMBER:=NULL, ord110 IN NUMBER:=NULL,
                     ord111 IN NUMBER:=NULL, ord112 IN NUMBER:=NULL,
                     ord113 IN NUMBER:=NULL, ord114 IN NUMBER:=NULL,
                     ord115 IN NUMBER:=NULL, ord116 IN NUMBER:=NULL,
                     ord117 IN NUMBER:=NULL, ord118 IN NUMBER:=NULL,
                     ord119 IN NUMBER:=NULL, ord120 IN NUMBER:=NULL,
                     ord121 IN NUMBER:=NULL, ord122 IN NUMBER:=NULL,
                     ord123 IN NUMBER:=NULL, ord124 IN NUMBER:=NULL,
                     ord125 IN NUMBER:=NULL, ord126 IN NUMBER:=NULL,
                     ord127 IN NUMBER:=NULL, ord128 IN NUMBER:=NULL,
                     ord129 IN NUMBER:=NULL, ord130 IN NUMBER:=NULL,
                     ord131 IN NUMBER:=NULL, ord132 IN NUMBER:=NULL,
                     ord133 IN NUMBER:=NULL, ord134 IN NUMBER:=NULL,
                     ord135 IN NUMBER:=NULL, ord136 IN NUMBER:=NULL,
                     ord137 IN NUMBER:=NULL, ord138 IN NUMBER:=NULL,
                     ord139 IN NUMBER:=NULL, ord140 IN NUMBER:=NULL,
                     ord141 IN NUMBER:=NULL, ord142 IN NUMBER:=NULL,
                     ord143 IN NUMBER:=NULL, ord144 IN NUMBER:=NULL,
                     ord145 IN NUMBER:=NULL, ord146 IN NUMBER:=NULL,
                     ord147 IN NUMBER:=NULL, ord148 IN NUMBER:=NULL,
                     ord149 IN NUMBER:=NULL, ord150 IN NUMBER:=NULL,
                     ord151 IN NUMBER:=NULL, ord152 IN NUMBER:=NULL,
                     ord153 IN NUMBER:=NULL, ord154 IN NUMBER:=NULL,
                     ord155 IN NUMBER:=NULL, ord156 IN NUMBER:=NULL,
                     ord157 IN NUMBER:=NULL, ord158 IN NUMBER:=NULL,
                     ord159 IN NUMBER:=NULL, ord160 IN NUMBER:=NULL,
                     ord161 IN NUMBER:=NULL, ord162 IN NUMBER:=NULL,
                     ord163 IN NUMBER:=NULL, ord164 IN NUMBER:=NULL,
                     ord165 IN NUMBER:=NULL, ord166 IN NUMBER:=NULL,
                     ord167 IN NUMBER:=NULL, ord168 IN NUMBER:=NULL,
                     ord169 IN NUMBER:=NULL, ord170 IN NUMBER:=NULL,
                     ord171 IN NUMBER:=NULL, ord172 IN NUMBER:=NULL,
                     ord173 IN NUMBER:=NULL, ord174 IN NUMBER:=NULL,
                     ord175 IN NUMBER:=NULL, ord176 IN NUMBER:=NULL,
                     ord177 IN NUMBER:=NULL, ord178 IN NUMBER:=NULL,
                     ord179 IN NUMBER:=NULL, ord180 IN NUMBER:=NULL,
                     ord181 IN NUMBER:=NULL, ord182 IN NUMBER:=NULL,
                     ord183 IN NUMBER:=NULL, ord184 IN NUMBER:=NULL,
                     ord185 IN NUMBER:=NULL, ord186 IN NUMBER:=NULL,
                     ord187 IN NUMBER:=NULL, ord188 IN NUMBER:=NULL,
                     ord189 IN NUMBER:=NULL, ord190 IN NUMBER:=NULL,
                     ord191 IN NUMBER:=NULL, ord192 IN NUMBER:=NULL,
                     ord193 IN NUMBER:=NULL, ord194 IN NUMBER:=NULL,
                     ord195 IN NUMBER:=NULL, ord196 IN NUMBER:=NULL,
                     ord197 IN NUMBER:=NULL, ord198 IN NUMBER:=NULL,
                     ord199 IN NUMBER:=NULL, ord200 IN NUMBER:=NULL,
                     ord201 IN NUMBER:=NULL, ord202 IN NUMBER:=NULL,
                     ord203 IN NUMBER:=NULL, ord204 IN NUMBER:=NULL,
                     ord205 IN NUMBER:=NULL, ord206 IN NUMBER:=NULL,
                     ord207 IN NUMBER:=NULL, ord208 IN NUMBER:=NULL,
                     ord209 IN NUMBER:=NULL, ord210 IN NUMBER:=NULL,
                     ord211 IN NUMBER:=NULL, ord212 IN NUMBER:=NULL,
                     ord213 IN NUMBER:=NULL, ord214 IN NUMBER:=NULL,
                     ord215 IN NUMBER:=NULL, ord216 IN NUMBER:=NULL,
                     ord217 IN NUMBER:=NULL, ord218 IN NUMBER:=NULL,
                     ord219 IN NUMBER:=NULL, ord220 IN NUMBER:=NULL,
                     ord221 IN NUMBER:=NULL, ord222 IN NUMBER:=NULL,
                     ord223 IN NUMBER:=NULL, ord224 IN NUMBER:=NULL,
                     ord225 IN NUMBER:=NULL, ord226 IN NUMBER:=NULL,
                     ord227 IN NUMBER:=NULL, ord228 IN NUMBER:=NULL,
                     ord229 IN NUMBER:=NULL, ord230 IN NUMBER:=NULL,
                     ord231 IN NUMBER:=NULL, ord232 IN NUMBER:=NULL,
                     ord233 IN NUMBER:=NULL, ord234 IN NUMBER:=NULL,
                     ord235 IN NUMBER:=NULL, ord236 IN NUMBER:=NULL,
                     ord237 IN NUMBER:=NULL, ord238 IN NUMBER:=NULL,
                     ord239 IN NUMBER:=NULL, ord240 IN NUMBER:=NULL,
                     ord241 IN NUMBER:=NULL, ord242 IN NUMBER:=NULL,
                     ord243 IN NUMBER:=NULL, ord244 IN NUMBER:=NULL,
                     ord245 IN NUMBER:=NULL, ord246 IN NUMBER:=NULL,
                     ord247 IN NUMBER:=NULL, ord248 IN NUMBER:=NULL,
                     ord249 IN NUMBER:=NULL, ord250 IN NUMBER:=NULL);

*/

--
--  NAME:
--     validate_geometry - VALIDATE a GEOMETRY in SDO geometry table
--     validate_layer    - VALIDATE all geometries in the specified LAYER
--  DESCRIPTION:
--     validate_geometry function examines the properties of elements of a
--     geometry. Coordinates must be within the bounds designated in the
--     SDODIM table. Point elements must have exactly one (only one)
--     coordinate per row. Linestring elements must have at least two
--     coordinates (representing one segment). Polygon elements must have
--     at least four coordinates (representing three segments). The very
--     first coordinate must be repeated as the last coordinate to close
--     the polygon. The first coordinate of a continuation row for both
--     linestring and polygon elements must be equal to the last coordinate
--     of the previous row.
--
--     Now we support NURB elements or parametric curves too. A number of
--     validation rules are required for validating NURB elements.
--
--
--
--  ARGUMENTS:
--     layer         - geometry table name (LAYER_sdogeom) input argument
--     gid           - Geometry IDentifier input argument
--     result_table  - the result table where validation result is stored
--
--  RETURNS:
--     'TRUE' if the geometry is valid. Otherwise it returns Oracle
--     standard error code for known error or 'FALSE' for unknown error.
--     validate_layer procedure populates the given result_table with
--     validation results
--

function validate_geometry(layer IN VARCHAR2, gid IN NUMBER)
return VARCHAR2;
-- pragma restrict_references(validate_geometry, WNDS, WNPS, RNPS );

procedure validate_layer(layer IN VARCHAR2, result_table IN VARCHAR2);

function check_bounds(TableName IN VARCHAR2, gid IN NUMBER, Eseq IN INTEGER,
                      Seq IN INTEGER, CoordWidth IN NUMBER,
                      Dim1LB IN NUMBER, Dim1UB IN NUMBER,
                      Dim2LB IN NUMBER, Dim2UB IN NUMBER)
         return INTEGER;
-- pragma restrict_references(check_bounds, WNDS, WNPS, RNPS);

procedure get_ords(TableName IN VARCHAR2, gid IN NUMBER, Eseq IN INTEGER,
                   Seq IN INTEGER, ColumnIndex IN INTEGER,
                   XRtn OUT NUMBER, YRtn OUT NUMBER);
pragma restrict_references(get_ords, WNDS, WNPS, RNPS);


--
--  NAME:
--     interact - do two geometric objects INTERACT with each other?
--  DESCRIPTION:
--     This function determines whether or not two geometric objects in either
--     the same or different SDO geometry tables (LAYER_sdogeom) interact with
--     each other.
--  ARGUMENTS:
--     layer       - geometry table name (LAYER_sdogeom) input argument
--     gid         - Geometry IDentifier input argument
--     x_tolerance - allowed variance of ordinate values within dimension1
--     y_tolerance - allowed variance of ordinate values within dimension 2
--     vNNN        - list of up to 250 input values describing the elements
--                   of a geometric object with the following structure:
--                   etype, # of ordinate values, list of ordinate values.
--                   For example the following list could be used to describe
--                   a four point polygon with with a triangular hole :
--                   SDO_GEOM.POLYGON_TYPE, 10, ord1, ord2, ord3, ord4, ord5,
--                   ord6, ord7, ord8, ord9, ord10,
--                   SDO_GEOM.POLYGON_TYPE, 8, ord1, ord2, ord3, ord4, ord5,
--                   ord6, ord7, ord8
--                   The following example could be used to describe a two
--                   element (single segment) linestring:
--                   SDO_GEOM.LINESTRING_TYPE, 4, ord1, ord2, ord3, ord4,
--                   SDO_GEOM.LINESTRING_TYPE, 4, ord1, ord2, ord3, ord4
--  RETURNS:
--     'TRUE' or 'FALSE'

function interact (layer IN VARCHAR2, gid1 IN NUMBER, gid2 IN NUMBER)
return VARCHAR2;
-- pragma restrict_references(interact, WNDS, WNPS, RNPS);

function interact (layer1 IN VARCHAR2, gid1 IN NUMBER,
                   layer2 IN VARCHAR2, gid2 IN NUMBER)
return VARCHAR2;
-- pragma restrict_references(interact, WNDS, WNPS, RNPS);

function interact(layer1 IN VARCHAR2, gid1 IN NUMBER,
                  x_tolerance IN NUMBER, y_tolerance IN NUMBER,
                     v000 IN NUMBER:=NULL, v001 IN NUMBER:=NULL,
                     v002 IN NUMBER:=NULL, v003 IN NUMBER:=NULL,
                     v004 IN NUMBER:=NULL, v005 IN NUMBER:=NULL,
                     v006 IN NUMBER:=NULL, v007 IN NUMBER:=NULL,
                     v008 IN NUMBER:=NULL, v009 IN NUMBER:=NULL,
                     v010 IN NUMBER:=NULL, v011 IN NUMBER:=NULL,
                     v012 IN NUMBER:=NULL, v013 IN NUMBER:=NULL,
                     v014 IN NUMBER:=NULL, v015 IN NUMBER:=NULL,
                     v016 IN NUMBER:=NULL, v017 IN NUMBER:=NULL,
                     v018 IN NUMBER:=NULL, v019 IN NUMBER:=NULL,
                     v020 IN NUMBER:=NULL, v021 IN NUMBER:=NULL,
                     v022 IN NUMBER:=NULL, v023 IN NUMBER:=NULL,
                     v024 IN NUMBER:=NULL, v025 IN NUMBER:=NULL,
                     v026 IN NUMBER:=NULL, v027 IN NUMBER:=NULL,
                     v028 IN NUMBER:=NULL, v029 IN NUMBER:=NULL,
                     v030 IN NUMBER:=NULL, v031 IN NUMBER:=NULL,
                     v032 IN NUMBER:=NULL, v033 IN NUMBER:=NULL,
                     v034 IN NUMBER:=NULL, v035 IN NUMBER:=NULL,
                     v036 IN NUMBER:=NULL, v037 IN NUMBER:=NULL,
                     v038 IN NUMBER:=NULL, v039 IN NUMBER:=NULL,
                     v040 IN NUMBER:=NULL, v041 IN NUMBER:=NULL,
                     v042 IN NUMBER:=NULL, v043 IN NUMBER:=NULL,
                     v044 IN NUMBER:=NULL, v045 IN NUMBER:=NULL,
                     v046 IN NUMBER:=NULL, v047 IN NUMBER:=NULL,
                     v048 IN NUMBER:=NULL, v049 IN NUMBER:=NULL,
                     v050 IN NUMBER:=NULL, v051 IN NUMBER:=NULL,
                     v052 IN NUMBER:=NULL, v053 IN NUMBER:=NULL,
                     v054 IN NUMBER:=NULL, v055 IN NUMBER:=NULL,
                     v056 IN NUMBER:=NULL, v057 IN NUMBER:=NULL,
                     v058 IN NUMBER:=NULL, v059 IN NUMBER:=NULL,
                     v060 IN NUMBER:=NULL, v061 IN NUMBER:=NULL,
                     v062 IN NUMBER:=NULL, v063 IN NUMBER:=NULL,
                     v064 IN NUMBER:=NULL, v065 IN NUMBER:=NULL,
                     v066 IN NUMBER:=NULL, v067 IN NUMBER:=NULL,
                     v068 IN NUMBER:=NULL, v069 IN NUMBER:=NULL,
                     v070 IN NUMBER:=NULL, v071 IN NUMBER:=NULL,
                     v072 IN NUMBER:=NULL, v073 IN NUMBER:=NULL,
                     v074 IN NUMBER:=NULL, v075 IN NUMBER:=NULL,
                     v076 IN NUMBER:=NULL, v077 IN NUMBER:=NULL,
                     v078 IN NUMBER:=NULL, v079 IN NUMBER:=NULL,
                     v080 IN NUMBER:=NULL, v081 IN NUMBER:=NULL,
                     v082 IN NUMBER:=NULL, v083 IN NUMBER:=NULL,
                     v084 IN NUMBER:=NULL, v085 IN NUMBER:=NULL,
                     v086 IN NUMBER:=NULL, v087 IN NUMBER:=NULL,
                     v088 IN NUMBER:=NULL, v089 IN NUMBER:=NULL,
                     v090 IN NUMBER:=NULL, v091 IN NUMBER:=NULL,
                     v092 IN NUMBER:=NULL, v093 IN NUMBER:=NULL,
                     v094 IN NUMBER:=NULL, v095 IN NUMBER:=NULL,
                     v096 IN NUMBER:=NULL, v097 IN NUMBER:=NULL,
                     v098 IN NUMBER:=NULL, v099 IN NUMBER:=NULL,
                     v100 IN NUMBER:=NULL, v101 IN NUMBER:=NULL,
                     v102 IN NUMBER:=NULL, v103 IN NUMBER:=NULL,
                     v104 IN NUMBER:=NULL, v105 IN NUMBER:=NULL,
                     v106 IN NUMBER:=NULL, v107 IN NUMBER:=NULL,
                     v108 IN NUMBER:=NULL, v109 IN NUMBER:=NULL,
                     v110 IN NUMBER:=NULL, v111 IN NUMBER:=NULL,
                     v112 IN NUMBER:=NULL, v113 IN NUMBER:=NULL,
                     v114 IN NUMBER:=NULL, v115 IN NUMBER:=NULL,
                     v116 IN NUMBER:=NULL, v117 IN NUMBER:=NULL,
                     v118 IN NUMBER:=NULL, v119 IN NUMBER:=NULL,
                     v120 IN NUMBER:=NULL, v121 IN NUMBER:=NULL,
                     v122 IN NUMBER:=NULL, v123 IN NUMBER:=NULL,
                     v124 IN NUMBER:=NULL, v125 IN NUMBER:=NULL,
                     v126 IN NUMBER:=NULL, v127 IN NUMBER:=NULL,
                     v128 IN NUMBER:=NULL, v129 IN NUMBER:=NULL,
                     v130 IN NUMBER:=NULL, v131 IN NUMBER:=NULL,
                     v132 IN NUMBER:=NULL, v133 IN NUMBER:=NULL,
                     v134 IN NUMBER:=NULL, v135 IN NUMBER:=NULL,
                     v136 IN NUMBER:=NULL, v137 IN NUMBER:=NULL,
                     v138 IN NUMBER:=NULL, v139 IN NUMBER:=NULL,
                     v140 IN NUMBER:=NULL, v141 IN NUMBER:=NULL,
                     v142 IN NUMBER:=NULL, v143 IN NUMBER:=NULL,
                     v144 IN NUMBER:=NULL, v145 IN NUMBER:=NULL,
                     v146 IN NUMBER:=NULL, v147 IN NUMBER:=NULL,
                     v148 IN NUMBER:=NULL, v149 IN NUMBER:=NULL,
                     v150 IN NUMBER:=NULL, v151 IN NUMBER:=NULL,
                     v152 IN NUMBER:=NULL, v153 IN NUMBER:=NULL,
                     v154 IN NUMBER:=NULL, v155 IN NUMBER:=NULL,
                     v156 IN NUMBER:=NULL, v157 IN NUMBER:=NULL,
                     v158 IN NUMBER:=NULL, v159 IN NUMBER:=NULL,
                     v160 IN NUMBER:=NULL, v161 IN NUMBER:=NULL,
                     v162 IN NUMBER:=NULL, v163 IN NUMBER:=NULL,
                     v164 IN NUMBER:=NULL, v165 IN NUMBER:=NULL,
                     v166 IN NUMBER:=NULL, v167 IN NUMBER:=NULL,
                     v168 IN NUMBER:=NULL, v169 IN NUMBER:=NULL,
                     v170 IN NUMBER:=NULL, v171 IN NUMBER:=NULL,
                     v172 IN NUMBER:=NULL, v173 IN NUMBER:=NULL,
                     v174 IN NUMBER:=NULL, v175 IN NUMBER:=NULL,
                     v176 IN NUMBER:=NULL, v177 IN NUMBER:=NULL,
                     v178 IN NUMBER:=NULL, v179 IN NUMBER:=NULL,
                     v180 IN NUMBER:=NULL, v181 IN NUMBER:=NULL,
                     v182 IN NUMBER:=NULL, v183 IN NUMBER:=NULL,
                     v184 IN NUMBER:=NULL, v185 IN NUMBER:=NULL,
                     v186 IN NUMBER:=NULL, v187 IN NUMBER:=NULL,
                     v188 IN NUMBER:=NULL, v189 IN NUMBER:=NULL,
                     v190 IN NUMBER:=NULL, v191 IN NUMBER:=NULL,
                     v192 IN NUMBER:=NULL, v193 IN NUMBER:=NULL,
                     v194 IN NUMBER:=NULL, v195 IN NUMBER:=NULL,
                     v196 IN NUMBER:=NULL, v197 IN NUMBER:=NULL,
                     v198 IN NUMBER:=NULL, v199 IN NUMBER:=NULL,
                     v200 IN NUMBER:=NULL, v201 IN NUMBER:=NULL,
                     v202 IN NUMBER:=NULL, v203 IN NUMBER:=NULL,
                     v204 IN NUMBER:=NULL, v205 IN NUMBER:=NULL,
                     v206 IN NUMBER:=NULL, v207 IN NUMBER:=NULL,
                     v208 IN NUMBER:=NULL, v209 IN NUMBER:=NULL,
                     v210 IN NUMBER:=NULL, v211 IN NUMBER:=NULL,
                     v212 IN NUMBER:=NULL, v213 IN NUMBER:=NULL,
                     v214 IN NUMBER:=NULL, v215 IN NUMBER:=NULL,
                     v216 IN NUMBER:=NULL, v217 IN NUMBER:=NULL,
                     v218 IN NUMBER:=NULL, v219 IN NUMBER:=NULL,
                     v220 IN NUMBER:=NULL, v221 IN NUMBER:=NULL,
                     v222 IN NUMBER:=NULL, v223 IN NUMBER:=NULL,
                     v224 IN NUMBER:=NULL, v225 IN NUMBER:=NULL,
                     v226 IN NUMBER:=NULL, v227 IN NUMBER:=NULL,
                     v228 IN NUMBER:=NULL, v229 IN NUMBER:=NULL,
                     v230 IN NUMBER:=NULL, v231 IN NUMBER:=NULL,
                     v232 IN NUMBER:=NULL, v233 IN NUMBER:=NULL,
                     v234 IN NUMBER:=NULL, v235 IN NUMBER:=NULL,
                     v236 IN NUMBER:=NULL, v237 IN NUMBER:=NULL,
                     v238 IN NUMBER:=NULL, v239 IN NUMBER:=NULL,
                     v240 IN NUMBER:=NULL, v241 IN NUMBER:=NULL,
                     v242 IN NUMBER:=NULL, v243 IN NUMBER:=NULL,
                     v244 IN NUMBER:=NULL, v245 IN NUMBER:=NULL,
                     v246 IN NUMBER:=NULL, v247 IN NUMBER:=NULL,
                     v248 IN NUMBER:=NULL, v249 IN NUMBER:=NULL)
return VARCHAR2;
-- pragma restrict_references(interact, WNDS, WNPS, RNPS);

--
-- NAME:
--      relate - determine the relationship between to geometries
-- DESCRIPTION
--      Relate operates on two geometries and, based on the mask,
--      can determine their relationship.  There are three interfaces to relate.
--      The first operates geometries in a single SDO layer.  The second
--      operates on two geometries in two different layers and the third
--      on its first geometry in an SDO layer and the second geometry described
--      in its arguement list.
--
-- ARGUMENTS
--      LAYER   - geometry table name (LAYER_sdogeom) input argument
--      GID     - Geometry IDentifier input argument
--      MASK    - relationship mask
--              any combionation of
--              DISJOINT
--              TOUCH
--              EQUAL
--              INSIDE
--              CONTAINS
--              COVEREDBY
--              COVERS
--              OVERLAPBDYDISJOINT
--              OVERLAPBDYINTERSECT
--              OR DETERMINE
--              OR ANYINTERACT
--     x_tolerance - allowed variance of ordinate values within dimension1
--     y_tolerance - allowed variance of ordinate values within dimension 2
--     vNNN        - list of up to 250 input values describing the elements
--                   of a geometric object with the following structure:
--                   etype, # of ordinate values, list of ordinate values.
--                   For example the following list could be used to describe
--                   a four point polygon with with a triangular hole :
--                   SDO_GEOM.POLYGON_TYPE, 10, ord1, ord2, ord3, ord4, ord5,
--                   ord6, ord7, ord8, ord9, ord10,
--                   SDO_GEOM.POLYGON_TYPE, 8, ord1, ord2, ord3, ord4, ord5,
--                   ord6, ord7, ord8
--                   The following example could be used to describe a two
--                   element (single segment) linestring:
--                   SDO_GEOM.LINESTRING_TYPE, 4, ord1, ord2, ord3, ord4,
--                   SDO_GEOM.LINESTRING_TYPE, 4, ord1, ord2, ord3, ord4
--
-- RETURNS
--      If any combination of the following mask options is specified as the
--      mask argument, relate returns the relation if it matches passes mask
--      otherwise FALSE.
--
--      DISJOINT
--      TOUCH
--      EQUAL
--      INSIDE
--      CONTAINS
--      COVEREDBY
--      COVERS
--      OVERLAPBDYDISJOINT
--      OVERLAPBDYINTERSECT
--
--      RELATE will return one of the above relations if the following mask is
--      specified:
--
--      DETERMINE
--
--      RELATE will return TRUE or FALSE for if the following mask is specified :
--
--      ANYINTERACT
--

function relate (layer IN VARCHAR2, gid1 IN NUMBER,
                 mask  IN VARCHAR2,
                 gid2  IN NUMBER )
return VARCHAR2 ;
-- pragma restrict_references(relate, WNDS, WNPS, RNPS);


function relate (layer1 IN VARCHAR2, gid1  IN  NUMBER,
                 mask   IN VARCHAR2,
                 layer2 IN  VARCHAR2, gid2 IN NUMBER )
return VARCHAR2 ;
-- pragma restrict_references(relate, WNDS, WNPS, RNPS);

function relate (layer1 IN VARCHAR2, gid1  IN  NUMBER, nord1 IN NUMBER,
                 mask   IN VARCHAR2,
                 layer2 IN  VARCHAR2, gid2 IN NUMBER, nord2 IN NUMBER,
                 tolerance1 IN NUMBER, tolerance2 IN NUMBER)
return VARCHAR2 ;
-- pragma restrict_references(relate, WNDS, WNPS, RNPS);

function relate (layer1 IN VARCHAR2, gid1  IN NUMBER,
                mask   IN VARCHAR2,
                x_tolerance IN NUMBER, y_tolerance IN NUMBER,
                     v000 IN NUMBER:=NULL, v001 IN NUMBER:=NULL,
                     v002 IN NUMBER:=NULL, v003 IN NUMBER:=NULL,
                     v004 IN NUMBER:=NULL, v005 IN NUMBER:=NULL,
                     v006 IN NUMBER:=NULL, v007 IN NUMBER:=NULL,
                     v008 IN NUMBER:=NULL, v009 IN NUMBER:=NULL,
                     v010 IN NUMBER:=NULL, v011 IN NUMBER:=NULL,
                     v012 IN NUMBER:=NULL, v013 IN NUMBER:=NULL,
                     v014 IN NUMBER:=NULL, v015 IN NUMBER:=NULL,
                     v016 IN NUMBER:=NULL, v017 IN NUMBER:=NULL,
                     v018 IN NUMBER:=NULL, v019 IN NUMBER:=NULL,
                     v020 IN NUMBER:=NULL, v021 IN NUMBER:=NULL,
                     v022 IN NUMBER:=NULL, v023 IN NUMBER:=NULL,
                     v024 IN NUMBER:=NULL, v025 IN NUMBER:=NULL,
                     v026 IN NUMBER:=NULL, v027 IN NUMBER:=NULL,
                     v028 IN NUMBER:=NULL, v029 IN NUMBER:=NULL,
                     v030 IN NUMBER:=NULL, v031 IN NUMBER:=NULL,
                     v032 IN NUMBER:=NULL, v033 IN NUMBER:=NULL,
                     v034 IN NUMBER:=NULL, v035 IN NUMBER:=NULL,
                     v036 IN NUMBER:=NULL, v037 IN NUMBER:=NULL,
                     v038 IN NUMBER:=NULL, v039 IN NUMBER:=NULL,
                     v040 IN NUMBER:=NULL, v041 IN NUMBER:=NULL,
                     v042 IN NUMBER:=NULL, v043 IN NUMBER:=NULL,
                     v044 IN NUMBER:=NULL, v045 IN NUMBER:=NULL,
                     v046 IN NUMBER:=NULL, v047 IN NUMBER:=NULL,
                     v048 IN NUMBER:=NULL, v049 IN NUMBER:=NULL,
                     v050 IN NUMBER:=NULL, v051 IN NUMBER:=NULL,
                     v052 IN NUMBER:=NULL, v053 IN NUMBER:=NULL,
                     v054 IN NUMBER:=NULL, v055 IN NUMBER:=NULL,
                     v056 IN NUMBER:=NULL, v057 IN NUMBER:=NULL,
                     v058 IN NUMBER:=NULL, v059 IN NUMBER:=NULL,
                     v060 IN NUMBER:=NULL, v061 IN NUMBER:=NULL,
                     v062 IN NUMBER:=NULL, v063 IN NUMBER:=NULL,
                     v064 IN NUMBER:=NULL, v065 IN NUMBER:=NULL,
                     v066 IN NUMBER:=NULL, v067 IN NUMBER:=NULL,
                     v068 IN NUMBER:=NULL, v069 IN NUMBER:=NULL,
                     v070 IN NUMBER:=NULL, v071 IN NUMBER:=NULL,
                     v072 IN NUMBER:=NULL, v073 IN NUMBER:=NULL,
                     v074 IN NUMBER:=NULL, v075 IN NUMBER:=NULL,
                     v076 IN NUMBER:=NULL, v077 IN NUMBER:=NULL,
                     v078 IN NUMBER:=NULL, v079 IN NUMBER:=NULL,
                     v080 IN NUMBER:=NULL, v081 IN NUMBER:=NULL,
                     v082 IN NUMBER:=NULL, v083 IN NUMBER:=NULL,
                     v084 IN NUMBER:=NULL, v085 IN NUMBER:=NULL,
                     v086 IN NUMBER:=NULL, v087 IN NUMBER:=NULL,
                     v088 IN NUMBER:=NULL, v089 IN NUMBER:=NULL,
                     v090 IN NUMBER:=NULL, v091 IN NUMBER:=NULL,
                     v092 IN NUMBER:=NULL, v093 IN NUMBER:=NULL,
                     v094 IN NUMBER:=NULL, v095 IN NUMBER:=NULL,
                     v096 IN NUMBER:=NULL, v097 IN NUMBER:=NULL,
                     v098 IN NUMBER:=NULL, v099 IN NUMBER:=NULL,
                     v100 IN NUMBER:=NULL, v101 IN NUMBER:=NULL,
                     v102 IN NUMBER:=NULL, v103 IN NUMBER:=NULL,
                     v104 IN NUMBER:=NULL, v105 IN NUMBER:=NULL,
                     v106 IN NUMBER:=NULL, v107 IN NUMBER:=NULL,
                     v108 IN NUMBER:=NULL, v109 IN NUMBER:=NULL,
                     v110 IN NUMBER:=NULL, v111 IN NUMBER:=NULL,
                     v112 IN NUMBER:=NULL, v113 IN NUMBER:=NULL,
                     v114 IN NUMBER:=NULL, v115 IN NUMBER:=NULL,
                     v116 IN NUMBER:=NULL, v117 IN NUMBER:=NULL,
                     v118 IN NUMBER:=NULL, v119 IN NUMBER:=NULL,
                     v120 IN NUMBER:=NULL, v121 IN NUMBER:=NULL,
                     v122 IN NUMBER:=NULL, v123 IN NUMBER:=NULL,
                     v124 IN NUMBER:=NULL, v125 IN NUMBER:=NULL,
                     v126 IN NUMBER:=NULL, v127 IN NUMBER:=NULL,
                     v128 IN NUMBER:=NULL, v129 IN NUMBER:=NULL,
                     v130 IN NUMBER:=NULL, v131 IN NUMBER:=NULL,
                     v132 IN NUMBER:=NULL, v133 IN NUMBER:=NULL,
                     v134 IN NUMBER:=NULL, v135 IN NUMBER:=NULL,
                     v136 IN NUMBER:=NULL, v137 IN NUMBER:=NULL,
                     v138 IN NUMBER:=NULL, v139 IN NUMBER:=NULL,
                     v140 IN NUMBER:=NULL, v141 IN NUMBER:=NULL,
                     v142 IN NUMBER:=NULL, v143 IN NUMBER:=NULL,
                     v144 IN NUMBER:=NULL, v145 IN NUMBER:=NULL,
                     v146 IN NUMBER:=NULL, v147 IN NUMBER:=NULL,
                     v148 IN NUMBER:=NULL, v149 IN NUMBER:=NULL,
                     v150 IN NUMBER:=NULL, v151 IN NUMBER:=NULL,
                     v152 IN NUMBER:=NULL, v153 IN NUMBER:=NULL,
                     v154 IN NUMBER:=NULL, v155 IN NUMBER:=NULL,
                     v156 IN NUMBER:=NULL, v157 IN NUMBER:=NULL,
                     v158 IN NUMBER:=NULL, v159 IN NUMBER:=NULL,
                     v160 IN NUMBER:=NULL, v161 IN NUMBER:=NULL,
                     v162 IN NUMBER:=NULL, v163 IN NUMBER:=NULL,
                     v164 IN NUMBER:=NULL, v165 IN NUMBER:=NULL,
                     v166 IN NUMBER:=NULL, v167 IN NUMBER:=NULL,
                     v168 IN NUMBER:=NULL, v169 IN NUMBER:=NULL,
                     v170 IN NUMBER:=NULL, v171 IN NUMBER:=NULL,
                     v172 IN NUMBER:=NULL, v173 IN NUMBER:=NULL,
                     v174 IN NUMBER:=NULL, v175 IN NUMBER:=NULL,
                     v176 IN NUMBER:=NULL, v177 IN NUMBER:=NULL,
                     v178 IN NUMBER:=NULL, v179 IN NUMBER:=NULL,
                     v180 IN NUMBER:=NULL, v181 IN NUMBER:=NULL,
                     v182 IN NUMBER:=NULL, v183 IN NUMBER:=NULL,
                     v184 IN NUMBER:=NULL, v185 IN NUMBER:=NULL,
                     v186 IN NUMBER:=NULL, v187 IN NUMBER:=NULL,
                     v188 IN NUMBER:=NULL, v189 IN NUMBER:=NULL,
                     v190 IN NUMBER:=NULL, v191 IN NUMBER:=NULL,
                     v192 IN NUMBER:=NULL, v193 IN NUMBER:=NULL,
                     v194 IN NUMBER:=NULL, v195 IN NUMBER:=NULL,
                     v196 IN NUMBER:=NULL, v197 IN NUMBER:=NULL,
                     v198 IN NUMBER:=NULL, v199 IN NUMBER:=NULL,
                     v200 IN NUMBER:=NULL, v201 IN NUMBER:=NULL,
                     v202 IN NUMBER:=NULL, v203 IN NUMBER:=NULL,
                     v204 IN NUMBER:=NULL, v205 IN NUMBER:=NULL,
                     v206 IN NUMBER:=NULL, v207 IN NUMBER:=NULL,
                     v208 IN NUMBER:=NULL, v209 IN NUMBER:=NULL,
                     v210 IN NUMBER:=NULL, v211 IN NUMBER:=NULL,
                     v212 IN NUMBER:=NULL, v213 IN NUMBER:=NULL,
                     v214 IN NUMBER:=NULL, v215 IN NUMBER:=NULL,
                     v216 IN NUMBER:=NULL, v217 IN NUMBER:=NULL,
                     v218 IN NUMBER:=NULL, v219 IN NUMBER:=NULL,
                     v220 IN NUMBER:=NULL, v221 IN NUMBER:=NULL,
                     v222 IN NUMBER:=NULL, v223 IN NUMBER:=NULL,
                     v224 IN NUMBER:=NULL, v225 IN NUMBER:=NULL,
                     v226 IN NUMBER:=NULL, v227 IN NUMBER:=NULL,
                     v228 IN NUMBER:=NULL, v229 IN NUMBER:=NULL,
                     v230 IN NUMBER:=NULL, v231 IN NUMBER:=NULL,
                     v232 IN NUMBER:=NULL, v233 IN NUMBER:=NULL,
                     v234 IN NUMBER:=NULL, v235 IN NUMBER:=NULL,
                     v236 IN NUMBER:=NULL, v237 IN NUMBER:=NULL,
                     v238 IN NUMBER:=NULL, v239 IN NUMBER:=NULL,
                     v240 IN NUMBER:=NULL, v241 IN NUMBER:=NULL,
                     v242 IN NUMBER:=NULL, v243 IN NUMBER:=NULL,
                     v244 IN NUMBER:=NULL, v245 IN NUMBER:=NULL,
                     v246 IN NUMBER:=NULL, v247 IN NUMBER:=NULL,
                     v248 IN NUMBER:=NULL, v249 IN NUMBER:=NULL )
return VARCHAR2 ;
-- pragma restrict_references(relate, WNDS, WNPS, RNPS);


------------------------------------------------------------------------------
-- PART II. Functions and procedures for object model                       --
------------------------------------------------------------------------------

--
-- NAME:
--      relate - object relate function
-- DESCRIPTION
--      This function operates on two geometries and, based on the mask,
--      can determine their relationship.
--
-- ARGUMENTS
--      geom1     - the first geometry object.
--      dim1      - the dimensional information array corresponding to the
--                  first geometry object, usually selected from
--                  SDO_GEOM_METADATA table.
--      mask      - relationship mask, any combionation of:
--                  DISJOINT, TOUCH, EQUAL, INSIDE, CONTAINS, COVEREDBY,
--                  COVERS, OVERLAPBDYDISJOINT, OVERLAPBDYINTERSECT,
--                  OR DETERMINE, OR ANYINTERACT
--      geom2     - the second geometry object.
--      dim2      - the dimensional information array corresponding to the
--                  second geometry object, usually selected from
--                  SDO_GEOM_METADATA table.
--      tol       - tolerance value.
--
-- RETURNS
--      If any combination of the following mask options is specified as the
--      mask argument, relate returns the relation if it matches passes mask
--      otherwise 'FALSE':
--      DISJOINT, TOUCH, EQUAL, INSIDE, CONTAINS, COVEREDBY, COVERS,
--      OVERLAPBDYDISJOINT, OVERLAPBDYINTERSECT.
--
--      Relate will return one of the above relations if the following mask is
--      specified: 'DETERMINE'.
--
--      Relate will return 'TRUE' or 'FALSE' for if the following mask is
--      specified: 'ANYINTERACT'.
--

function relate(geom1 IN MDSYS.SDO_GEOMETRY,
                dim1  IN MDSYS.SDO_DIM_ARRAY,
                mask  IN VARCHAR2,
                geom2 IN MDSYS.SDO_GEOMETRY,
                dim2  IN MDSYS.SDO_DIM_ARRAY)
return VARCHAR2 PARALLEL_ENABLE;
-- pragma restrict_references(relate, WNDS, WNPS, RNPS);


function relate(geom1 IN MDSYS.SDO_GEOMETRY,
                mask  IN VARCHAR2,
                geom2 IN MDSYS.SDO_GEOMETRY,
                tol   IN NUMBER)
return VARCHAR2 PARALLEL_ENABLE;
-- pragma restrict_references(relate, WNDS, WNPS, RNPS);


--
-- NAME:
--      within_distance - object within distance function
-- DESCRIPTION
--      This function operates on two geometries and determines if they
--      are within the distance of <dist>.
--
-- ARGUMENTS
--      geom1     - the first geometry object.
--      dim1      - the dimensional information array corresponding to the
--                  first geometry object, usually selected from
--                  SDO_GEOM_METADATA table.
--      dist      - Euclidean distance value.
--      geom2     - the second geometry object.
--      dim2      - the dimensional information array corresponding to the
--                  second geometry object, usually selected from
--                  SDO_GEOM_METADATA table.
--      tol       - tolerance value.
--
-- RETURNS
--      'TRUE' if the two geometries are within distance of <dist> from
--      each other, or 'FALSE' otherwise.
--

function within_distance(geom1 IN MDSYS.SDO_GEOMETRY,
                         dim1  IN MDSYS.SDO_DIM_ARRAY,
                         dist  IN NUMBER,
                         geom2 IN MDSYS.SDO_GEOMETRY,
                         dim2  IN MDSYS.SDO_DIM_ARRAY,
                         units IN VARCHAR2:=NULL)
return VARCHAR2 PARALLEL_ENABLE;
 -- pragma restrict_references(within_distance, WNDS, WNPS, RNPS);


function within_distance(geom1 IN MDSYS.SDO_GEOMETRY,
                         dist  IN NUMBER,
                         geom2 IN MDSYS.SDO_GEOMETRY,
                         tol   IN NUMBER,
                         units IN VARCHAR2:=NULL)
return VARCHAR2 PARALLEL_ENABLE;
 -- pragma restrict_references(within_distance, WNDS, WNPS, RNPS);


--
-- NAME:
--      sdo_buffer -- buffer generation
-- DESCRIPTION
--      This function generates a buffer polygon for the input geometry
--      object with buffer distance <dist>.
--
-- ARGUMENTS
--      geom      - the input geometry object.
--      dim       - the dimensional information array corresponding to the
--                  input geometry object, usually selected from
--                  SDO_GEOM_METADATA table.
--      dist      - Euclidean distance value.
--      params    - Unit of the above dist; arc_tolerance for geodetic buffering
--      tol       - tolerance value.
--
-- RETURNS
--      This function returns a geometry object representing the buffer
--      polygon.
--

function sdo_buffer(geom IN MDSYS.SDO_GEOMETRY,
                    dim  IN MDSYS.SDO_DIM_ARRAY,
                    dist IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_buffer, WNDS, WNPS, TRUST);


function sdo_buffer(geom IN MDSYS.SDO_GEOMETRY,
                    dist IN NUMBER,
                    tol  IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_buffer, WNDS, WNPS, TRUST);

function sdo_buffer(geom IN MDSYS.SDO_GEOMETRY,
                    dim  IN MDSYS.SDO_DIM_ARRAY,
                    dist IN NUMBER,
                    params IN VARCHAR2)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_buffer, WNDS, WNPS, TRUST);

function sdo_buffer(geom IN MDSYS.SDO_GEOMETRY,
                    dist IN NUMBER,
                    tol  IN NUMBER,
                    params IN VARCHAR2)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_buffer, WNDS, WNPS, TRUST);


-- Geometry operations
--
-- NAME:
--      sdo_union        -- union ('OR' operation) of two geometry objects.
--      sdo_difference   -- difference ('MINUS' operation) of two geometry
--                          objects.
--      sdo_xor          -- symetric difference('XOR' operation) of two
--                          geometry objects.
--      sdo_intersection -- intersection ('AND' operation) of two geometry
--                          objects.
--
-- DESCRIPTION
--      These four functions perform topological operations on two geometry
--      objects.
--
-- ARGUMENTS
--      geom1     - the first geometry object.
--      dim1      - the dimensional information array corresponding to the
--                  first geometry object, usually selected from
--                  SDO_GEOM_METADATA table.
--      geom2     - the second geometry object.
--      dim2      - the dimensional information array corresponding to the
--                  second geometry object, usually selected from
--                  SDO_GEOM_METADATA table.
--      tol       - tolerance value.
--
-- RETURNS
--      A geometry object representing the result of this geometry operation.
--

function sdo_union(geom1 IN MDSYS.SDO_GEOMETRY,
                   dim1  IN MDSYS.SDO_DIM_ARRAY,
                   geom2 IN MDSYS.SDO_GEOMETRY,
                   dim2  IN MDSYS.SDO_DIM_ARRAY)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_union, WNDS, WNPS, RNPS);

function sdo_self_union(geom1 IN MDSYS.SDO_GEOMETRY,
                        dim1  IN MDSYS.SDO_DIM_ARRAY)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

function sdo_difference(geom1 IN MDSYS.SDO_GEOMETRY,
                        dim1  IN MDSYS.SDO_DIM_ARRAY,
                        geom2 IN MDSYS.SDO_GEOMETRY,
                        dim2  IN MDSYS.SDO_DIM_ARRAY)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_difference, WNDS, WNPS, RNPS);

function sdo_xor(geom1 IN MDSYS.SDO_GEOMETRY,
                 dim1  IN MDSYS.SDO_DIM_ARRAY,
                 geom2 IN MDSYS.SDO_GEOMETRY,
                 dim2  IN MDSYS.SDO_DIM_ARRAY)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_xor, WNDS, WNPS, RNPS);

function sdo_intersection(geom1 IN MDSYS.SDO_GEOMETRY,
                          dim1  IN MDSYS.SDO_DIM_ARRAY,
                          geom2 IN MDSYS.SDO_GEOMETRY,
                          dim2  IN MDSYS.SDO_DIM_ARRAY)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_intersection, WNDS, WNPS, RNPS);


function sdo_union(geom1 IN MDSYS.SDO_GEOMETRY,
                   geom2 IN MDSYS.SDO_GEOMETRY,
                   tol   IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_union, WNDS, WNPS, RNPS);

function sdo_self_union(geom1 IN MDSYS.SDO_GEOMETRY,
                        tol   IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

function sdo_difference(geom1 IN MDSYS.SDO_GEOMETRY,
                        geom2 IN MDSYS.SDO_GEOMETRY,
                        tol   IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_difference, WNDS, WNPS, RNPS);

function sdo_xor(geom1 IN MDSYS.SDO_GEOMETRY,
                 geom2 IN MDSYS.SDO_GEOMETRY,
                 tol   IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_xor, WNDS, WNPS, RNPS);

function sdo_intersection(geom1 IN MDSYS.SDO_GEOMETRY,
                          geom2 IN MDSYS.SDO_GEOMETRY,
                          tol   IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_intersection, WNDS, WNPS, RNPS);


-- Deprecated polygon operation interfaces
--
-- NAME:
--      sdo_poly_union        -- union ('OR' operation) of two polygons
--      sdo_poly_difference   -- difference ('MINUS' operation) of two polygons
--      sdo_poly_xor          -- symetric difference('XOR' operation) of two
--                               polygons
--      sdo_poly_intersection -- intersection ('AND' operation) of two polygons
--
-- DESCRIPTION
--      These four functions are deprecated starting from version 8.1.6.
--      Please use geometry operations sdo_union, sdo_difference,
--      sdo_xor, and sdo_intersection instead of the above polygon specific
--      functions.
--

function sdo_poly_union(geom1 IN MDSYS.SDO_GEOMETRY,
                        dim1  IN MDSYS.SDO_DIM_ARRAY,
                        geom2 IN MDSYS.SDO_GEOMETRY,
                        dim2  IN MDSYS.SDO_DIM_ARRAY)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_poly_union, WNDS, WNPS, RNPS);

function sdo_poly_difference(geom1 IN MDSYS.SDO_GEOMETRY,
                             dim1  IN MDSYS.SDO_DIM_ARRAY,
                             geom2 IN MDSYS.SDO_GEOMETRY,
                             dim2  IN MDSYS.SDO_DIM_ARRAY)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_poly_difference, WNDS, WNPS, RNPS);

function sdo_poly_xor(geom1 IN MDSYS.SDO_GEOMETRY,
                      dim1  IN MDSYS.SDO_DIM_ARRAY,
                      geom2 IN MDSYS.SDO_GEOMETRY,
                      dim2  IN MDSYS.SDO_DIM_ARRAY)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_poly_xor, WNDS, WNPS, RNPS);

function sdo_poly_intersection(geom1 IN MDSYS.SDO_GEOMETRY,
                               dim1  IN MDSYS.SDO_DIM_ARRAY,
                               geom2 IN MDSYS.SDO_GEOMETRY,
                               dim2  IN MDSYS.SDO_DIM_ARRAY)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_poly_intersection, WNDS, WNPS, RNPS);


--
-- NAME:
--      sdo_length -- compute length for one-dimensional geometry
--                    (linestring), or perimeter for two-dimensional
--                    geometry (polygon)
-- DESCRIPTION
--      If the input polygon contains one or more holes, this function
--      calculates perimeters for the exterior boundary and all the holes,
--      and then returns the sum of all the perimeters.
--
-- ARGUMENTS
--      geom      - the input geometry object.
--      dim       - the dimensional information array corresponding to the
--                  input geometry object, usually selected from
--                  SDO_GEOM_METADATA table.
--      tol       - tolerance value.
--      unit      - the unit used in the result, if needed
--      count_shared_edges - Default 1(counting shared edges once) or
--                                   2(counting shared edges twice)
--
-- RETURNS
--      This function returns length or perimeter of a geometry object.
--

function sdo_length(geom IN MDSYS.SDO_GEOMETRY,
                    dim  IN MDSYS.SDO_DIM_ARRAY,
                    unit IN VARCHAR2 DEFAULT NULL,
                    count_shared_edges IN NUMBER DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_length, WNDS, WNPS, RNPS);


function sdo_length(geom IN MDSYS.SDO_GEOMETRY,
                    tol  IN NUMBER,
                    unit IN VARCHAR2 DEFAULT NULL,
                    count_shared_edges IN NUMBER DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_length, WNDS, WNPS, RNPS);


--
-- NAME:
--      sdo_area -- compute area for two-dimensional geometry (polygon)
-- DESCRIPTION
--      This function returns correct area for polygon-with-holes.
--
-- ARGUMENTS
--      geom      - the input geometry object.
--      dim       - the dimensional information array corresponding to the
--                  input geometry object, usually selected from
--                  SDO_GEOM_METADATA table.
--      tol       - tolerance value.
--      unit      - the unit used in the result, if needed
--
-- RETURNS
--      This function returns area of a geometry object.

function sdo_area(geom IN MDSYS.SDO_GEOMETRY,
                  dim  IN MDSYS.SDO_DIM_ARRAY,
                  unit IN VARCHAR2 DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_area, WNDS, WNPS, RNPS);

function sdo_area(geom IN MDSYS.SDO_GEOMETRY,
                  tol  IN NUMBER,
                  unit IN VARCHAR2 DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_area, WNDS, WNPS, RNPS);

function sdo_volume(geom IN MDSYS.SDO_GEOMETRY,
                  tol  IN NUMBER,
                  unit IN VARCHAR2 DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--         sdo_distance
--
-- DESCRIPTION
--         Compute the distance between two geometries
--
-- ARGUMENTS
--        geom1    - the first geometry object
--        dim1     - the dimensional information array corresponding to the
--                   first geometry object, usually selected from
--                   SDO_GEOM_METADATA table.
--        geom2    - the second geometry object.
--        dim2     - the dimensional information array corresponding to the
--                   second geometry object, usually selected from
--                   SDO_GEOM_METADATA table.
--        tol      - tolerance value.
--        unit     - the unit for the returned distance
--
-- RETURNS
--        the minimum distance between the two given geometries.
--

function   sdo_distance(geom1 IN mdsys.sdo_geometry,
                      dim1  IN mdsys.sdo_dim_array,
                      geom2 IN mdsys.sdo_geometry,
                      dim2  IN mdsys.sdo_dim_array,
                      unit  IN varchar2 DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;
--pragma restrict_references(sdo_distance, WNDS, WNPS, RNPS);


function   sdo_distance(geom1 IN mdsys.sdo_geometry,
                        geom2 IN mdsys.sdo_geometry,
                        tol   IN NUMBER,
                        unit  IN varchar2 DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;
--pragma restrict_references(sdo_distance, WNDS, WNPS, RNPS);

--
-- NAME:
--        sdo_maxdistance_line
--
-- DESCRIPTION
--        Compute the the line that has the maximum distance between the
--        two given geometries.
--
-- ARGUMENTS
--        geom1    - the first geometry object
--        dim1     - the dimensional information array corresponding to the
--                   first geometry object, usually selected from
--                   SDO_GEOM_METADATA table.
--        geom2    - the second geometry object.
--        dim2     - the dimensional information array corresponding to the
--                   second geometry object, usually selected from
--                   SDO_GEOM_METADATA table.
--        tol      - tolerance value.
--
-- RETURNS
--        the line that has the maximum distance between the two given
--        geometries.
--

function sdo_maxdistance_line(geom1 IN mdsys.sdo_geometry,
                              dim1  IN mdsys.sdo_dim_array,
                              geom2 IN mdsys.sdo_geometry,
                              dim2  IN mdsys.sdo_dim_array)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

function sdo_maxdistance_line(geom1 IN mdsys.sdo_geometry,
                              geom2 IN mdsys.sdo_geometry,
                              tol   IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--        sdo_maxdistance
--
-- DESCRIPTION
--        Compute the maximal distance between two geometries
--
-- ARGUMENTS
--        geom1    - the first geometry object
--        dim1     - the dimensional information array corresponding to the
--                   first geometry object, usually selected from
--                   SDO_GEOM_METADATA table.
--        geom2    - the second geometry object.
--        dim2     - the dimensional information array corresponding to the
--                   second geometry object, usually selected from
--                   SDO_GEOM_METADATA table.
--        tol      - tolerance value.
--        unit     - the unit for the returned distance
--
-- RETURNS
--        the maximal distance between the two given geometries.
--

function   sdo_maxdistance(geom1 IN mdsys.sdo_geometry,
                           dim1  IN mdsys.sdo_dim_array,
                           geom2 IN mdsys.sdo_geometry,
                           dim2  IN mdsys.sdo_dim_array,
                           unit  IN varchar2 DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;

function   sdo_maxdistance(geom1 IN mdsys.sdo_geometry,
                           geom2 IN mdsys.sdo_geometry,
                           tol   IN NUMBER,
                           unit  IN varchar2 DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--        sdo_diameter_line
--
-- DESCRIPTION
--        Compute the line that has the diameter of geometry
--
-- ARGUMENTS
--        geom     - the geometry object
--        dim      - the dimensional information array
--        tol      - tolerance value.
--
-- RETURNS
--        the line that has the diameter of geometry
--

function sdo_diameter_line(geom  IN mdsys.sdo_geometry,
                           dim   IN mdsys.sdo_dim_array)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

function sdo_diameter_line(geom  IN mdsys.sdo_geometry,
                           tol   IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--        sdo_diameter
--
-- DESCRIPTION
--        Compute the diameter of geometry
--
-- ARGUMENTS
--        geom     - the geometry object
--        dim      - the dimensional information array
--        tol      - tolerance value.
--        unit     - the unit for the returned distance
--
-- RETURNS
--        the diameter of geometry
--

function   sdo_diameter(geom  IN mdsys.sdo_geometry,
                        dim   IN mdsys.sdo_dim_array,
                        unit  IN varchar2 DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;

function   sdo_diameter(geom  IN mdsys.sdo_geometry,
                        tol   IN NUMBER,
                        unit  IN varchar2 DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--        sdo_width_line
--
-- DESCRIPTION
--        Compute the line that has the width of geometry
--
-- ARGUMENTS
--        geom     - the geometry object
--        dim      - the dimensional information array
--        tol      - tolerance value.
--
-- RETURNS
--        the line that has the width of geometry
--

function sdo_width_line(geom  IN mdsys.sdo_geometry,
                        dim   IN mdsys.sdo_dim_array)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

function sdo_width_line(geom  IN mdsys.sdo_geometry,
                        tol   IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--        sdo_width
--
-- DESCRIPTION
--        Compute the width of geometry
--
-- ARGUMENTS
--        geom     - the geometry object
--        dim      - the dimensional information array
--        tol      - tolerance value.
--        unit     - the unit for the returned distance
--
-- RETURNS
--        the width of geometry
--

function   sdo_width(geom  IN mdsys.sdo_geometry,
                     dim   IN mdsys.sdo_dim_array,
                     unit  IN varchar2 DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;

function   sdo_width(geom  IN mdsys.sdo_geometry,
                     tol   IN NUMBER,
                     unit  IN varchar2 DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--         sdo_mbc
--
-- DESCRIPTION
--         Compute the minimum bounding circle of geometry
--
-- ARGUMENTS
--        geom     - the geometry object
--        dim      - the dimensional information array
--        tol      - tolerance value
--        arc_tolerance  - mainly used for densify geodetic arc
--
-- RETURNS
--        the minimum bounding circle of geometry
--
function sdo_mbc(geom          IN mdsys.sdo_geometry,
                 dim           IN mdsys.sdo_dim_array,
                 arc_tolerance IN NUMBER DEFAULT NULL)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

function sdo_mbc(geom          IN mdsys.sdo_geometry,
                 tol           IN NUMBER,
                 arc_tolerance IN NUMBER DEFAULT NULL)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--         sdo_mbc_center
--
-- DESCRIPTION
--         Compute the center of the minimum bounding circle of geometry
--
-- ARGUMENTS
--        geom     - the geometry object
--        dim      - the dimensional information array
--        tol      - tolerance value
--
-- RETURNS
--        the center of the minimum bounding circle of geometry
--
function sdo_mbc_center(geom   IN mdsys.sdo_geometry,
                        dim    IN mdsys.sdo_dim_array)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

function sdo_mbc_center(geom   IN mdsys.sdo_geometry,
                        tol    IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--         sdo_mbc_radius
--
-- DESCRIPTION
--         Compute the radius of the minimum bounding circle of geometry
--
-- ARGUMENTS
--        geom     - the geometry object
--        dim      - the dimensional information array
--        tol      - tolerance value
--        unit     - the unit for the returned distance
--
-- RETURNS
--        the radius of the minimum bounding circle of geometry
--
function sdo_mbc_radius(geom          IN mdsys.sdo_geometry,
                        dim           IN mdsys.sdo_dim_array,
                        unit          IN varchar2 DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;

function sdo_mbc_radius(geom          IN mdsys.sdo_geometry,
                        tol           IN NUMBER,
                        unit       IN varchar2 DEFAULT NULL)
return NUMBER DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--
--      sdo_closest_points
-- DESCRIPTION
--      computes the minimum inter-geometry distance and the
--      coordinates of closest point pair
--
-- ARGUMENTS
--        geom1 - the first geometry
--        geom2 - the second geometry
--        tolerance - tolerance which is a number
--        unit  - depends on the coordinate system
-- RETURNS
--       -9999 - if any portion of either geometry has arc(s);
--       dist  - the distance - otherwise
--       geoma - the coordinates of first point of closest approach as a geometry object
--       geomb - the coordinates of second point of closest approach as a geometry object
--
-- Note that: dim1 and dim2 - dimensions of geom1 and geom2 respectively are computed internally.

procedure sdo_closest_points(geom1 IN mdsys.sdo_geometry,
                             geom2 IN mdsys.sdo_geometry,
                             tolerance IN NUMBER,
                             unit      IN VARCHAR2,
                             dist      OUT NUMBER,
                             geoma     OUT mdsys.sdo_geometry,
                             geomb     OUT mdsys.sdo_geometry);
--pragma restrict_references(sdo_closest_points, WNDS, WNPS, RNPS);


--
-- NAME:
--
--      sdo_convexhull
-- DESCRIPTION
--      calculates the convex hull of the given geometry.
--
--      If the geometry is of point type, or has less than three
--      points in total this function will return null.
--
-- ARGUMENTS
--        geom1    - the geometry object
--        dim1     - the dimensional information array corresponding to the
--                   geometry object, usually selected from
--                   SDO_GEOM_METADATA table.
--        tol      - tolerance value.
-- RETURNS
--      A geometry object representing the result of polygon operation.
--

function   sdo_convexhull(geom1 IN mdsys.sdo_geometry,
                          dim1  IN mdsys.sdo_dim_array)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_convexhull, WNDS, WNPS, RNPS);

function   sdo_convexhull(geom1 IN mdsys.sdo_geometry,
                          tol   IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_convexhull, WNDS, WNPS, RNPS);

function   sdo_triangulate(geom IN mdsys.sdo_geometry,
                          tol   IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_triangulate, WNDS, WNPS, RNPS);

-- computes the concavehull of the geometry, assuming
-- that points are likely on the boundary,
-- length: to stop, when the longest edge in the concave hull
-- is shorter than it.
function   sdo_concavehull_boundary(geom       IN mdsys.sdo_geometry,
                                    tol        IN NUMBER,
                                    length     IN NUMBER DEFAULT NULL)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_concavehull_boundary, WNDS, WNPS, RNPS);

-- computes the concavehull of the geometry, assuming
-- that points are not only on the boundary, but also inside.
-- radius: output, the radius of stopping circle
function   sdo_concavehull(geom       IN mdsys.sdo_geometry,
                           tol        IN NUMBER,
                           radius    OUT NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_concavehull, WNDS, WNPS, RNPS);

-- computes the concavehull of the geometry, assuming
-- that points are not only on the boundary, but also inside
function   sdo_concavehull(geom       IN mdsys.sdo_geometry,
                           tol        IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_concavehull, WNDS, WNPS, RNPS);

-- computes the alpha shape of the geometry
-- radius: alpha value = 1/radius
-- flag: 0 -> include points and edges,
--       1 -> doesn't include points and edges
function sdo_alpha_shape(geom       IN mdsys.sdo_geometry,
                         tol        IN NUMBER,
                         radius     IN NUMBER DEFAULT NULL,
                         flag       IN BINARY_INTEGER DEFAULT 0)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


--
-- NAME:
--
--      sdo_centroid
-- DESCRIPTION
--      calculates the centroid of the given geometry.
--
--      The geometry must be of Polygon type; otherwise
--      this function will return null (even for
--      multi-polygon).
--
-- ARGUMENTS
--        geom1    - the polygon-typed geometry object
--        dim1     - the dimensional information array corresponding to the
--                   geometry object, usually selected from
--                   USER_SDO_GEOM_METADATA table.
--        tol      - tolerance value.
-- RETURNS
--      A point geometry object representing the centroid.
--

function   sdo_centroid(geom1 IN mdsys.sdo_geometry,
                        dim1  IN mdsys.sdo_dim_array)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
-- pragma restrict_references(sdo_centroid, WNDS, WNPS, RNPS);

function   sdo_centroid(geom1 IN mdsys.sdo_geometry,
                        tol   IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
--pragma restrict_references(sdo_centroid, WNDS, WNPS, RNPS);

--
-- NAME:
--
-- SDO_MBR
-- DESCRIPTION
-- Returns the MBR of the geometry object. The result will be
-- of type x003 with (1003,3,3) element. That is a rectangle
-- object in 2 dimensions.
--

function sdo_mbr(geom IN mdsys.sdo_geometry,
                        dim IN mdsys.sdo_dim_array)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
--pragma restrict_references(sdo_mbr, WNDS, WNPS, RNPS);

function sdo_mbr(geom IN mdsys.sdo_geometry)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
--pragma restrict_references(sdo_mbr, WNDS, WNPS, RNPS);

function sdo_g3dconv(geom IN mdsys.sdo_geometry,
                     dim IN mdsys.sdo_dim_array)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
--pragma restrict_references(sdo_g3dconv, WNDS, WNPS, RNPS);

function sdo_g3dconv(geom IN mdsys.sdo_geometry)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
--pragma restrict_references(sdo_g3dconv, WNDS, WNPS, RNPS);


function sdo_max_mbr_ordinate(geom IN mdsys.sdo_geometry,
                              dim IN mdsys.sdo_dim_array,
                              ordinate_pos IN NUMBER)
return NUMBER PARALLEL_ENABLE;
pragma restrict_references(sdo_max_mbr_ordinate, WNDS, WNPS, RNPS);

function sdo_max_mbr_ordinate(geom IN mdsys.sdo_geometry,
                              ordinate_pos IN NUMBER)
return NUMBER PARALLEL_ENABLE;
pragma restrict_references(sdo_max_mbr_ordinate, WNDS, WNPS, RNPS);


function sdo_min_mbr_ordinate(geom IN mdsys.sdo_geometry,
                              dim IN mdsys.sdo_dim_array,
                              ordinate_pos IN NUMBER)
return NUMBER PARALLEL_ENABLE;
pragma restrict_references(sdo_min_mbr_ordinate, WNDS, WNPS, RNPS);

function sdo_min_mbr_ordinate(geom IN mdsys.sdo_geometry,
                              ordinate_pos IN NUMBER)
return NUMBER PARALLEL_ENABLE;
pragma restrict_references(sdo_min_mbr_ordinate, WNDS, WNPS, RNPS);



--
-- NAME:
--
--      sdo_pointonsurface
-- DESCRIPTION
--      Returns a point that is guaranteed to be on the surface of
--      the given geometry (polygon type).
--
--      Currently supports only geometries of Polygon type.
--
-- ARGUMENTS
--        geom1    - the polygon geometry object
--        dim1     - the dimensional information array corresponding to the
--                   geometry object, usually selected from
--                   USER_SDO_GEOM_METADATA table.
--        tol      - tolerance value.
-- RETURNS
--      A point geometry object representing the point
--

function   sdo_pointonsurface(geom1 IN mdsys.sdo_geometry,
                              dim1  IN mdsys.sdo_dim_array)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_pointonsurface, WNDS, WNPS, RNPS);

function   sdo_pointonsurface(geom1 IN mdsys.sdo_geometry,
                              tol   IN NUMBER)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_pointonsurface, WNDS, WNPS, RNPS);


--
-- NAME:
--      validate_geometry - validate a geometry object
--      validate_layer    - validate all geometry objects in a column
-- DESCRIPTION
--      Validate geometry based on OGIS rules. Only check known SDO
--      data types. Elements of unknown type are considered valid.
--
--      If a geometry contains multiple polygon rings, validate_geometry
--      andvalidate_layer only check each ring against itself. No ring-ring
--      relationship is examined at this time.
--
-- ARGUMENTS
--      theGeometry     - the geometry object to be validated
--      theDimInfo      - the dimension information corresponding to this
--                        geometry object, usually selected from
--                        SDO_GEOM_METADATA table.
--      tolerance       - tolerance value.
--      geom_table      - geometry object table name
--      geom_column     - geometry object column name
--      pkey_column     - primary key column name
--      result_table    - result table name
--
-- RETURNS
--      'TRUE' if theGeometry is valid. Otherwise it returns Oracle
--      standard error code for known error or 'FALSE' for unknown error.
--      validate_layer procedure populates the given result_table with
--      validation results.
--

function validate_geometry(theGeometry IN MDSYS.SDO_GEOMETRY,
                           theDimInfo  IN MDSYS.SDO_DIM_ARRAY)
return VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
--pragma restrict_references(validate_geometry, WNDS, WNPS, RNPS);

function validate_geometry(theGeometry IN MDSYS.SDO_GEOMETRY,
                           tolerance   IN NUMBER)
return VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
--pragma restrict_references(validate_geometry, WNDS, WNPS, RNPS);

function validate_geometry_with_srid(theGeometry IN MDSYS.SDO_GEOMETRY,
                                     tolerance   IN NUMBER,
                                     conditional IN VARCHAR2 := 'TRUE',
                                     flag10g     IN VARCHAR2 := 'FALSE',
                                     expected_srid IN NUMBER := -1)
return VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
--pragma restrict_references(validate_geometry_with_srid, WNDS, WNPS, RNPS);

function validate_geometry_with_srid(theGeometry IN MDSYS.SDO_GEOMETRY,
                                     theDimInfo  IN MDSYS.SDO_DIM_ARRAY,
                                     conditional IN VARCHAR2 := 'TRUE',
                                     flag10g     IN VARCHAR2 := 'FALSE',
                                     expected_srid IN NUMBER := -1)
return VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
--pragma restrict_references(validate_geometry_with_srid, WNDS, WNPS, RNPS);

function validate_geometry_with_context(theGeometry IN MDSYS.SDO_GEOMETRY,
                                      theDimInfo  IN MDSYS.SDO_DIM_ARRAY,
                                      conditional IN VARCHAR2 := 'TRUE',
                                      flag10g     IN VARCHAR2 := 'FALSE')
return VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
--pragma restrict_references(validate_geometry_with_context, WNDS, WNPS, RNPS);

function validate_geometry_with_context(theGeometry IN MDSYS.SDO_GEOMETRY,
                                        tolerance   IN NUMBER,
                                        conditional IN VARCHAR2 := 'TRUE',
                                        flag10g     IN VARCHAR2 := 'FALSE')
return VARCHAR2 PARALLEL_ENABLE;
--pragma restrict_references(validate_geometry_with_context, WNDS, WNPS, RNPS);

procedure validate_layer(geom_table  IN VARCHAR2,
                         geom_column IN VARCHAR2,
                         pkey_column IN VARCHAR2,
                         result_table IN VARCHAR2,
                         commit_interval IN NUMBER := -1);

procedure validate_layer_with_context(
            geom_table IN VARCHAR2,
            geom_column IN VARCHAR2,
            result_table IN VARCHAR2,
            commit_interval IN NUMBER := -1,
            conditional IN VARCHAR2 := 'TRUE',
            flag10g     IN VARCHAR2 := 'FALSE',
            geom_schema IN VARCHAR2 DEFAULT NULL) PARALLEL_ENABLE;

procedure vallayer_with_context_lrs(geom_table  IN VARCHAR2,
                                    geom_column IN VARCHAR2,
                                    pkey_rowid_column IN VARCHAR2,
                                    result_table IN VARCHAR2,
                                    commit_interval IN NUMBER := -1);

--
-- NAME:
--
--      sdo_arc_densify
-- DESCRIPTION
--      If the geometry contains arcs, this function will densify/segment
--      all acrs in the geometry.
--
-- ARGUMENTS
--        geom    - the geometry object
--        dim     - the dimensional information array corresponding to the
--                   geometry object, usually selected from
--                   SDO_GEOM_METADATA table.
--        tol      - tolerance value.
-- RETURNS
--      A geometry object representing the result of polygon operation.
--

function   sdo_arc_densify(geom IN mdsys.sdo_geometry,
                           dim  IN mdsys.sdo_dim_array,
                           params IN VARCHAR2)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_arc_densify, WNDS, WNPS, RNPS);

function   sdo_arc_densify(geom IN mdsys.sdo_geometry,
                           tol  IN NUMBER,
                           params IN VARCHAR2)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_arc_densify, WNDS, WNPS, RNPS);

function get_dim_array(geom IN MDSYS.SDO_GEOMETRY, tol IN NUMBER)
return MDSYS.SDO_DIM_ARRAY DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(get_dim_array, WNDS, WNPS, RNPS);

--
-- NAME:
--
--      sdo_is_nurbscurve
-- DESCRIPTION
--      This function detects if the geometry contains NURBS curves.
--      Used to return unsupported operation error for functions
--      which cannot operate on NURBS curves.
--
-- ARGUMENTS
--      geom    - the geometry object
-- RETURNS
--      TRUE if NURBS curve is present in the geometry, FALSE otherwise.
--

function sdo_is_nurbscurve(geom IN MDSYS.SDO_GEOMETRY)
return VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;
pragma restrict_references(sdo_is_nurbscurve, WNDS, WNPS, RNPS);

FUNCTION sdo_insert_log_filter(ind_schema   IN VARCHAR2,
                               ind_name     IN VARCHAR2,
                               indpart_name IN VARCHAR2,
                               min_x        IN NUMBER,
                               max_x        IN NUMBER,
                               min_y        IN NUMBER,
                               max_y        IN NUMBER,
                               min_z        IN NUMBER,
                               max_z        IN NUMBER)
  RETURN VARCHAR2 PARALLEL_ENABLE;

PROCEDURE g3d_parameters(srid                    IN NUMBER,
                         sm_mjr_axis             OUT NUMBER,
                         inv_fltn                OUT NUMBER,
                         g3d_geog_crs_uom_factor OUT NUMBER);

end SDO_GEOM;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_CATALOG" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
4ae 17d
iNcABBdKlrHZSsf6wPUHRC9h+CUwg5W3JAw2fy+VO/5eGsNLwu0n0YgDr+QL8W6HKnae3xWU
knN/MLnNxeLbIbzAj8Y0NEL0yrtnjDAQe5uG7s2lwM9vaZsRicgC5xCL8cg2Gu6E96yiXOcC
CDJBk+Y5/dJDYhe0o10UgPXK5V8f2sqt4VVxKOAutsGv7t4ll950y4LNkzm6biBd9bCuVSmC
Q2cqcP/4V8e8U2IlIAXoxJAtb/JAZxiNUn23vbz3wKXdfyXgJeZs5ZQ6UYIyDYhv7P1eUaxf
bdRuSKWI3upMoyCxLaH+fuVc5G+hHY7YBqS0m7CHQjQPN4vOwX2Uo3HQ+aok9oH4gioO6mYm
fDEZcTQdDFulYg==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_MIGRATE" authid current_user AS

   --
   --  NAME:
   --     to_734
   --  DESCRIPTION:
   --     Update an SDO 7.3.3 layer structure to a 7.3.4 layer structure.
   --  ARGUMENTS:
   --     sn        - Schema Name of owner of layer
   --     layer     - LAYER name
   --     tess_type - TESSellation TYPE
   --     param     - SDO_LEVEL or SDO_NUMTILES value
   --  USAGE:
   --     For FIXED size tessellation:
   --
   --        SQL> execute sdo_migrate.to_734('HERMAN','ROADS','FIXED',10)
   --
   --     For VARIABLE sized tessellation
   --
   --        SQL> execute sdo_migrate.to_734('HERMAN','ROADS','VARIABLE',4)
   --
   --     In each case the value of the PARAM argument is evaluated relative
   --     to the value of the TESS_TYPE arguments.  If the TESS_TYPE aregument
   --     is FIXED then PARAM is the SDO_LEVEL values.  If the TESS_TYPE
   --     argument is VARIABLE them the PARAM value is the SDO_NUMTILES value.
   --
  /* deprecated
   procedure to_734( sn        varchar2,
                     layer     varchar2,
                     tess_type varchar2,
                     param     integer ); */

   --
   -- Migrate from 734 format to 81x object format
   -- Index is NOT built!
   --
   -- The geom table and dim tables will be migrated.
   -- layer_gtype can either be 'POINT' or 'NOTPOINT' ('NOTPOINT' by default);
   -- update_flag can either be 'INSERT' or 'UPDATE' ('INSERT' by default);
   --
   procedure to_81x(layer        IN varchar2,
                    newtabname   IN varchar2,
                    gidcolumn    IN varchar2,
                    geocolname   IN varchar2,
                    layer_gtype  IN varchar2 := 'NOTPOINT',
                    update_flag  IN varchar2 := 'INSERT');

   procedure to_current(layer        IN varchar2,
                    newtabname   IN varchar2,
                    gidcolumn    IN varchar2,
                    geocolname   IN varchar2,
                    layer_gtype  IN varchar2 := 'NOTPOINT',
                    update_flag  IN varchar2 := 'INSERT');

   --
   -- Migrate from 815 format to 816 object format
   --
   -- All geometry objects in geom table will be migrated so that
   -- their GTYPE and ETYPE will be of 8.1.6 style.
   --
   procedure from_815_to_81x(tabname   IN varchar2,
                             commit_int IN number := -1);

   procedure to_current(tabname IN varchar2,
                        column_name IN varchar2 := NULL,
                        commit_int IN number := -1);
   --
   -- Migrate OGIS metadata entries in MDSYS's schema
   -- Called at the source of migration.
   -- This procedure will produce a temporary table called
   -- SDO_GC_MIG that needs to be exported with other data.
   --
   procedure ogis_metadata_from;

   --
   -- Migrate OGIS metadata entries in MDSYS's schema
   -- Called at the destination of migration
   -- This call expects SDO_GC_MIG to exist.
   --
   procedure ogis_metadata_to;
  function to_current(geom IN MDSYS.SDO_GEOMETRY,
                    dim  IN MDSYS.SDO_DIM_ARRAY)
  return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


END sdo_migrate;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDOCURPKG" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
120 eb
purE+HEygKLMU6mlWUHy115JCskwgzJKfyisfC8CkDqUIEbbldQ7Xt7V0w0hgPYG3AaPcOEI
tRKjZ6H1RZi7QxkShynW5VZAueIs7Z1MzMSIL9EZrCeE4mYKWDeAhDmtbTA+/W6UKe1m9215
LUFLVHDoAm6KYCSkPjrN3fYFL2So8fjb1yxreiPpnZ5L4R+uY2OJip2mGUbQ81YMFHKdbIta
WJMXXfy9lybpjw==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_PRIDX" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
70c 26c
1Vb7OdGcn4MkxsQ691juDt+Ispwwg5WNLUhofHRA2ppeuHodYKlo7PSnMEovk9MWrVMToJEp
d1FMks5DPimvwM3HSN4Ahcr7CbW1zMId5R+KvT+8ENmaqs8Q+ERX6BeMNfBHXQkc739waM2m
Soxe+jBbAL5HYBdgsV65/4hYuE9RajePlJMA7yyjWgNUo356OIdRNDuCBQBTrrQuo8rqCJ/W
dzF2HeX4Gg+PBBDheMukUpkaEM7n7AnXiWCfLCawXG4TBL9Pn7xsOOWozF+RYhuDA6xN7Uck
NNIoUW1MljWZOahBhtaxlwSwKZFos2Tx844NdalfhDQbxTXCTG/MnKzxyxvIKkrSEhSNPPHX
XUsDNhKhFF7DbXe5dLtooikLmcIc7Ogz333dtqrZIousIFnPyWN+klQHBwGMDF1tOR7Mmls/
kw+SLFDqWE9K23NL4c8bMv6ucMcJn1/0U0Bi6oczvh9hdljPt7+ZMz2HnefZLjSzfwiS4+AV
mSYSQGZIg8oM63fWYhbhEukjkcXvkoQLgdxdci4pIMHCtT2+NHgWiSC1GuCXeWB9YJmw3dAp
ozA61Vy9wRtrdlTARXzLwOPcrg8/HZRJQbk=
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."RTREE_IDX" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
117 f3
blzakgw538g1KC+oV0zCYIhHYFIwg41KLcsVfHSiWPiUHDXlBFTavi0MYqOwwPHhXm97Syt0
zyIC+y2p2y5JVZjrsn3LUxd1IE4hQx5Dy3Xg1TbRWC3UbuH9cBam7BrRGOovbCJDIS9gQA3K
Rse0I8CbnqL9D6xitu/s9rOfQwn5Zpqz46TS0m7nXccPBShxOs4o/3u8nWI/TqGrxpGe7JLs
O8VUvVarx297XApb5JMkBw==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_RTREE_ADMIN" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
91c 2de
pyftdoOvCB9ssdYEQSTt4tuLrM0wg9dcACAFfC/Nig9SC3TnpMInUfq36UYs/Pf1zdGiN5F9
UG9a+LWzt3bq8YxU8naOQ903vL/PuwiQPedCSWHnnbmqi8aa0CgoOh5z/iAkZxpU9kRl82tt
rUQULzgNo/vD+vpN7dbyE+P1A+kgNdpLxXYVxg7PYf3FDgC8ED//sv+clO7iYmi98Q0OBeGg
gxeI/lDh7fGj2gISInXmB2HIsyLpDlrjvgr/bwvNXK+dmJfjYlOReFr2uWcEtoGxje/M/0xJ
fc3gGYSF26sR9j4s2tmj/ZWKai7IKqPuRpXzHr2MgAqMb5XUXzgO9RdV94Z+Hwbjso8dLu3G
O80EKaaerXkr2qRRp1Dn09QO+n2jb2yE/dO61VOE4xoBR0aUwCNswpfBl5nOisPEeDS2ux7e
HZZXheS1uluuUoaeaqft/w4rtMDW0bR39F2qyHhF0tEbkEIh6hxB/E/s1st2NcssB7m7KZ1a
/PpFlbtQM4HTXGZG1Hj64+NYNNA6/KEkgO1uRvqOFnSbGJNYGmmmR92DugOvpOxDkyniBh9t
Rbd8U9AFXGZYhfBfk2qiplSogA12JNuzpqd+yw+4Tar0zocwZJIJraredTX+RJM2Eee/Orf0
B8tlu1CTKUVGs9bV8+mnIu16ud3Sp7z59aUjmtB2ydQmsPWr7+yrG/UnL+prMDDZKKqm5bjn
SQ==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_AGGR" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
111 df
Iaekbg7juCjkWkUcBP/SPFgS/MIwg43wf8vhf3Q2Jk6enMqQzt1cGwhDZuPWfrBTxbW1RNz7
skRR0v8w/vQISlhnXv11A6afBQystOnjefVsciFGO8egJc4Ly2zGirOt3dJrV3r153k/3rdE
dlQSWd3tGVrRNYVFfHddizIrASeNWUqBwdsFbjKatR3ppVT5VEaiYAmZHw3TEE9XO7AfjRah
WA==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_OLS" AUTHID current_user AS

  FUNCTION generate_error(
    openls_version  VARCHAR2,
    message         VARCHAR2,
    requestId       VARCHAR2)
      RETURN XMLTYPE;

  FUNCTION generate_error(
    openls_version VARCHAR2,
    requestId      VARCHAR2)
      RETURN XMLTYPE;

  FUNCTION PostClob(
    url       IN VARCHAR2,
    payload   IN CLOB)
      RETURN CLOB;

  FUNCTION PostXml(
    url       IN VARCHAR2,
    payload   IN XMLTYPE)
      RETURN XMLTYPE;

  FUNCTION getNS(
    nsShortcut  VARCHAR2,
    openLsVersion   VARCHAR2)
      RETURN VARCHAR2;

  FUNCTION getNS(
    openLsVersion   VARCHAR2)
      RETURN VARCHAR2;

  FUNCTION extractValue(
    xml   XMLTYPE,
    xPath VARCHAR2,
    ns VARCHAR2)
      RETURN VARCHAR2;

  FUNCTION extract(
    xml   XMLTYPE,
    xPath VARCHAR2,
    ns VARCHAR2)
      RETURN XMLTYPE;

  FUNCTION getBasisXml(
    node_name       VARCHAR2,
    openls_version  VARCHAR2)
      RETURN XMLTYPE;

  FUNCTION makeOpenLSClobRequest(
    request         CLOB)
      RETURN CLOB;

  FUNCTION makeOpenLSSoapRequest(
    request XMLTYPE)
      RETURN XMLTYPE;

  FUNCTION makeOpenLSRequest(
    request XMLTYPE)
      RETURN XMLTYPE;

  FUNCTION makeOpenLS10Request(
    request XMLTYPE)
      RETURN XMLTYPE;

  FUNCTION determine_classification(
    openls                    XMLTYPE,
    classification_criterion  VARCHAR2,
    openls_version            VARCHAR2)
      RETURN VARCHAR2;

  PROCEDURE parse_coord_pair(
    coords  IN  VARCHAR2,
    x       OUT NUMBER,
    y       OUT NUMBER);

  PROCEDURE handle_openls_error(
    specific_error_message  VARCHAR2,
    specific_error_code     NUMBER,
    default_error_message   VARCHAR2);

END sdo_ols;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_TOPO" AUTHID current_user AS

 -- In memory representation of USER_SDO_TOPO_INFO
 TYPE topo_metadata IS RECORD
 (
   owner            VARCHAR2(32),
   topology         VARCHAR2(20),
   topology_id      NUMBER,
   tolerance        NUMBER,
   srid             NUMBER,
   table_schema     VARCHAR2(64),
   table_name       VARCHAR2(62),
   column_name      VARCHAR2(32),
   tg_layer_id      NUMBER,
   tg_layer_type    VARCHAR2(10),
   tg_layer_level   NUMBER,
   child_layer_id   NUMBER
 );

 PROCEDURE create_topology (Topology  IN varchar2, tolerance IN NUMBER,
                        SRID IN NUMBER default NULL,
                        node_table_storage in varchar2 DEFAULT NULL,
                        edge_table_storage in varchar2 DEFAULT NULL,
                        face_table_storage in varchar2 DEFAULT NULL,
                        history_table_storage in varchar2 DEFAULT NULL,
                        Digits_Right_Of_Decimal in number default 16,
                        Topology_ID in number default NULL );

 PROCEDURE drop_topology (Topology  IN varchar2);

 PROCEDURE add_topo_geometry_layer (Topology             IN varchar2,
                        Table_Name           IN varchar2,
                        Column_Name          IN varchar2,
                        Topo_Geometry_Layer_Type   IN varchar2,
                        Relation_table_storage in varchar2 DEFAULT NULL,
                        Child_Layer_id in number DEFAULT NULL,
                        Layer_ID in number default NULL);

 PROCEDURE delete_topo_geometry_layer (Topology     IN varchar2,
                           Table_Name   IN varchar2,
                           Column_Name  IN varchar2);

 PROCEDURE initialize_metadata (Topology IN varchar2);

 PROCEDURE prepare_for_export (Topology IN varchar2);

 PROCEDURE initialize_after_import (Topology IN varchar2,
                      tg_layer_owner IN varchar2 default NULL);

/*
 --
 -- For a given sdo_topo_geometry, this procedure gets its boundary and
 -- interior.
 --
 PROCEDURE get_feature_properties
 (
   mtdt      IN  TOPO_METADATA,
   tg_id     IN  NUMBER,                                --- feature id
   tg_type   IN  NUMBER,                                --- feature type
   nd_bdy    OUT NOCOPY SDO_TOPO_NSTD_TBL,              --- boundary nodes
   nd_int    OUT NOCOPY SDO_TOPO_NSTD_TBL,              --- interior nodes
   eg_bdy    OUT NOCOPY SDO_TOPO_NSTD_TBL,              --- boundary edges
   eg_int    OUT NOCOPY SDO_TOPO_NSTD_TBL,              --- interior edges
   fc_int    OUT NOCOPY SDO_TOPO_NSTD_TBL               --- interior faces
 );

 PROCEDURE get_topo_properties
 (
   Topology   IN VARCHAR2,
   topo_elem_array   IN   SDO_TOPO_OBJECT_ARRAY,
   tg_type   IN  NUMBER,                                --- feature type
   nd_bdy    OUT NOCOPY SDO_TOPO_NSTD_TBL,              --- boundary nodes
   nd_int    OUT NOCOPY SDO_TOPO_NSTD_TBL,              --- interior nodes
   eg_bdy    OUT NOCOPY SDO_TOPO_NSTD_TBL,              --- boundary edges
   eg_int    OUT NOCOPY SDO_TOPO_NSTD_TBL,              --- interior edges
   fc_int    OUT NOCOPY SDO_TOPO_NSTD_TBL               --- interior faces
 );
*/

 FUNCTION get_interacting_tgids
  (
   base_layer_id  IN   NUMBER,             --- base layer id
   q_feature      IN   SDO_TOPO_GEOMETRY,  --- the query feature
   mask           IN   VARCHAR2            --- the query
  )
 RETURN SDO_LIST_TYPE DETERMINISTIC;

 FUNCTION get_interacting_tgids
  (
   tp_id            IN NUMBER,             -- topology id
   base_layer_id    IN   NUMBER,             --- base layer id
   topo_elem_array  IN   SDO_TOPO_OBJECT_ARRAY,  --- the query topo elements
   mask             IN   VARCHAR2            --- the query
  )
 RETURN SDO_LIST_TYPE DETERMINISTIC;

 FUNCTION relate (
  geom1 IN SDO_TOPO_GEOMETRY, geom2 IN SDO_TOPO_GEOMETRY, mask  IN VARCHAR2
 ) RETURN VARCHAR2 DETERMINISTIC;

 FUNCTION relate (
  geom IN SDO_TOPO_GEOMETRY, topo_elem_array IN SDO_TOPO_OBJECT_ARRAY,
                            mask  IN VARCHAR2
 ) RETURN VARCHAR2 DETERMINISTIC;

/*
 -- an overloading version of relate
 FUNCTION relate(
   geom1        IN  SDO_TOPO_GEOMETRY,
   nd_bdy_2     IN  SDO_TOPO_NSTD_TBL,
   nd_int_2     IN  SDO_TOPO_NSTD_TBL,
   eg_bdy_2     IN  SDO_TOPO_NSTD_TBL,
   eg_int_2     IN  SDO_TOPO_NSTD_TBL,
   fc_int_2     IN  SDO_TOPO_NSTD_TBL,
   mask         IN  VARCHAR2
 ) RETURN VARCHAR2 DETERMINISTIC;

 -- an overloading version of relate
 FUNCTION relate
 (
   mtdt      IN TOPO_METADATA,
   tg_id     IN NUMBER,
   tg_type   IN NUMBER,
   nd_bdy    IN SDO_TOPO_NSTD_TBL,              --- geom2: boundary nodes
   nd_int    IN SDO_TOPO_NSTD_TBL,              ---        interior nodes
   eg_bdy    IN SDO_TOPO_NSTD_TBL,              ---        boundary edges
   eg_int    IN SDO_TOPO_NSTD_TBL,              ---        interior edges
   fc_int    IN SDO_TOPO_NSTD_TBL,              ---        interior faces
   mask      IN VARCHAR2
 ) RETURN VARCHAR2 DETERMINISTIC;

 -- another overloading version of relate
 FUNCTION relate (
   tsname    IN VARCHAR2,             tabname   IN VARCHAR2,
   colname   IN VARCHAR2,             rowid     IN VARCHAR2,
   nd_bdy    IN SDO_TOPO_NSTD_TBL,    nd_int    IN SDO_TOPO_NSTD_TBL,
   eg_bdy    IN SDO_TOPO_NSTD_TBL,    eg_int    IN SDO_TOPO_NSTD_TBL,
   fc_int    IN SDO_TOPO_NSTD_TBL,    mask      IN VARCHAR2
 ) RETURN VARCHAR2 DETERMINISTIC;

*/
 -- another overloaded version of relate
  FUNCTION relate (
   feature1 IN sdo_topo_geometry, feature2 IN sdo_geometry, mask IN VARCHAR2
  ) RETURN VARCHAR2 DETERMINISTIC;

 FUNCTION get_face_boundary (Topology IN varchar2, face_id IN number,
                             All_Edges IN varchar2 DEFAULT 'FALSE')
 RETURN SDO_LIST_TYPE DETERMINISTIC;

 FUNCTION get_topo_objects(Topology IN varchar2,
                       topo_geometry_layer_id IN number,
                       topo_geometry_id IN number )
 RETURN SDO_TOPO_OBJECT_ARRAY DETERMINISTIC;


 FUNCTION get_topo_objects(Topology IN varchar2, geometry IN SDO_GEOMETRY)
 RETURN SDO_TOPO_OBJECT_ARRAY DETERMINISTIC;

 FUNCTION internal_get_tgids(Topology IN varchar2, geometry IN SDO_GEOMETRY,
                           in_tg_layer_id IN NUMBER DEFAULT NULL,
                            operator IN varchar2)
 RETURN SDO_LIST_TYPE DETERMINISTIC;

 FUNCTION internal_get_tgids(Topology IN varchar2,
                             q_tg_layer_id IN NUMBER, q_tg_id in number,
                             in_tg_layer_id IN NUMBER DEFAULT NULL,
                             operator IN varchar2)
 RETURN SDO_LIST_TYPE DETERMINISTIC;

 Function tg_insert_relation (topology varchar2, tg_layer_id number,
                              topo_ids SDO_TOPO_OBJECT_ARRAY, gtype number,
                              input_tg_id number, input_tg_attribute varchar2)
 return NUMBER;

 Function tg_insert_relation (topology varchar2, tg_layer_id number,
                              topo_ids SDO_TGL_OBJECT_ARRAY, gtype number,
                              input_tg_id number, input_tg_attribute varchar2,
                              child_lid number)
 return NUMBER;

 PROCEDURE sdo_topo_crt_rlids_view(Topology in varchar2, topo_id number);

 PROCEDURE lockRow_UniverseFace(topologyid in number);

 FUNCTION align_linear_geometry(geometry1 SDO_GEOMETRY, geometry2 SDO_GEOMETRY,
                                              tolerance number )
 RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION align_edge_geometry(geometry1 SDO_GEOMETRY, geometry2 SDO_GEOMETRY,
                                              tolerance number, dgts number)
 RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

 FUNCTION align_point_geometry(geometry1 SDO_GEOMETRY, geometry2 SDO_GEOMETRY,
                                           tolerance number)
 RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE ;

 FUNCTION get_internal_geometry(geom sdo_geometry,
                          nodeIds sdo_number_array, dim sdo_dim_array)
 RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

END SDO_TOPO;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_TOPO_MAP" AUTHID current_user AS

 PROCEDURE set_max_memory_size(bytes NUMBER)
    AS LANGUAGE JAVA NAME
    'oracle.aurora.vm.OracleRuntime.setMaxMemorySize(long)';
 PROCEDURE create_topo_map(topology VARCHAR2, topo_map VARCHAR2,
    number_of_edges NUMBER, number_of_nodes NUMBER,
    number_of_faces NUMBER)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.createTopoMap(java.lang.String,
     java.lang.String, int, int, int)';
 PROCEDURE create_topo_map(topology VARCHAR2, topo_map VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.createTopoMap(java.lang.String,
     java.lang.String)';
 FUNCTION list_topo_maps RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.listTopoMaps()
     return java.lang.String';
 FUNCTION get_topo_name(topo_map VARCHAR2) RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getTopoName(java.lang.String)
     return java.lang.String';
 FUNCTION load_topo_map(topo_map VARCHAR2,
    xmin NUMBER, ymin NUMBER, xmax NUMBER, ymax NUMBER,
    allow_updates VARCHAR2)
    RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.loadTopoMap(
     java.lang.String,
     oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.sql.NUMBER, java.lang.String) return java.lang.String';
 FUNCTION load_topo_map(topo_map VARCHAR2,
    xmin NUMBER, ymin NUMBER, xmax NUMBER, ymax NUMBER,
    allow_updates VARCHAR2, build_indexes VARCHAR2)
    RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.loadTopoMap(
     java.lang.String,
     oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.sql.NUMBER, java.lang.String, java.lang.String)
    return java.lang.String';
 FUNCTION load_topo_map(topo_map VARCHAR2,
    xmin NUMBER, ymin NUMBER, xmax NUMBER, ymax NUMBER,
    allow_updates VARCHAR2, build_indexes VARCHAR2, next_load VARCHAR2)
    RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.loadTopoMap(
     java.lang.String,
     oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.sql.NUMBER, java.lang.String, java.lang.String,  java.lang.String)
    return java.lang.String';
 FUNCTION load_topo_map(topo_map VARCHAR2, allow_updates VARCHAR2)
    RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.loadTopoMap(
     java.lang.String, java.lang.String) return java.lang.String';
 FUNCTION load_topo_map(topo_map VARCHAR2,
    allow_updates VARCHAR2, build_indexes VARCHAR2)
    RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.loadTopoMap(
     java.lang.String,
     java.lang.String, java.lang.String) return java.lang.String';
 PROCEDURE load_topo_map(topo_map VARCHAR2,
    xmin NUMBER, ymin NUMBER, xmax NUMBER, ymax NUMBER,
    allow_updates VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.loadTopoMap2(
     java.lang.String,
     oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.sql.NUMBER, java.lang.String)';
 PROCEDURE load_topo_map(topo_map VARCHAR2,
    xmin NUMBER, ymin NUMBER, xmax NUMBER, ymax NUMBER,
    allow_updates VARCHAR2, build_indexes VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.loadTopoMap2(
     java.lang.String,
     oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.sql.NUMBER, java.lang.String, java.lang.String)';
 PROCEDURE load_topo_map(topo_map VARCHAR2, allow_updates VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.loadTopoMap2(
     java.lang.String, java.lang.String)';
 PROCEDURE load_topo_map(topo_map VARCHAR2,
    allow_updates VARCHAR2, build_indexes VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.loadTopoMap2(
     java.lang.String,
     java.lang.String, java.lang.String)';
 PROCEDURE create_edge_index(topo_map VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.createEdgeIndex(
     java.lang.String)';
 PROCEDURE create_face_index(topo_map VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.createFaceIndex(
     java.lang.String)';
 PROCEDURE update_topo_map
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.updateTopoMap()';
 PROCEDURE commit_topo_map
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.commitTopoMap()';
 PROCEDURE rollback_topo_map
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.rollbackTopoMap()';
 PROCEDURE clear_topo_map(topo_map VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.clearTopoMap(
     java.lang.String)';
 PROCEDURE drop_topo_map(topo_map VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.dropTopoMap(java.lang.String)';
 FUNCTION validate_topo_map(topo_map VARCHAR2) RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.validateTopoMap(
     java.lang.String) return java.lang.String';
 FUNCTION validate_topo_map(topo_map VARCHAR2, level NUMBER)
    RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.validateTopoMap(
     java.lang.String, oracle.sql.NUMBER) return java.lang.String';

 FUNCTION search_face_rtree_topo_map(topo_map VARCHAR2, xmin NUMBER,
    ymin NUMBER, xmax NUMBER, ymax NUMBER, capacity NUMBER)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.searchFaceRTreeTopoMap(
     java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER
     ) return oracle.spatial.type.SdoNumberArray';

 FUNCTION search_edge_rtree_topo_map(topo_map VARCHAR2, xmin NUMBER,
    ymin NUMBER, xmax NUMBER, ymax NUMBER, capacity NUMBER)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.searchEdgeRTreeTopoMap(
     java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER
     ) return oracle.spatial.type.SdoNumberArray';

 FUNCTION get_node_changes
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNodeChanges()
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION get_edge_changes
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getEdgeChanges()
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION get_face_changes
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getFaceChanges()
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION get_node_additions
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNodeAdditions()
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION get_edge_additions
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getEdgeAdditions()
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION get_face_additions
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getFaceAdditions()
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION get_node_deletions
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNodeDeletions()
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION get_edge_deletions
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getEdgeDeletions()
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION get_face_deletions
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getFaceDeletions()
     return oracle.spatial.type.SdoNumberArray';

 FUNCTION validate_topology(topology VARCHAR2)
    RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.validateTopology(
     java.lang.String) return java.lang.String';
 FUNCTION validate_topology(topology VARCHAR2, prevent_updates VARCHAR2)
    RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.validateTopology(
     java.lang.String, java.lang.String) return java.lang.String';
 FUNCTION validate_topology(topology VARCHAR2, prevent_updates VARCHAR2,
    level NUMBER) RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.validateTopology(
     java.lang.String, java.lang.String, oracle.sql.NUMBER)
     return java.lang.String';
 FUNCTION validate_topology(topology VARCHAR2,
    xmin NUMBER, ymin NUMBER, xmax NUMBER, ymax NUMBER) RETURN VARCHAR2
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.validateTopology(
     java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.sql.NUMBER, oracle.sql.NUMBER) return java.lang.String';
 FUNCTION validate_topology(topology VARCHAR2,
    xmin NUMBER, ymin NUMBER, xmax NUMBER, ymax NUMBER,
    prevent_updates VARCHAR2) RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.validateTopology(
     java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.sql.NUMBER, oracle.sql.NUMBER, java.lang.String)
     return java.lang.String';
 FUNCTION validate_topology(topology VARCHAR2,
    xmin NUMBER, ymin NUMBER, xmax NUMBER, ymax NUMBER,
    prevent_updates VARCHAR2, level NUMBER) RETURN VARCHAR2 DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.validateTopology(
     java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.sql.NUMBER, oracle.sql.NUMBER, java.lang.String,
     oracle.sql.NUMBER) return java.lang.String';

 FUNCTION add_edge(topology VARCHAR2,
    node_id1 NUMBER, node_id2 NUMBER, geom SDO_GEOMETRY)
    RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addEdge(java.lang.String,
     oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.spatial.type.SdoGeometry) return oracle.sql.NUMBER';
 FUNCTION add_loop(topology VARCHAR2,
    node_id NUMBER, geom SDO_GEOMETRY) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addLoop(java.lang.String,
     oracle.sql.NUMBER,
     oracle.spatial.type.SdoGeometry) return oracle.sql.NUMBER';
 FUNCTION get_edge_coords(topology VARCHAR2, topo_map VARCHAR2,
    edge_id NUMBER) RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getEdgeCoords(java.lang.String,
     java.lang.String, oracle.sql.NUMBER)
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION add_node(topology VARCHAR2,
    edge_id NUMBER, point SDO_GEOMETRY, coord_index NUMBER,
    is_new_shape_point VARCHAR2) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addNode(java.lang.String,
     oracle.sql.NUMBER,
     oracle.spatial.type.SdoGeometry, int, java.lang.String)
     return oracle.sql.NUMBER';
 FUNCTION add_node(topology VARCHAR2,
    edge_id NUMBER, x NUMBER, Y NUMBER, coord_index NUMBER,
    is_new_shape_point VARCHAR2) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addNode(java.lang.String,
     oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.sql.NUMBER, int, java.lang.String)
     return oracle.sql.NUMBER';
 FUNCTION add_isolated_node(topology VARCHAR2,
    face_id NUMBER, point SDO_GEOMETRY) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addIsolatedNode(
     java.lang.String, oracle.sql.NUMBER,
     oracle.spatial.type.SdoGeometry) return oracle.sql.NUMBER';
 FUNCTION add_isolated_node(topology VARCHAR2,
    face_id NUMBER, x NUMBER, y NUMBER) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addIsolatedNode(
     java.lang.String, oracle.sql.NUMBER,
     oracle.sql.NUMBER, oracle.sql.NUMBER) return oracle.sql.NUMBER';
 FUNCTION add_isolated_node(topology VARCHAR2,
    point SDO_GEOMETRY) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addIsolatedNode(
     java.lang.String,
     oracle.spatial.type.SdoGeometry) return oracle.sql.NUMBER';
 FUNCTION add_isolated_node(topology VARCHAR2,
    x NUMBER, y NUMBER) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addIsolatedNode(
     java.lang.String, oracle.sql.NUMBER,
     oracle.sql.NUMBER) return oracle.sql.NUMBER';
 FUNCTION get_node_coord(topology VARCHAR2, topo_map VARCHAR2,
    node_id NUMBER) RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNodeCoord(java.lang.String,
     java.lang.String, oracle.sql.NUMBER)
     return oracle.spatial.type.SdoGeometry';
 PROCEDURE move_node(topology VARCHAR2,
    node_id NUMBER, edges_coords SDO_EDGE_ARRAY)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.moveNode(
     java.lang.String, oracle.sql.NUMBER,
     oracle.spatial.type.SdoEdgeArray)';
 PROCEDURE move_node(topology VARCHAR2,
    node_id NUMBER, edges_coords SDO_EDGE_ARRAY,
    moved_iso_nodes OUT SDO_NUMBER_ARRAY,
    moved_iso_edges OUT SDO_NUMBER_ARRAY,
    allow_iso_moves VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.moveNode(
     java.lang.String, oracle.sql.NUMBER,
     oracle.spatial.type.SdoEdgeArray,
     oracle.spatial.type.SdoNumberArray[],
     oracle.spatial.type.SdoNumberArray[],
     java.lang.String)';
 PROCEDURE move_isolated_node(topology VARCHAR2,
    node_id NUMBER, point SDO_GEOMETRY)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.moveIsolatedNode(
     java.lang.String, oracle.sql.NUMBER,
     oracle.spatial.type.SdoGeometry)';
 PROCEDURE move_isolated_node(topology VARCHAR2,
    node_id NUMBER, point SDO_GEOMETRY,
                allow_face_change VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.moveIsolatedNode(
     java.lang.String, oracle.sql.NUMBER,
     oracle.spatial.type.SdoGeometry,java.lang.String)';
 PROCEDURE move_isolated_node(topology VARCHAR2,
    node_id NUMBER, x NUMBER, y NUMBER)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.moveIsolatedNode(
     java.lang.String, oracle.sql.NUMBER,
     oracle.sql.NUMBER, oracle.sql.NUMBER)';
 PROCEDURE move_isolated_node(topology VARCHAR2,
    node_id NUMBER, x NUMBER, y NUMBER,
               allow_face_change VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.moveIsolatedNode(
     java.lang.String, oracle.sql.NUMBER,
     oracle.sql.NUMBER, oracle.sql.NUMBER,java.lang.String)';
 PROCEDURE remove_node(topology VARCHAR2,
    node_id NUMBER)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.removeNode(
     java.lang.String, oracle.sql.NUMBER)';
 PROCEDURE remove_obsolete_nodes(topology VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.removeObsoleteNodes(
     java.lang.String)';
 PROCEDURE move_edge(topology VARCHAR2,
    edge_id NUMBER, s_node_id NUMBER, t_node_id NUMBER,
    edge_coords SDO_NUMBER_ARRAY)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.moveEdge(
     java.lang.String,
     oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.spatial.type.SdoNumberArray)';
 PROCEDURE move_edge(topology VARCHAR2,
    edge_id NUMBER, s_node_id NUMBER, t_node_id NUMBER,
    edge_coords SDO_NUMBER_ARRAY,
    moved_iso_nodes OUT SDO_NUMBER_ARRAY,
    moved_iso_edges OUT SDO_NUMBER_ARRAY,
    allow_iso_moves VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.moveEdge(
     java.lang.String,
     oracle.sql.NUMBER, oracle.sql.NUMBER, oracle.sql.NUMBER,
     oracle.spatial.type.SdoNumberArray,
     oracle.spatial.type.SdoNumberArray[],
     oracle.spatial.type.SdoNumberArray[],
     java.lang.String)';
 PROCEDURE remove_edge(topology VARCHAR2,
    edge_id NUMBER)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.removeEdge(
     java.lang.String, oracle.sql.NUMBER)';
 PROCEDURE change_edge_coords(topology VARCHAR2,
    edge_id NUMBER, geom SDO_GEOMETRY)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.changeEdgeCoords(
     java.lang.String, oracle.sql.NUMBER,
     oracle.spatial.type.SdoGeometry)';
 PROCEDURE change_edge_coords(topology VARCHAR2,
    edge_id NUMBER, geom SDO_GEOMETRY,
    moved_iso_nodes OUT SDO_NUMBER_ARRAY,
    moved_iso_edges OUT SDO_NUMBER_ARRAY,
    allow_iso_moves VARCHAR2)
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.changeEdgeCoords(
     java.lang.String, oracle.sql.NUMBER,
     oracle.spatial.type.SdoGeometry,
     oracle.spatial.type.SdoNumberArray[],
     oracle.spatial.type.SdoNumberArray[],
     java.lang.String)';
 FUNCTION add_point_geometry(topology VARCHAR2,
    point SDO_GEOMETRY) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addPointGeometry(
     java.lang.String, oracle.spatial.type.SdoGeometry)
     return oracle.sql.NUMBER';
 FUNCTION add_point_geometry(topology VARCHAR2,
    coord SDO_NUMBER_ARRAY) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addPointGeometry(
     java.lang.String, oracle.spatial.type.SdoNumberArray)
     return oracle.sql.NUMBER';
 FUNCTION add_linear_geometry(topology VARCHAR2,
    curve SDO_GEOMETRY) RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addLinearGeometry(
     java.lang.String, oracle.spatial.type.SdoGeometry)
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION add_linear_geometry(topology VARCHAR2,
    coords SDO_NUMBER_ARRAY) RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addLinearGeometry(
     java.lang.String, oracle.spatial.type.SdoNumberArray)
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION add_polygon_geometry(topology VARCHAR2,
    polygon SDO_GEOMETRY) RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addPolygonGeometry(
     java.lang.String, oracle.spatial.type.SdoGeometry)
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION add_polygon_geometry(topology VARCHAR2,
    coords SDO_NUMBER_ARRAY) RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.addPolygonGeometry(
      java.lang.String, oracle.spatial.type.SdoNumberArray)
     return oracle.spatial.type.SdoNumberArray';

 FUNCTION create_feature(topology VARCHAR2, table_name VARCHAR2,
    column_name VARCHAR2, geom SDO_GEOMETRY)
    RETURN SDO_TOPO_GEOMETRY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.createFeature(
      java.lang.String, java.lang.String, java.lang.String,
      oracle.spatial.type.SdoGeometry)
     return oracle.spatial.type.SdoTopoGeometry';
 FUNCTION create_feature(topology VARCHAR2, table_name VARCHAR2,
    column_name VARCHAR2, geom SDO_GEOMETRY, snapFeature number)
    RETURN SDO_TOPO_GEOMETRY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.createFeature(
      java.lang.String, java.lang.String, java.lang.String,
      oracle.spatial.type.SdoGeometry,oracle.sql.NUMBER)
     return oracle.spatial.type.SdoTopoGeometry';
 FUNCTION create_feature(topology VARCHAR2, table_name VARCHAR2,
    column_name VARCHAR2, dml_condition VARCHAR2)
    RETURN SDO_TOPO_GEOMETRY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.createFeature(
      java.lang.String, java.lang.String, java.lang.String,
      java.lang.String)
     return oracle.spatial.type.SdoTopoGeometry';

 FUNCTION get_containing_face(topology VARCHAR2, topo_map VARCHAR2,
    point SDO_GEOMETRY) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getContainingFace(
     java.lang.String, java.lang.String,
     oracle.spatial.type.SdoGeometry)  return oracle.sql.NUMBER';

 FUNCTION get_containing_face(topology VARCHAR2, topo_map VARCHAR2,
    point SDO_GEOMETRY, allow_iso_coincidence varchar2)
   RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getContainingFace(
     java.lang.String, java.lang.String,
     oracle.spatial.type.SdoGeometry, java.lang.String)
    return oracle.sql.NUMBER';

 FUNCTION get_containing_face(topology VARCHAR2, topo_map VARCHAR2,
    x NUMBER, y NUMBER) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getContainingFace(
     java.lang.String, java.lang.String, oracle.sql.NUMBER,
     oracle.sql.NUMBER) return oracle.sql.NUMBER';
 FUNCTION get_node_star(topology VARCHAR2, topo_map VARCHAR2,
    node_id NUMBER) RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNodeStar(
     java.lang.String, java.lang.String, oracle.sql.NUMBER)
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION get_node_face_star(topology VARCHAR2, topo_map VARCHAR2,
    node_id NUMBER) RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNodeFaceStar(
     java.lang.String, java.lang.String, oracle.sql.NUMBER)
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION get_edge_nodes(topology VARCHAR2, topo_map VARCHAR2,
    edge_id NUMBER) RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getEdgeNodes(
     java.lang.String, java.lang.String, oracle.sql.NUMBER)
     return oracle.spatial.type.SdoNumberArray';
 FUNCTION get_face_boundary(topology VARCHAR2, topo_map VARCHAR2,
    face_id NUMBER, opiton NUMBER)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getFaceBoundary(
     java.lang.String, java.lang.String, oracle.sql.NUMBER, oracle.sql.NUMBER)
     return oracle.spatial.type.SdoNumberArray';

 FUNCTION get_nearest_node(topology VARCHAR2, topo_map VARCHAR2,
    point SDO_GEOMETRY) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNearestNode(
     java.lang.String, java.lang.String, oracle.spatial.type.SdoGeometry)
     return oracle.sql.NUMBER';
 FUNCTION get_nearest_node(topology VARCHAR2, topo_map VARCHAR2,
    x NUMBER, y NUMBER) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNearestNode(
     java.lang.String, java.lang.String, oracle.sql.NUMBER,
     oracle.sql.NUMBER) return oracle.sql.NUMBER';
 FUNCTION get_nearest_edge(topology VARCHAR2, topo_map VARCHAR2,
    point SDO_GEOMETRY) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNearestEdge(
     java.lang.String, java.lang.String, oracle.spatial.type.SdoGeometry)
     return oracle.sql.NUMBER';
 FUNCTION get_nearest_edge(topology VARCHAR2, topo_map VARCHAR2,
    x NUMBER, y NUMBER) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNearestEdge(
     java.lang.String, java.lang.String, oracle.sql.NUMBER,
     oracle.sql.NUMBER) return oracle.sql.NUMBER';

 FUNCTION get_nearest_node_in_cache(topo_map VARCHAR2,
    x NUMBER, y NUMBER) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNearestNodeInCache(
     java.lang.String, oracle.sql.NUMBER,
     oracle.sql.NUMBER) return oracle.sql.NUMBER';
 FUNCTION get_nearest_node_in_cache(topo_map VARCHAR2,
    point SDO_GEOMETRY) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNearestNodeInCache(
     java.lang.String, oracle.spatial.type.SdoGeometry)
    return oracle.sql.NUMBER';

 FUNCTION get_nearest_edge_in_cache(topo_map VARCHAR2,
    x NUMBER, y NUMBER) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNearestEdgeInCache(
     java.lang.String, oracle.sql.NUMBER,
     oracle.sql.NUMBER) return oracle.sql.NUMBER';
 FUNCTION get_nearest_edge_in_cache(topo_map VARCHAR2,
    point SDO_GEOMETRY) RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getNearestEdgeInCache(
     java.lang.String, oracle.spatial.type.SdoGeometry)
    return oracle.sql.NUMBER';

 FUNCTION get_topo_transaction_id RETURN NUMBER DETERMINISTIC
    AS LANGUAGE JAVA NAME
    'oracle.spatial.type.TopoMapWrapper.getTopoTransactionId()
     return oracle.sql.NUMBER';

END SDO_TOPO_MAP;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_TPFNS" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
1b04 237
R2yxqJaqY/CDkwJKJ16UXvVKu1cwg1V1ACAVfC9A2sHqMBrT5Z7V65W8L+u43HM3hV1j/LQr
UbUPKvuNZmfmN8V2iDt4nMEyHPrx9siWfOktI/hfmg+7LNX7r5yjvYjY6Zt/V6DhcRui81oj
eVqmKux6o8iHdJ42LFZKRhvuifQZdxvcs0ezBcl1hwWqYQgIWFI7p8ySY7jwEmXyJy6enN7u
fCk8LSF3NprLSLd/8GLwGIwXAFm9xcV1np5Ods0LG1YbjtOZS8I22kHk6sbaZLHULiKEKe9U
me3+5LqgUFzlQsTshyYZc9+YNa2q1fKEHCG+NWEdJLNOdKiuPFP/T60ab6RLOvMsH32qs/60
HxExiCVlgpuGUQC5k8vDQmpQ0G8TnGaQ9xI8Ng8dwzSOMcoDs4zaSHInGl7M1V1D1KdY8HYf
pTN+xiNGqIefflgxtFL7IHKf2NDbnvxxKvKYWLNdQljARk/wKurgnYjWg9kWnHxTxaDV3VBr
2Y8ghGanBku3AozKGTaTmyUL1kdgSrlT7U33qCbXsR6saF3uWxQDLy4=
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_GEOR" AUTHID CURRENT_USER AS


-- ---------------------------------------------------------------------
--           Create and Process GeoRaster Objects
-- ---------------------------------------------------------------------

--
-- NAME:
--      init constructor functions
--
-- DESCRIPTION
--      init()s return a GeoRaster Object which is empty except that a RDT
--      table name and a raster ID are assigned to it. The RDT and ID are
--      required so that this object can be registered in the sysdata table
--      All other attributes are NULL.
--
--      If rasterDataTable or rasterID is not specified, it is generated
--      automatically.
--
-- ARGUMENTS
--      rasterDataTable - RDT table name
--      rasterID        - rasterID number
--
-- RETURNS
--      An GeoRaster object with rasterDataTable and rasterID initialized
--

FUNCTION init
(
   rasterDataTable IN VARCHAR2 DEFAULT NULL,
   rasterID        IN NUMBER DEFAULT NULL
)
RETURN MDSYS.SDO_GEORASTER DETERMINISTIC;


--
-- NAME:
--      createBlank functions
--
-- DESCRIPTION
--      create a blank GeoRaster object which has normal size as
--      any other GeoRaster objects except that all its cells
--      have the same value, such as 100, 5, 54.6.
--
--      NOTE, the spatialExtent will always have NULL srid and
--      integer coordinates until it is georeferenced to another CS.
--      Initially, the blank object is not georeferenced.
--
-- ARGUMENTS
--      rasterType - the GeoRaster Type defined by Oracle.
--                   the number of dimensions is implied in it
--      ultCoord   - Upper-Left corner cell coordinate (integer) in
--                   cell space. The default is (0,0)
--      dimSizes   - the size (cell numbers) along each dimension
--      cellValue  - the cell value for all raster cells
--
--      rasterDataTable and rasterID have the similar implications
--      as in init() functions. See init() comments
--
-- RETURNS
--      A Blank GeoRaster object
--

FUNCTION createBlank
(
   rasterType      IN INTEGER,
   ultCoord        IN MDSYS.SDO_NUMBER_ARRAY,
   dimSizes        IN MDSYS.SDO_NUMBER_ARRAY,
   cellValue       IN NUMBER,
   rasterDataTable IN VARCHAR2 DEFAULT NULL,
   rasterID        IN NUMBER DEFAULT NULL
)
return MDSYS.SDO_GEORASTER DETERMINISTIC;


--
-- NAME:
--      copy procedure
--
-- DESCRIPTION
--      Makes a simple copy of an existing GeoRaster object.
--
-- ARGUMENTS
--      inGeoRaster    - The SDO_GEORASTER object to be copied
--      outGeoRaster   - The new GeoRaster Object
--
-- RETURNS
--      A GeoRaster object
--
PROCEDURE copy
(
   inGeoRaster    IN     MDSYS.SDO_GEORASTER,
   outGeoRaster   IN OUT MDSYS.SDO_GEORASTER
);

--
-- NAME:
--      changeFormat procedure
--
-- DESCRIPTION
--      Change the storage format of an existing GeoRaster object.
--
-- ARGUMENTS
--      georaster    - The SDO_GEORASTER object whose format to be changed
--      storageParam - A string specifying storage parameters
--                     The details are explained in GeoRaster Manual
--      bgValues       - background values for filling sparse data
--
-- RETURNS
--      A GeoRaster object
--
PROCEDURE changeFormat
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   storageParam     IN VARCHAR2,
   bgValues     IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

--
-- NAME:
--      changeFormatCopy procedure
--
-- DESCRIPTION
--      Makes a copy of an existing GeoRaster object with the same or
--      different storage format.
--
-- ARGUMENTS
--      inGeoRaster    - The SDO_GEORASTER object to be copied
--      pyramidLevel   - The pyramid level of the source GeoRaster object
--      storageParam   - A string specifying storage parameters for the copy
--                       The details are explained in GeoRaster Manual
--      outGeoRaster   - The new GeoRaster Object
--      bgValues       - background values for filling sparse data
--
-- RETURNS
--      A GeoRaster object
--
PROCEDURE changeFormatCopy
(
   inGeoRaster    IN MDSYS.SDO_GEORASTER,
   storageParam   IN VARCHAR2,
   outGeoRaster   IN OUT MDSYS.SDO_GEORASTER,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

PROCEDURE changeFormatCopy
(
   inGeoRaster    IN MDSYS.SDO_GEORASTER,
   pyramidLevel   IN NUMBER,
   storageParam   IN VARCHAR2,
   outGeoRaster   IN OUT MDSYS.SDO_GEORASTER,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

--
-- NAME:
--      maks procedure
--
-- DESCRIPTION
--      apply a mask to  an existing GeoRaster object with the same or
--      different storage format.
--
-- ARGUMENTS
--      inGeoRaster    - The SDO_GEORASTER object to be applied with mask
--      bandNumbers    - The physical bands in cell space
--      mask           - The mask SDO_GEORASTER object
--      storageParam   - A string specifying storage parameters for the copy
--                       The details are explained in GeoRaster Manual
--      outGeoRaster   - The new GeoRaster Object
--      zeroMapping    - The value is used for mask value 0
--      onemapping     - The value is used for mask value 1
--      bgValues       - background values for filling sparse data
--
--
PROCEDURE mask
(
   inGeoraster  IN      MDSYS.SDO_GEORASTER,
   bandNumbers  IN      VARCHAR2,
   mask         IN      MDSYS.SDO_GEORASTER DEFAULT NULL,
   storageParam IN      VARCHAR2,
   outGeoraster IN OUT  MDSYS.SDO_GEORASTER,
   zeroMapping  IN      NUMBER DEFAULT 0,
   oneMapping   IN      NUMBER DEFAULT 1,
   bgValues     IN      SDO_NUMBER_ARRAY DEFAULT NULL
);



--
-- NAME:
--      subset procedure
--
-- DESCRIPTION
--      This procedure does either spatial crop/cut/clip, or layer/band
--      subset, or both.
--
-- ARGUMENTS
--      inGeoRaster    - The source SDO_GEORASTER object
--      pyramidLevel   - The pyramid level of the source GeoRaster object
--      cropArea       - The crop area. If it is of SDO_GEOMETRY type,
--                       it can be in any coordinate space. If it is
--                       of SDO_NUMBER_ARRAY, it is in cell space only
--      layerNumbers   - The logical layers
--      bandNumbers    - The physical bands in cell space
--      storageParam   - A string specifying storage parameters for the result.
--                       The details are explained in GeoRaster Manual
--      outGeoRaster   - The new GeoRaster Object
--      bgValues       - background values for filling sparse data
--
-- RETURNS
--      A GeoRaster object
--
PROCEDURE subset
(
   inGeoRaster    IN MDSYS.SDO_GEORASTER,
   cropArea       IN MDSYS.SDO_GEOMETRY,
   layerNumbers   IN VARCHAR2,
   storageParam   IN VARCHAR2,
   outGeoRaster   IN OUT MDSYS.SDO_GEORASTER,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL,
   polygonClip    IN     VARCHAR2 DEFAULT NULL
);

PROCEDURE subset
(
   inGeoRaster    IN MDSYS.SDO_GEORASTER,
   cropArea       IN MDSYS.SDO_NUMBER_ARRAY,
   bandNumbers    IN VARCHAR2,
   storageParam   IN VARCHAR2,
   outGeoRaster   IN OUT MDSYS.SDO_GEORASTER,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

PROCEDURE subset
(
   inGeoRaster    IN MDSYS.SDO_GEORASTER,
   pyramidLevel   IN NUMBER,
   cropArea       IN MDSYS.SDO_GEOMETRY,
   layerNumbers   IN VARCHAR2,
   storageParam   IN VARCHAR2,
   outGeoRaster   IN OUT MDSYS.SDO_GEORASTER,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL,
   polygonClip    IN     VARCHAR2 DEFAULT NULL
);

PROCEDURE subset
(
   inGeoRaster    IN MDSYS.SDO_GEORASTER,
   pyramidLevel   IN NUMBER,
   cropArea       IN MDSYS.SDO_NUMBER_ARRAY,
   bandNumbers    IN VARCHAR2,
   storageParam   IN VARCHAR2,
   outGeoRaster   IN OUT MDSYS.SDO_GEORASTER,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

--
-- NAME:
--      scale procedure
--
-- DESCRIPTION
--      This procedure enlarges or reduces a georaster object and
--      overwrites it.
--
-- ARGUMENTS
--      inGeoRaster    - The source SDO_GEORASTER object
--      scaleParam     - The scale factor or factors
--      resampleParam  - The resampling method
--      storageParam   - A string specifying storage parameters for the result
--                       The details are explained in GeoRaster Manual
--      bgValues       - background values for filling sparse data
--
-- RETURNS
--      A GeoRaster object
--
PROCEDURE scale
(
   inGeoRaster    IN OUT MDSYS.SDO_GEORASTER,
   scaleParam     IN VARCHAR2,
   resampleParam  IN VARCHAR2,
   storageParam   IN VARCHAR2,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);


--
-- NAME:
--      scaleCopy procedure
--
-- DESCRIPTION
--      This procedure enlarges or reduces a georaster object and
--      write the result as another georaster object.
--
-- ARGUMENTS
--      inGeoRaster    - The source SDO_GEORASTER object
--      pyramidLevel   - The pyramid level of the source GeoRaster object
--      scaleParam     - The scale factor or factors
--      resampleParam  - The resampling method
--      storageParam   - A string specifying storage parameters for the result
--                       The details are explained in GeoRaster Manual
--      outGeoRaster   - The new GeoRaster Object
--      bgValues       - background values for filling sparse data
--
-- RETURNS
--      A GeoRaster object
--
PROCEDURE scaleCopy
(
   inGeoRaster    IN MDSYS.SDO_GEORASTER,
   scaleParam     IN VARCHAR2,
   resampleParam  IN VARCHAR2,
   storageParam   IN VARCHAR2,
   outGeoRaster   IN OUT MDSYS.SDO_GEORASTER,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

PROCEDURE scaleCopy
(
   inGeoRaster    IN MDSYS.SDO_GEORASTER,
   pyramidLevel   IN NUMBER,
   scaleParam     IN VARCHAR2,
   resampleParam  IN VARCHAR2,
   storageParam   IN VARCHAR2,
   outGeoRaster   IN OUT MDSYS.SDO_GEORASTER,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

--
-- NAME:
--      generatePyramid
--
-- DESCRIPTION
--      This procedure generates pyramids, which are stored together with
--      the original data.
--
--ARGUMENTS
--      georaster     - The source SDO_GEORASTER object
--      pyramidParams - The pyramid parameters
--      bgValues       - background values for filling sparse data
--      parallelParam    - The parameter related to parallel processing.
--                         Currently we only support
--                           "parallel=n": where n>1 is the degree of parallel.
--                              The database optimizer uses the degree of
--                              parallelism specified by n
--                           By default when this parameter is null, there is
--                           no parallel processing.
--
-- RETURNS
--      A GeoRaster object
--
PROCEDURE generatePyramid
(
   georaster     IN OUT MDSYS.SDO_GEORASTER,
   pyramidParams IN     VARCHAR2,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL,
   parallelParam  IN     VARCHAR2 DEFAULT NULL
);


--
-- NAME:
--      deletePyramid
--
-- DESCRIPTION
--      This procedure deletes pyramids of a georaster object.
--
--ARGUMENTS
--      georaster     - The source SDO_GEORASTER object
--
-- RETURNS
--      A GeoRaster object
--
PROCEDURE deletePyramid
(
   georaster     IN OUT MDSYS.SDO_GEORASTER
);



--
-- NAME:
--      generateSpatialExtent
--
-- DESCRIPTION
--      This function generates the spatialExtent of a georaster object
--      using its SRS (spatial reference system) information.
--      The srid of the generated spatialExtent is decided by the SRS.
--      The srid is null if the georaster object is not referenced.
--
--ARGUMENTS
--      georaster - The GeoRaster object on which the spatialExtent is
--                  to be generated
--      height    - Z value in the 3D GeoReference system
--
-- RETURNS
--      the spatialExtent geometry
--
FUNCTION generateSpatialExtent
(
   georaster  IN MDSYS.SDO_GEORASTER,
   height     IN NUMBER DEFAULT NULL
)
return MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--      mosaic
--
-- DESCRIPTION
--      This procedure mosaics multiple GeoRaster objects into one. The
--      source GeoRaster objects must be prepared tiles or blocks that
--      are rectified and referenced onto the same coordinate system
--      with affine transformation. They must have the same number of
--      layers/bands and must be spatially aligned along the row and column
--      dimensions. They must also have the same mapping between the band
--      and layer numbers.
--
--ARGUMENTS
--      georasterTableName  - the table containing all source georaster objects
--      georasterColumnName - the column of the georasterTable, in which all
--                            georaster objects are to be masaicked
--      georaster           - the result, i.e., the mosaic georaster object
--      storageParam        - storage parameter specification
--      bgValues            - background values for filling in the gaps
--
-- RETURNS
--      a mosaic georaster object
--
PROCEDURE mosaic
(
   georasterTableName  IN     VARCHAR2,
   georasterColumnName IN     VARCHAR2,
   georaster           IN OUT MDSYS.SDO_GEORASTER,
   storageParam        IN     VARCHAR2,
   bgValues            IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

--
-- NAME:
--      validateForMosaic
--
-- DESCRIPTION
--      check whether tiles in the given table are mosaickable
--
-- ARGUMENTS
--      georasterTableName  - the table containing all source georaster objects
--      georasterColumnName - the column of the georasterTable, in which all
--                            georaster objects are to be masaicked
--      resultTableName     - the name of the table to store the result
-- NOTES
--   A result table must be created before calling this procedure. The format
--   of the result table is:
--    (description VARCHAR2(80) NOT NULL, rowid1 ROWID, rowid2 ROWID)
--
PROCEDURE validateForMosaic
(
   georasterTableName  IN VARCHAR2,
   georasterColumnName IN VARCHAR2,
   resultTableName     IN VARCHAR2
);


-- NAME:
--      mosaic
--
-- DESCRIPTION
--      This procedure mosaics multiple GeoRaster objects retrieved from a
--      cursor and return the mosaicked image in the specified window of
--      interest. The source GeoRaster objects must be prepared tiles or
--      blocks that are rectified and referenced onto the same coordinate
--      system with affine transformation. They must have the same number of
--      layers/bands and must be spatially aligned along the row and column
--      dimensions. They must also have the same mapping between the band
--      and layer numbers.
--
--ARGUMENTS
--      georasters          - the source georaster objects
--      pyramidLevel        - the pyramid level
--      window              - the cropping window
--      layerNumbers        - layer numbers
--      georaster           - the result, i.e., the mosaic georaster object
--      storageParam        - storage parameter specification
--      bgValues            - background values for filling in the gaps
--
--
PROCEDURE mosaic
(
 inGeoRasters        IN     SYS_REFCURSOR,
 pyramidLevel        IN     NUMBER,
 window              IN     SDO_GEOMETRY,
 layerNumbers        IN     VARCHAR2,
 outGeoRaster        IN OUT MDSYS.SDO_GEORASTER,
 storageParam        IN     VARCHAR2,
 bgValues            IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

--
-- NAME:
--      mergeLayers
--
-- DESCRIPTION
--      append selected layers of a GeoRaster object to another GeoRaster object
--
-- ARGUMENTS
--      targetGeoraster    - the GeoRaster object to be appended to
--      sourceGeoraster    - the source GeoRaster object
--      sourceLayerNumbers - source layers to be appended to the target
--      bgValues           - background filling values
--
-- NOTES
--   The source and target GeoRaster objects must have the same row and cloumn
--   dimension sizes. They also must cover the same area in the model (if both
--   are georeferenced) or cell (if neither is georeferenced) space.
--
PROCEDURE mergeLayers(
   targetGeoraster     IN OUT MDSYS.SDO_GEORASTER,
   sourceGeoraster     IN     MDSYS.SDO_GEORASTER,
   sourceLayerNumbers  IN     VARCHAR2 DEFAULT NULL,
   bgValues            IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

--
-- NAME:
--     mergeLayers
--
-- DESCRIPTION
--      union selected layers of two GeoRaster objects to generate a new
--      GeoRaster object
--
-- ARGUMENTS
--      source1Georaster    - the first source GeoRaster object
--      source1LayerNumbers - source layers of the first object to be included
--      source2Georaster    - the second GeoRaster object
--      source2LayerNumbers - source layers of the second object to be included
--      storageParam        - the storage parameter for the output object
--      outGeoraster        - the result GeoRaster object
--      bgValues            - background filling values
--      pyramidLevel        - union the layers on the pyramidLevel
-- NOTES
--   The two source GeoRaster objects must have the same row and cloumn
--   dimension sizes and the same georeferencing.
--
--   If storageParam is NULL, the result object has the same storage
--   attributes as those of the first source object.
--
PROCEDURE mergeLayers(
   source1Georaster     IN     MDSYS.SDO_GEORASTER,
   source1LayerNumbers  IN     VARCHAR2,
   source2Georaster     IN     MDSYS.SDO_GEORASTER,
   source2LayerNumbers  IN     VARCHAR2,
   storageParam         IN     VARCHAR2,
   outGeoraster         IN OUT MDSYS.SDO_GEORASTER,
   bgValues             IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL,
   pyramidLevel         IN     NUMBER DEFAULT NULL
);

--
-- NAME:
--     updateRaster
--
-- DESCRIPTION
--     Update a specified area or the overlapping parts of one GeoRaster
--     object with selected bands or layers of another GeoRaster object.
--
-- ARGUMENTS
--     targetGeoraster    - the GeoRaster object to be updated
--     targetPyramidLevel - the target pyramid level to be updated
--     targetLayerNumbers - the layers to be updated
--     targetBandNumbers  - the bands to be updated
--     targetArea         - the area to be updated
--     sourceGeoraster    - the source GeoRaster object
--     sourcePyramidLevel - the source pyramid level
--     sourceLayerNumbers - the source layers to be considered
--     sourceBandNumbers  - the source bands to be considered
--     updateUpperPyramids - whether to update upper level pyramids
--     bgValues           - background filling values
--
-- NOTES
--   If georeferenced, both objects should be in the same coordinate system.
--   Both GeoRaster objects should have the same cell depth and spatial
--   resolution (if georeferenced).
--   If both are not georeferenced, the UTLCoordinates will be considered to
--   co-locate them into each other.
--   The two georaster objects could have different dimensions and sizes.
--   If targetArea is not specified (NULL), all the overlapping parts are
--   updated.
--   The band/layer numbers should have a one-to-one matching.
--   If the source georaster object is not large enough to fill in the target
--   area, the uncovered area will not be updated.
--   If the source georaster object is sparse, background filling values
--   are considered.
--   If the target GeoRaster objects has pyramids and/or is compressed, the
--   updates should be automatically reflected in the pyramids and/or be
--   compressed as well.
--
PROCEDURE updateRaster(
   targetGeoraster    IN OUT MDSYS.SDO_GEORASTER,
   targetPyramidLevel IN     NUMBER,
   targetLayerNumbers IN     VARCHAR2,
   targetArea         IN     MDSYS.SDO_GEOMETRY,
   sourceGeoraster    IN     MDSYS.SDO_GEORASTER,
   sourcePyramidLevel IN     NUMBER,
   sourceLayerNumbers IN     VARCHAR2,
   updateUpperPyramids IN    VARCHAR2,
   bgValues           IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

PROCEDURE updateRaster(
   targetGeoraster    IN OUT MDSYS.SDO_GEORASTER,
   targetPyramidLevel IN     NUMBER,
   targetBandNumbers  IN     VARCHAR2,
   targetArea         IN     MDSYS.SDO_NUMBER_ARRAY,
   sourceGeoraster    IN     MDSYS.SDO_GEORASTER,
   sourcePyramidLevel IN     NUMBER,
   sourceBandNumbers  IN     VARCHAR2,
   updateUpperPyramids IN    VARCHAR2,
   bgValues           IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

--
-- NAME:
--     createTemplate
--
-- DESCRIPTION
--     Generate template metadata for a georaster object, and optionally
--     insert entries with empty raster blocks into the RDT.
--
-- ARGUMENTS
--     georaster       - the georaster object
--     rasterType      - the raster type
--     rasterSpec      - the raster specification
--     maskLayers      - layers with bitmap mask
--     initRdtEntry    - whether to insert the RDT entries
--
-- NOTES
--
PROCEDURE createTemplate
(
   georaster   IN OUT MDSYS.SDO_GEORASTER,
   rasterType      IN NUMBER,
   rasterSpec      IN VARCHAR2,
   maskLayers      IN VARCHAR2 DEFAULT NULL,
   initRdtEntry    IN VARCHAR2 DEFAULT NULL
);

--
-- NAME:
--     getRasterBlockLocator
--
-- DESCRIPTION
--     Get the LOB locator of a specified raster block
--
-- ARGUMENTS
--     georaster       - the source GeoRaster object
--     pyramidLevel    - the pyramid level
--     bandBlockNumber - the band block number
--     rowBlockNumber  - the row block number
--     colBlockNumber  - the column block number
--     loc             - the in/out lob locator
--     isBitmapMask    - 'true' if access a rasterblock of a bitmap mask
--     lock_for_write  - lock for write
--
-- NOTES
--     If the value for isBitmapMask is not 'true' (case insensitive),
--     a regular raster block is accessed; otherwise, a bitmap mask block
--     is being accessed.
--
--     If the value for lock_for_write is not 'true' (case insensitive),
--     the row in the RDT is not locked.
--
PROCEDURE getRasterBlockLocator
(
   georaster         IN MDSYS.SDO_GEORASTER,
   pyramidLevel      IN NUMBER,
   bandBlockNumber   IN NUMBER,
   rowBlockNumber    IN NUMBER,
   columnBlockNumber IN NUMBER,
   loc               IN OUT NOCOPY BLOB,
   isBitmapMask      IN VARCHAR2 DEFAULT NULL,
   lock_for_write    IN VARCHAR2 DEFAULT NULL
);

--
-- NAME:
--      getRasterBlockLocator procedure
--
-- DESCRIPTION
--      The procedure retrieve the raster block locator which
--      contains a single cell located anywhere in the georaster
--      object by specifying its row/column/band numbers in its
--      cell coordinate space  or by specifying a point geometry
--      in either model coordinate space or cell coordinate space
--
-- ARGUMENTS
--      georaster       - the georaster object to query upon
--      pyramidLevel    - the level in pyramid
--      rowNumber       - row number in cell space
--      colNumber       - column number in cell space
--      bandNumber      - band number in cell space (not model space)
--      layerNumber     - logical layer number
--      ptGeom          - a point geometry in either cell space
--                        or model space
-- RETURNS
--
--
PROCEDURE getRasterBlockLocator
(
   georaster    IN MDSYS.SDO_GEORASTER,
   pyramidLevel IN NUMBER,
   rowNumber    IN NUMBER,
   colNumber    IN NUMBER,
   bandNumber   IN NUMBER,
   offset       out NUMBER,
   loc          IN OUT NOCOPY BLOB,
   isBitmapMask      IN VARCHAR2 DEFAULT NULL,
   lock_for_write    IN VARCHAR2 DEFAULT NULL
);

PROCEDURE getRasterBlockLocator
(
   georaster    IN MDSYS.SDO_GEORASTER,
   pyramidLevel IN NUMBER,
   ptGeom       IN MDSYS.SDO_GEOMETRY,
   layerNumber  IN NUMBER,
   offset       out NUMBER,
   loc          IN OUT NOCOPY BLOB,
   isBitmapMask      IN VARCHAR2 DEFAULT NULL,
   lock_for_write    IN VARCHAR2 DEFAULT NULL
);
--
-- NAME:
--     getRasterRange
--
-- DESCRIPTION
--     Get the minimum and maximum cell values of a layer of a GeoRaster object
--     or the object itself (i.e., layerNumber = 0).
--
-- ARGUMENTS
--     georaster       - the source GeoRaster object
--     layerNumber     - the layer number, 0 for object layer
--
-- NOTES
--
FUNCTION getRasterRange
(
    georaster            IN MDSYS.SDO_GEORASTER,
    layerNumber          IN NUMBER DEFAULT 0
) RETURN SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;


--
-- NAME:
--   validateBlockMBR
--
-- DESCRIPTION
--   check whether the blockMBR geometries in the RDT are valid
--
-- ARGUMENTS
--   georaster - the GeoRaster object whose blockMBRs are to be checked
--
-- RETURNS
--   'NULL' if the GeoRaster object is NULL;
--   'TRUE' if the blockMBRs are valid;
--    otherwise an error number
--
-- NOTES
--   Each blockMBR is a rectangle defined in the cell space and must be
--   IDENTICAL to following geometry, respectively:
--     MDSYS.SDO_GEOMETRY(2003,NULL,NULL,
--               MDSYS.SDO_ELEM_INFO_ARRAY(1,1003,3),
--               MDSYS.SDO_ORDINATE_ARRAY(R0+rowBlockNumber*RSZ,
--                         C0+columnBlockNumber*CSZ,
--                         R0+(rowBlockNumber+1)*RSZ-1,
--                         C0+(columnBlockNumber+1)*CSZ-1))
--   where:
--     R0 is the upper-left row coordinate in the cell space;
--     C0 is the upper-left column coordinate in the cell space;
--     RSZ is the row block size;
--     CSZ is the column block size

--   The dimension information of a blockMBR geometry must be in the order
--   of (ROW, COLUMN).

FUNCTION validateBlockMBR
(
   georaster IN MDSYS.SDO_GEORASTER
) RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--   generateBlockMBR
--
-- DESCRIPTION
--   generate correct blockMBR geometries in the RDT
--
-- ARGUMENTS
--   georaster - the GeoRaster object whose blockMBRs are to be generated
--
-- NOTES
--   The raster rows in the RDT are updated with the correct blockMBR values,
--   but the GeoRaster object itself is not changed.
--
PROCEDURE generateBlockMBR
(
   georaster IN MDSYS.SDO_GEORASTER
);

-- ---------------------------------------------------------------------
--  Compress and Decompress GeoRaster Objects
--
--  They are all embedded into "storageParam" in related procedures
--  using keyword "compression"
-- ---------------------------------------------------------------------
--
-- NAME:
--      calcCompressionRatio function
--
-- DESCRIPTION
--      calculates the compression ratio of a compressed GeoRaster
--      object on the fly.
--
-- ARGUMENTS
--      georaster  - The compressed SDO_GEORASTER object
--
-- RETURNS
--      A Number
--
FUNCTION calcCompressionRatio
(
   georaster IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;


-- ---------------------------------------------------------------------
--  Update/Modify/Change GeoRaster Object Cell (or say, Raster) Data
--
--  These functions will change cell values, so use them cautiously.
-- ---------------------------------------------------------------------
--
-- NAME:
--      changeCellValue procedure
--
-- DESCRIPTION
--      This procedure changes all cells inside a window of each
--      specified layer/band to have a specified value
--
-- ARGUMENTS
--      georaster      - The SDO_GEORASTER object to be changed
--      window         - The window inside which each cell will be changed
--                       to have the newCellValue. If it is of SDO_GEOMETRY type,
--                       it can be in any coordinate space. If it is
--                       of SDO_NUMBER_ARRAY, it is in cell space only
--      layerNumbers   - The logical layers whose cells to be changed
--      bandNumbers    - The physical bands in cell space to be changed
--      newCellValue   - the new cell value for each cell inside the window
--                       of each specified band/layer
--      bgValues       - background values for filling sparse data
--
-- RETURNS
--      the source GeoRaster object with cells changed
--
PROCEDURE changeCellValue
(
   georaster     IN OUT MDSYS.SDO_GEORASTER,
   window        IN     MDSYS.SDO_NUMBER_ARRAY,
   bandNumbers   IN     VARCHAR2,
   newCellValue  IN     NUMBER,
   bgValues      IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

PROCEDURE changeCellValue
(
   georaster     IN OUT MDSYS.SDO_GEORASTER,
   window        IN     MDSYS.SDO_GEOMETRY,
   layerNumbers  IN     VARCHAR2,
   newCellValue  IN     NUMBER,
   bgValues      IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);


-- ---------------------------------------------------------------------
--    Georeference GeoRaster Objects
--
-- Other georeferencing or related functions include:
-- 1. setSRS() adds, modifies and deletes georeferencing info
-- 2. importFrom() loads ArcInfo World File from file or CLOB
-- 3. the tool GeoRasterLoader loads ArcInfo World File from file
-- ---------------------------------------------------------------------

--
-- NAME:
--      georeference
--
-- DESCRIPTION
--      georeference a GeoRaster object using the provided
--      cell-to-model transformation coefficients.
--      in 10iR1, it means the following affine transformation:
--        x = A * col + B * row + C
--        y = D * col + E * row + F
--      where A, B, C, D, E, F are given coefficients.
--      The result will be the following model-to-cell tranformation:
--        row = a + b * x + c * y
--        col = d + e * x + f * y
--      where a, b, c, d, e, f will be stored in the SRS of the
--      GeoRaster object.
--
--      NOTE: the spatial resolutions might not be set by this function.
--            If so, call setSpatialResolutions() to do it separately.
--
-- ARGUMENTS
--      georaster      - the georaster object to be georeferenced
--      srid           - the model space onto which the georaster object
--                       is to be georeferenced
--      modelCoordinateLocation -
--                       the modelCoordinateLocation of each cell/pixel,
--                       only CENTER (0) and UPPERLEFT (1) are allowed.
--      xCoefficients  - A, B, C
--      yCoefficients  - D, E, F
--
-- RETURNS
--      the input georaster object for update.
--      the original existing SRS (if any) is overwritten.
--
PROCEDURE georeference
(
   georaster               IN OUT MDSYS.SDO_GEORASTER,
   srid                    IN     NUMBER,
   modelCoordinateLocation IN     NUMBER,
   xCoefficients           IN     MDSYS.SDO_NUMBER_ARRAY,
   yCoefficients           IN     MDSYS.SDO_NUMBER_ARRAY
);


-- ---------------------------------------------------------------------
--           Query GeoRaster Object Cell (or say, Raster) Data
-- ---------------------------------------------------------------------

--
-- NAME:
--      getModelCoordinate
--
-- DESCRIPTION
--      Given a spatial coordinate, i.e., (row, column, vertical) of
--      a cell in the cell coordinate space, its corresponding spatial
--      coordinate (X, Y, Z) in the model coordinate space
--      is calculated and returned.
--
-- ARGUMENTS
--      georaster      - the georaster object to query upon.
--      pyramidLevel   - the pyramid level in which the cell is.
--      cellCoordinate - number array containing row, column,
--                       and vertical if its spatial dimension is 3
--      modelCoordinate - a SDO_GEOMETRY object in the model space that
--                        contains X, Y and/or Z
--      height         - Z value in 3D GeoReference system
--
-- RETURNS
--      a SDO_GEOMETRY object containing X, Y and/or Z
--
FUNCTION getModelCoordinate
(
   georaster         IN MDSYS.SDO_GEORASTER,
   pyramidLevel      IN NUMBER,
   cellCoordinate    IN MDSYS.SDO_NUMBER_ARRAY,
   height            IN NUMBER DEFAULT NULL
)
RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

PROCEDURE getModelCoordinate
(
   georaster         IN MDSYS.SDO_GEORASTER,
   pyramidLevel      IN NUMBER,
   cellCoordinate    IN MDSYS.SDO_GEOMETRY,
   modelCoordinate   OUT MDSYS.SDO_GEOMETRY,
   height            IN NUMBER DEFAULT NULL
);

--
-- NAME:
--      getCellCoordinate
--
-- DESCRIPTION
--      Given a spatial coordinate, i.e., (X, Y, Z) of a point in the model
--      coordinate space, its corresponding spatial coordinate (row, column,
--      vertical) in the cell coordinate space is calculated and returned.
--
-- ARGUMENTS
--      georaster       - the georaster object to query upon
--      pyramidLevel    - the pyramid level in which the cell is.
--      modelCoordinate - a SDO_GEOMETRY point containing X, Y,
--                        and Z if its spatial dimension is 3
--      subCell         - whether floating cell coordinates are returned
--
-- RETURNS
--      either a cellCoordinate array or a SDO_GEOMETRY object containing
--      row, column and/or vertical
--
-- NOTES
--      If the output type is MDSYS.SDO_NUMBER_ARRY, the input must be a point
--      geometry; otherwise, the input can be geometry of any types
--
--      Cell coordinates are returned as floating numbers if subCell is
--      'TRUE' (case insensitive). Otherwise, they are returned as integers.
--
FUNCTION getCellCoordinate
(
   georaster         IN MDSYS.SDO_GEORASTER,
   pyramidLevel      IN NUMBER,
   modelCoordinate   IN MDSYS.SDO_GEOMETRY,
   subCell           IN VARCHAR2 DEFAULT NULL,
   height            IN NUMBER DEFAULT NULL,
   vert_id           IN NUMBER DEFAULT NULL,
   ellipsoidal       IN VARCHAR2 DEFAULT NULL
)
RETURN MDSYS.SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

PROCEDURE getCellCoordinate
(
   georaster         IN MDSYS.SDO_GEORASTER,
   pyramidLevel      IN NUMBER,
   modelCoordinate   IN MDSYS.SDO_GEOMETRY,
   cellCoordinate    OUT MDSYS.SDO_GEOMETRY,
   subCell           IN VARCHAR2 DEFAULT NULL,
   height            IN NUMBER DEFAULT NULL,
   vert_id           IN NUMBER DEFAULT NULL,
   ellipsoidal       IN VARCHAR2 DEFAULT NULL
);

--
-- NAME:
--      getCellCoordinate
--
-- DESCRIPTION
--      Convert cell coordinates between different pyramid levels.
--
-- ARGUMENTS
--      georaster            - the georaster object to query upon
--      sourcepyramidLevel   - the source pyramid level
--      sourceCellCoordinate - the source cell coordinates
--      targetPyramidLevel   - the target pyramid level
--      subCell           - whether floating cell coordinates are returned
--
-- RETURNS
--      either a sdo_number_array or a SDO_GEOMETRY object containing
--      the corresponding cell coordinates at the target pyramid level.
--
-- NOTES
--      Cell coordinates are returned as floating numbers if subCell is
--      'TRUE' (case insensitive). Otherwise, they are returned as integers.
--

FUNCTION getCellCoordinate
(
   georaster            IN MDSYS.SDO_GEORASTER,
   sourcePyramidLevel   IN NUMBER,
   sourceCellCoordinate IN MDSYS.SDO_NUMBER_ARRAY,
   targetPyramidLevel   IN NUMBER,
   subCell              IN VARCHAR2 DEFAULT NULL
) RETURN MDSYS.SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getCellCoordinate
(
   georaster            IN MDSYS.SDO_GEORASTER,
   sourcePyramidLevel   IN NUMBER,
   sourceCellCoordinate IN MDSYS.SDO_GEOMETRY,
   targetPyramidLevel   IN NUMBER,
   subCell              IN VARCHAR2 DEFAULT NULL
) RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--      getCellValue functions
--
-- DESCRIPTION
--      The functions retrieve the value of a single cell
--      located anywhere in the georaster object by specifying
--      its row/column/band numbers in its cell coordinate space
--      or by specifying a point geometry in either model
--      coordinate space or cell coordinate space
--
-- ARGUMENTS
--      georaster       - the georaster object to query upon
--      pyramidLevel    - the level in pyramid
--      rowNumber       - row number in cell space
--      colNumber       - column number in cell space
--      bandNumber      - band number in cell space (not model space)
--      layerNumber     - logical layer number
--      ptGeom          - a point geometry in either cell space
--                        or model space
-- RETURNS
--      Number
--
FUNCTION getCellValue
(
   georaster    IN MDSYS.SDO_GEORASTER,
   pyramidLevel IN NUMBER,
   rowNumber    IN NUMBER,
   colNumber    IN NUMBER,
   bandNumber   IN NUMBER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getCellValue
(
   georaster    IN MDSYS.SDO_GEORASTER,
   pyramidLevel IN NUMBER,
   ptGeom       IN MDSYS.SDO_GEOMETRY,
   layerNumber  IN NUMBER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getCellValue
(
   georaster    IN MDSYS.SDO_GEORASTER,
   pyramidLevel IN NUMBER,
   rowNumber    IN NUMBER,
   colNumber    IN NUMBER,
   bands        IN VARCHAR2
)
RETURN SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getCellValue
(
   georaster    IN MDSYS.SDO_GEORASTER,
   pyramidLevel IN NUMBER,
   ptGeom       IN MDSYS.SDO_GEOMETRY,
   layers       IN VARCHAR2
)
RETURN SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;
--
-- NAME:
--      evaluate functions
--
-- DESCRIPTION
--      Based on different interpolation methods specified by parameter
--      interpolationMethod, the functions will evaluate and return values
--      for the cells located anywhere in the georaster object by specifying
--      its row/column/band numbers in its cell coordinate space
--      or by specifying a point geometry in either model
--      coordinate space or cell coordinate space
--      The only difference between evaluate and evaluateDouble is that evaluate
--      returns values based on the georaster object cellDepth, but evaluateDouble
--      always returns double numbers.
--
-- ARGUMENTS
--      georaster       - the georaster object to query upon
--      pyramidLevel    - the level in pyramid
--      row             - row number in cell space
--      column          - column number in cell space
--      bands           - band number array in cell space (not model space)
--      layers          - logical layer number array
--      ptGeom          - a point geometry in either cell space
--                        or model space
-- RETURNS
--      SDO_Number_array
--
--FUNCTION evaluate
--(
--   georaster    IN MDSYS.SDO_GEORASTER,
--   pyramidLevel IN NUMBER,
--   row          IN NUMBER,
--   column       IN NUMBER,
--   bands        IN VARCHAR2,
--   interpolationMethod  IN VARCHAR2
--)
--RETURN SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

--FUNCTION evaluate
--(
--   georaster    IN MDSYS.SDO_GEORASTER,
--   pyramidLevel IN NUMBER,
--   ptGeom       IN MDSYS.SDO_GEOMETRY,
--   layers       IN VARCHAR2,
--   interpolationMethod  IN VARCHAR2
--)
--RETURN SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

FUNCTION evaluateDouble
(
   georaster    IN MDSYS.SDO_GEORASTER,
   pyramidLevel IN NUMBER,
   row          IN NUMBER,
   column       IN NUMBER,
   bands        IN VARCHAR2,
   interpolationMethod  IN VARCHAR2
)
RETURN SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

FUNCTION evaluateDouble
(
   georaster    IN MDSYS.SDO_GEORASTER,
   pyramidLevel IN NUMBER,
   ptGeom       IN MDSYS.SDO_GEOMETRY,
   layers       IN VARCHAR2,
   interpolationMethod  IN VARCHAR2
)
RETURN SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;


--
-- NAME:
--      getRasterBlocks functions
--
-- DESCRIPTION
--      This function returns a sdo_rasterset table containing
--      all sub-blocks of the specified pramid level which are
--      inside and touch the given window
--
-- ARGUMENTS
--      georaster       - the georaster object to query upon
--      pyramidLevel    - the level in pyramid
--      window          - a rectanglar window in cell space
--
-- RETURNS
--      SDO_RASTERSET
--
FUNCTION getRasterBlocks
(
   georaster        IN MDSYS.SDO_GEORASTER,
   pyramidLevel     IN NUMBER,
   window           IN MDSYS.SDO_NUMBER_ARRAY
)
return MDSYS.SDO_RASTERSET DETERMINISTIC;

--
-- NAME:
--      getRasterBlocks functions
--
-- DESCRIPTION
--      This function returns a sdo_rasterset table containing
--      all sub-blocks of the specified pramid level which are
--      inside and touch the given window
--
-- ARGUMENTS
--      georaster       - the georaster object to query upon
--      pyramidLevel    - the level in pyramid
--      window          - a SDO geometry
--
-- RETURNS
--      SDO_RASTERSET
--
FUNCTION getRasterBlocks
(
   georaster        IN MDSYS.SDO_GEORASTER,
   pyramidLevel     IN NUMBER,
   window           IN MDSYS.SDO_GEOMETRY
)
return MDSYS.SDO_RASTERSET DETERMINISTIC;


--
-- NAME:
--      getRasterSubset
--
-- DESCRIPTION
--      This function returns a single blob holding the mosaic of
--      all sub-blocks of the specified pramid level which are
--      inside and touch the given window
--
-- ARGUMENTS
--      georaster       - the georaster object to query upon
--      pyramidLevel    - the level in pyramid
--      inWindow        - the window of interest
--      bandNumbers     - bandNumbers
--      rasterBlob      - holds the result, i.e., the mosaicked
--                        raster subset
--      outWindow       - the output window
--      storageParam    - storage parameters for the output
--      bgValues        - background values
--
-- RETURNS
--      BLOB
--
-- NOTES
--      if the type of inWindow is SDO_NUMBER_ARRAY, it specifies a rectanglar
--      window in the cell space
--      outWindow contains the coordinates of the upper-left and bottom-right
--      corners of the output window in the cell space
--
PROCEDURE getRasterSubset
(
   georaster      IN     MDSYS.SDO_GEORASTER,
   pyramidLevel   IN     NUMBER,
   window         IN     MDSYS.SDO_NUMBER_ARRAY,
   bandNumbers    IN     VARCHAR2,
   rasterBlob     IN OUT NOCOPY BLOB,
   storageParam   IN     VARCHAR2 DEFAULT NULL,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

PROCEDURE getRasterSubset
(
   georaster      IN     MDSYS.SDO_GEORASTER,
   pyramidLevel   IN     NUMBER,
   inWindow       IN     MDSYS.SDO_NUMBER_ARRAY,
   bandNumbers    IN     VARCHAR2,
   rasterBlob     IN OUT NOCOPY BLOB,
   outWindow      OUT    SDO_NUMBER_ARRAY,
   storageParam   IN     VARCHAR2 DEFAULT NULL,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

PROCEDURE getRasterSubset
(
   georaster      IN     MDSYS.SDO_GEORASTER,
   pyramidLevel   IN     NUMBER,
   window         IN     MDSYS.SDO_GEOMETRY,
   layerNumbers   IN     VARCHAR2,
   rasterBlob     IN OUT NOCOPY BLOB,
   storageParam   IN     VARCHAR2 DEFAULT NULL,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL,
   polygonClip    IN     VARCHAR2 DEFAULT NULL
);

PROCEDURE getRasterSubset
(
   georaster      IN     MDSYS.SDO_GEORASTER,
   pyramidLevel   IN     NUMBER,
   inWindow       IN     MDSYS.SDO_GEOMETRY,
   layerNumbers   IN     VARCHAR2,
   rasterBlob     IN OUT NOCOPY BLOB,
   outWindow      OUT    MDSYS.SDO_NUMBER_ARRAY,
   storageParam   IN     VARCHAR2 DEFAULT NULL,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL,
   polygonClip    IN     VARCHAR2 DEFAULT NULL
);

--
-- NAME:
--      getRasterData
--
-- DESCRIPTION
--      This function returns a single blob holding all raster data
--      of the input georaster object at the specified pyramid level.
--      If it is blocked, the mosaic of all blocks of the specified
--      pramid level is returned.
--
-- ARGUMENTS
--      georaster       - the georaster object to query upon
--      pyramidLevel    - the level in pyramid
--      rasterBlob      - holds the result, i.e., the raster data
--      storageParam    - storage parameters for the output
--      bgValues        - background values
--
-- RETURNS
--      BLOB
--
PROCEDURE getRasterData
(
   georaster      IN     MDSYS.SDO_GEORASTER,
   pyramidLevel   IN     NUMBER,
   rasterBlob     IN OUT NOCOPY BLOB,
   storageParam   IN     VARCHAR2 DEFAULT NULL,
   bgValues       IN     MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);


-- ---------------------------------------------------------------------
--        Query GeoRaster Object Metadata and Ancillary Data
-- ---------------------------------------------------------------------

FUNCTION getVersion
(
  georaster    IN MDSYS.SDO_GEORASTER
)
RETURN VARCHAR2 DETERMINISTIC  PARALLEL_ENABLE;

FUNCTION getID
(
  georaster    IN MDSYS.SDO_GEORASTER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION isBlank
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getBlankCellValue
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getDefaultColorLayer
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN MDSYS.SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getDefaultRed
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getDefaultBlue
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getDefaultGreen
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getDefaultAlpha
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getDefaultPyramidLevel
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getSpatialDimNumber
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getSpatialDimSizes
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN MDSYS.SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getBandDimSize
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getCellDepth
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getNODATA
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getULTCoordinate
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN MDSYS.SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getInterleavingType
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getCompressionType
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getBlockingType
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getBlockSize
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN MDSYS.SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getPyramidType
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getPyramidMaxLevel
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION isSpatialReferenced
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION isRectified
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION isOrthoRectified
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getModelSRID
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getSpatialResolutions
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN MDSYS.SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getSRS
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN MDSYS.SDO_GEOR_SRS DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getModelCoordLocation
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getBeginDateTime
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN TIMESTAMP WITH TIME ZONE DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getEndDateTime
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN TIMESTAMP WITH TIME ZONE DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getSpectralUnit
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getSpectralResolution
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

-- for all layer-related get and set functions,
-- layerNumber = 0 means the object layer
-- layerDimension defaults to 'BAND' if not specified

FUNCTION getLayerDimension
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN MDSYS.SDO_STRING_ARRAY DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getTotalLayerNumber
(
   georaster    IN MDSYS.SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getLayerOrdinate
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getLayerID
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getScaling
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN MDSYS.SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getBinType
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getBinTable
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getBinFunction
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN MDSYS.SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getStatistics
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN MDSYS.SDO_NUMBER_ARRAY DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getHistogram
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN MDSYS.SDO_GEOR_HISTOGRAM DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getHistogramTable
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION hasGrayScale
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getGrayScale
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN MDSYS.SDO_GEOR_GRAYSCALE DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getGrayScaleTable
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION hasPseudoColor
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getColorMap
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN MDSYS.SDO_GEOR_COLORMAP DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getColorMapTable
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getVAT
(
   georaster    IN MDSYS.SDO_GEORASTER,
   layerNumber  IN NUMBER
)
RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;


-- ---------------------------------------------------------------------
--
--   statistics functions
--
-- ---------------------------------------------------------------------

Function  generateStatistics
(
    georaster         IN OUT MDSYS.SDO_GEORASTER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_GEOMETRY,
    histogram         IN VARCHAR2,
    layerNumbers      IN VARCHAR2 DEFAULT NULL,
    useBin            IN VARCHAR2 DEFAULT 'TRUE',
    binFunction       IN MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE'
)
return Varchar2;

Function generateStatistics
(
    georaster         IN OUT MDSYS.SDO_GEORASTER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_NUMBER_ARRAY,
    histogram         IN VARCHAR2,
    layerNumbers      IN VARCHAR2 DEFAULT NULL,
    useBin            IN VARCHAR2 DEFAULT 'TRUE',
    binFunction       IN MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE'
)
return Varchar2;


Function  generateStatistics
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_NUMBER_ARRAY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE'
)
return SDO_NUMBER_ARRAY;

Function generateStatistics
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_GEOMETRY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE',
    polygonClip       IN VARCHAR2 DEFAULT NULL
)
return SDO_NUMBER_ARRAY;

Function generateStatisticsMax
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_NUMBER_ARRAY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE'
)
return NUMBER;

Function generateStatisticsMax
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_GEOMETRY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE',
    polygonClip       IN VARCHAR2 DEFAULT NULL
)
return NUMBER;

Function generateStatisticsMin
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_NUMBER_ARRAY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE'
)
return NUMBER;

Function generateStatisticsMin
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_GEOMETRY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE',
    polygonClip       IN VARCHAR2 DEFAULT NULL
)
return NUMBER;

Function generateStatisticsMean
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_NUMBER_ARRAY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE'
)
return NUMBER;

Function generateStatisticsMean
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_GEOMETRY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE',
    polygonClip       IN VARCHAR2 DEFAULT NULL
)
return NUMBER;
Function generateStatisticsSTD
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_NUMBER_ARRAY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE'
)
return NUMBER;

Function generateStatisticsSTD
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_GEOMETRY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE',
    polygonClip       IN VARCHAR2 DEFAULT NULL
)
return NUMBER;


Function generateStatisticsMedian
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_NUMBER_ARRAY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE'
)
return NUMBER;

Function generateStatisticsMedian
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_GEOMETRY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE',
    polygonClip       IN VARCHAR2 DEFAULT NULL
)
return NUMBER;

Function generateStatisticsMode
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_NUMBER_ARRAY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE'
)
return NUMBER;

Function generateStatisticsMode
(
    georaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    samplingFactor    IN VARCHAR2,
    samplingWindow    IN SDO_GEOMETRY,
    bandNumbers       IN VARCHAR2 DEFAULT NULL,
    nodata            IN VARCHAR2 DEFAULT 'FALSE',
    polygonClip       IN VARCHAR2 DEFAULT NULL
)
return NUMBER;

-- ---------------------------------------------------------------------
--    Update and Delete GeoRaster Object Metadata and Ancillary Data
--
--  SET procedures function as both UPDATE/MODIFY and DELETE.
--  In SET procedures, if the parameter is given as null, it will DELETE
--  the corresponding item/data in the georaster object only if the item
--  is allowed to be deleted (optional or minOccurs=0 in xml schema) and
--  without other dependency and inter-relationship issues.
--  Validation will be done in those procedures in both cases.
--  To avoid losing data, use them cautiously.
-- ---------------------------------------------------------------------

-- change the last two digits only
PROCEDURE setRasterType
(
  georaster     IN OUT MDSYS.SDO_GEORASTER,
  rasterType    IN     NUMBER
);

PROCEDURE setID
(
  georaster     IN OUT MDSYS.SDO_GEORASTER,
  id            IN     VARCHAR2
);

PROCEDURE setBlankCellValue
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   value        IN     NUMBER
);

PROCEDURE setDefaultColorLayer
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   defaultRGB   IN     MDSYS.SDO_NUMBER_ARRAY
);

PROCEDURE setDefaultRed
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   defaultRed   IN     NUMBER
);

PROCEDURE setDefaultGreen
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   defaultGreen IN     NUMBER
);

PROCEDURE setDefaultBlue
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   defaultBlue  IN     NUMBER
);

PROCEDURE setDefaultAlpha
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   defaultAlpha  IN     NUMBER
);

PROCEDURE setDefaultPyramidLevel
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   defaultPyramidLevel  IN     NUMBER
);

-- only if not spatial, temporal and band referenced
PROCEDURE setULTCoordinate
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   ultCoord     IN     MDSYS.SDO_NUMBER_ARRAY
);

PROCEDURE setSpatialReferenced
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   isReferenced IN     VARCHAR2
);

-- set TRUE only if spatial referenced
PROCEDURE setRectified
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   isRectified  IN     VARCHAR2
);

-- set TRUE only if rectified
PROCEDURE setOrthoRectified
(
   georaster        IN OUT MDSYS.SDO_GEORASTER,
   isOrthoRectified IN     VARCHAR2
);

PROCEDURE setModelSRID
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   srid         IN     NUMBER
);

PROCEDURE setSpatialResolutions
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   resolutions  IN     MDSYS.SDO_NUMBER_ARRAY
);

PROCEDURE setSRS
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   srs          IN     MDSYS.SDO_GEOR_SRS
);

-- value can be set only if spatial referenced
PROCEDURE setModelCoordLocation
(
   georaster     IN OUT MDSYS.SDO_GEORASTER,
   modelCoordLoc IN     VARCHAR2
);


PROCEDURE setBeginDateTime
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   beginTime    IN     TIMESTAMP WITH TIME ZONE
);

PROCEDURE setEndDateTime
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   endTime      IN     TIMESTAMP WITH TIME ZONE
);

PROCEDURE setSpectralUnit
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   unit         IN     VARCHAR2
);

PROCEDURE setSpectralResolution
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   resolution   IN     NUMBER
);

PROCEDURE setLayerOrdinate
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   layerNumber  IN     NUMBER,
   ordinate     IN     NUMBER
);

PROCEDURE setLayerID
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   layerNumber  IN     NUMBER,
   id           IN     VARCHAR2
);

PROCEDURE setScaling
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   layerNumber  IN     NUMBER,
   scalingFunc  IN     MDSYS.SDO_NUMBER_ARRAY
);

-- change binType if necessary
PROCEDURE setBinTable
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   layerNumber  IN     NUMBER,
   tableName    IN     VARCHAR2
);

PROCEDURE setBinFunction(
   georaster   IN OUT MDSYS.SDO_GEORASTER,
   layerNumber IN     NUMBER,
   binFunction IN     MDSYS.SDO_NUMBER_ARRAY
);

PROCEDURE setGrayScale
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   layerNumber  IN     NUMBER,
   grayScale    IN     MDSYS.SDO_GEOR_GRAYSCALE
);

PROCEDURE setGrayScaleTable
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   layerNumber  IN     NUMBER,
   tableName    IN     VARCHAR2
);

PROCEDURE setColorMap
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   layerNumber  IN     NUMBER,
   colorMap     IN     MDSYS.SDO_GEOR_COLORMAP
);

PROCEDURE setColorMapTable
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   layerNumber  IN     NUMBER,
   tableName    IN     VARCHAR2
);

PROCEDURE setVAT
(
   georaster    IN OUT MDSYS.SDO_GEORASTER,
   layerNumber  IN     NUMBER,
   vatName      IN     VARCHAR2
);

PROCEDURE setVersion
(
  georaster    IN OUT MDSYS.SDO_GEORASTER,
  majorVersion IN VARCHAR2,
  minorVersion IN VARCHAR2
);

PROCEDURE setStatistics
(
  georaster    IN OUT MDSYS.SDO_GEORASTER,
  layerNumber  IN NUMBER,
  statistics   IN MDSYS.SDO_NUMBER_ARRAY
);

--
-- NOTES
--   1) Whenever histogram is updated, new statistics must be provided.
--   2) If statistics is set with different samplingFactor/samplingWindow,
--      existing histogram is removed if not reset.
--   3) The samplingWindow must be inside the extent in the cell space.
--   4) If not specified, the default value for samplingFactor is 1.
--   5) If not specified, the default value for samplingWindow is the
--      whole image and it is removed from the metadata.
--
PROCEDURE setStatistics
(
  georaster    IN OUT MDSYS.SDO_GEORASTER,
  layerNumber  IN NUMBER,
  statistics   IN MDSYS.SDO_NUMBER_ARRAY,
  histogram    IN MDSYS.SDO_GEOR_HISTOGRAM,
  samplingFactor IN NUMBER DEFAULT NULL,
  samplingWindow IN MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

-- NOTES
--   1) The histogram table cannot be set if no statistics exist.
--   2) The histogram table is removed if histogramTable is NULL.
--   3) The samplingWindow must be inside the extent in the cell space.
--   4) If not specified, the default value for samplingFactor is 1.
--   5) If not specified, the default value for samplingWindow is the
--      whole image and it is removed from the metadata.
--
PROCEDURE setStatistics
(
  georaster    IN OUT MDSYS.SDO_GEORASTER,
  layerNumber  IN NUMBER,
  statistics   IN MDSYS.SDO_NUMBER_ARRAY,
  histogramTable IN VARCHAR2,
  samplingFactor IN NUMBER DEFAULT NULL,
  samplingWindow IN MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
);

--PROCEDURE setHistogram
--(
--  georaster    IN OUT MDSYS.SDO_GEORASTER,
--  layerNumber  IN NUMBER,
--  histogram    IN MDSYS.SDO_GEOR_HISTOGRAM,
--  samplingFactor IN NUMBER DEFAULT NULL,
--  samplingWindow IN MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
--);

PROCEDURE setHistogramTable
(
  georaster    IN OUT MDSYS.SDO_GEORASTER,
  layerNumber  IN NUMBER,
  tableName    IN VARCHAR2
);

PROCEDURE setSourceInfo
(
   georaster   IN OUT MDSYS.SDO_GEORASTER,
   sourceInfo  IN VARCHAR2
);

PROCEDURE addSourceInfo
(
   georaster   IN OUT MDSYS.SDO_GEORASTER,
   sourceInfo  IN VARCHAR2
);

FUNCTION getSourceInfo
(
   georaster   IN MDSYS.SDO_GEORASTER
) RETURN MDSYS.SDO_STRING2_ARRAY DETERMINISTIC PARALLEL_ENABLE;

-- ---------------------------------------------------------------------
--           multiple nodata values/value ranges
-- ---------------------------------------------------------------------

-- remove one NODATA value
PROCEDURE deleteNODATA
(
   georaster     IN OUT MDSYS.SDO_GEORASTER,
   layerNumber   IN     NUMBER,
   NODATA        IN     NUMBER
);

-- remove multiple NODATA values or value ranges
PROCEDURE deleteNODATA
(
   georaster     IN OUT MDSYS.SDO_GEORASTER,
   layerNumber   IN     NUMBER,
   NODATA        IN     MDSYS.SDO_RANGE_ARRAY
);

-- add one NODATA value
PROCEDURE addNODATA
(
   georaster     IN OUT MDSYS.SDO_GEORASTER,
   layerNumber   IN     NUMBER,
   NODATA        IN     NUMBER
);

-- add multiple NODATA values or value ranges
PROCEDURE addNODATA(
   georaster     IN OUT MDSYS.SDO_GEORASTER,
   layerNumber   IN     NUMBER,
   NODATA        IN     MDSYS.SDO_RANGE_ARRAY
);

-- retrieve all NODATA values and value ranges
FUNCTION getNODATA
(
   georaster     IN     MDSYS.SDO_GEORASTER,
   layerNumber   IN     NUMBER
) RETURN MDSYS.SDO_RANGE_ARRAY DETERMINISTIC  PARALLEL_ENABLE;


-- ---------------------------------------------------------------------
--           Bitmap Mask Support
-- ---------------------------------------------------------------------

--
-- NAME:
--   setBitmapMask
--
-- DESCRIPTION
--   Attach, replace or remove a bitmap mask to a given GeoRaster layer
--
-- ARGUMENTS
--   georaster   - the GeoRaster object to be operated on
--   layerNumber - an object layer (0) or a subLayer (>0)
--   mask        - the 1BIT bitmap mask
--   NODATAMask  - spacifies whether the mask is going to be a NODATA mask
--
-- NOTES
--   If the GeoRaster object is NULL, nothing is to be done.
--   If the mask is NULL, any exisiting bitmap mask associated with the given
--   layer is removed.
--   If the mask is not a 1BIT GeoRaster object or has wrong dimension size,
--   error ORA-13470 is raised.
--   If the mask is not NULL or invalid, any exisiting bitmap mask associated
--   with the given layer is replaced with the new one.
--

PROCEDURE setBitmapMask
(
   georaster   IN OUT MDSYS.SDO_GEORASTER,
   layerNumber IN     NUMBER,
   mask        IN     MDSYS.SDO_GEORASTER,
   NODATAMask  IN     VARCHAR2 DEFAULT NULL
);

--
-- NAME:
--   getBitmapMask
--
-- DESCRIPTION
--   Retrieve a bitmap mask as a standalone GeoRaster object
--
-- ARGUMENTS
--   georaster    - the source GeoRaster object
--   layerNumber  - an object layer (0) or a subLayer (>0)
--   storageParam - the storage parameter for the output GeoRaster object
--   mask         - the result GeoRaster object
--
-- NOTES
--   If the source GeoRaster object is NULL or there is no bitmap mask
--   associated with the given layer, a NULL GeoRaster object is returned.
--
PROCEDURE getBitmapMask
(
   georaster    IN     MDSYS.SDO_GEORASTER,
   layerNumber  IN     NUMBER,
   storageParam IN     VARCHAR2,
   mask         IN OUT MDSYS.SDO_GEORASTER
);

--
-- NAME:
--   getBitmapMaskValue
--
-- DESCRIPTION
--   Retrieve a cell value of a bitmap mask
--
-- ARGUMENTS
--   georaster    - the source GeoRaster object
--   layerNumber  - an object layer (0) or a subLayer (>0)
--   pyramidLevel - the pyramid level
--   rowNumber    - row number in cell space
--   colNumber    - column number in cell space
--   ptGeom       - a point geometry in either cell space
--                  or model space
-- RETURNS
--   Number
--
-- NOTES
--   If the source GeoRaster object is NULL or there is no bitmap mask
--   associated with the specfied raster layer, NULL is returned.
--   If the point position is out of scope, ORA-13415 is raised.
--
FUNCTION getBitmapMaskValue
(
   georaster    IN    MDSYS.SDO_GEORASTER,
   layerNumber  IN    NUMBER,
   pyramidLevel IN    NUMBER,
   rowNumber    IN    NUMBER,
   colNumber    IN    NUMBER
) RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

FUNCTION getBitmapMaskValue
(
   georaster    IN    MDSYS.SDO_GEORASTER,
   layerNumber  IN    NUMBER,
   pyramidLevel IN    NUMBER,
   ptGeom       IN    MDSYS.SDO_GEOMETRY
) RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--   getBitmapMaskSubset
--
-- DESCRIPTION
--   Retrieve a subset of a bitmap mask
--
-- ARGUMENTS
--   georaster    - the source GeoRaster object
--   layerNumber  - an object layer (0) or a subLayer (>0)
--   pyramidLevel - the pyramid level
--   window/inWindow - the area of interest
--   rasterBlob   - the BLOB holding the output
--   outWindow    - the actual output window
--   storageParam - storage parameters for the output
--
-- NOTES
--   If the source GeoRaster object is NULL or there is no bitmap mask
--   associated with the specfied raster layer, the result BLOB is empty.
--   If not specified, the storageParm for the output follows that of
--   the source GeoRaster object.
--
PROCEDURE getBitmapMaskSubset
(
   georaster      IN     MDSYS.SDO_GEORASTER,
   layerNumber    IN     NUMBER,
   pyramidLevel   IN     NUMBER,
   window         IN     MDSYS.SDO_NUMBER_ARRAY,
   rasterBlob     IN OUT NOCOPY BLOB,
   storageParam   IN     VARCHAR2 DEFAULT NULL
);

PROCEDURE getBitmapMaskSubset
(
   georaster      IN     MDSYS.SDO_GEORASTER,
   layerNumber    IN     NUMBER,
   pyramidLevel   IN     NUMBER,
   window         IN     MDSYS.SDO_GEOMETRY,
   rasterBlob     IN OUT NOCOPY BLOB,
   storageParam   IN     VARCHAR2 DEFAULT NULL
);

PROCEDURE getBitmapMaskSubset
(
   georaster      IN     MDSYS.SDO_GEORASTER,
   layerNumber    IN     NUMBER,
   pyramidLevel   IN     NUMBER,
   inWindow       IN     MDSYS.SDO_NUMBER_ARRAY,
   rasterBlob     IN OUT NOCOPY BLOB,
   outWindow      OUT    MDSYS.SDO_NUMBER_ARRAY,
   storageParam   IN     VARCHAR2 DEFAULT NULL
);

PROCEDURE getBitmapMaskSubset
(
   georaster      IN     MDSYS.SDO_GEORASTER,
   layerNumber    IN     NUMBER,
   pyramidLevel   IN     NUMBER,
   inWindow       IN     MDSYS.SDO_GEOMETRY,
   rasterBlob     IN OUT NOCOPY BLOB,
   outWindow      OUT    MDSYS.SDO_NUMBER_ARRAY,
   storageParam   IN     VARCHAR2 DEFAULT NULL
);

--
-- NAME:
--   hasBitmapMask
--
-- DESCRIPTION
--   Check whether a bitmap map exists for the specified GeoRaster layer
--
-- ARGUMENTS
--   georaster    - the source GeoRaster object
--   layerNumber  - an object layer (0) or a subLayer (>0)
--
-- RETURN
--   'NULL' if the GeoRaster object is NULL
--   'TRUE' if a bitmap mask exists
--   'FALSE' otherwise
--
FUNCTION hasBitmapMask
(
   georaster      IN     MDSYS.SDO_GEORASTER,
   layerNumber    IN     NUMBER
) RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--   hasNODATAMask
--
-- DESCRIPTION
--   Check whether a NODATA bitmap map exists for the specified GeoRaster layer
--
-- ARGUMENTS
--   georaster    - the source GeoRaster object
--   layerNumber  - an object layer (0) or a subLayer (>0)
--
-- RETURN
--   'NULL' if the GeoRaster object is NULL
--   'TRUE' if a bitmap mask exists and is a NODATA mask
--   'FALSE' otherwise
--
FUNCTION hasNODATAMask
(
    georaster     IN     MDSYS.SDO_GEORASTER,
    layerNumber   IN     NUMBER
) RETURN VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--   setNODATAMask
--
-- DESCRIPTION
--   Specifies whether or not a bitmap mask on the specified GeoRaster layer
--   is NODATA mask.
--
-- ARGUMENTS
--   georaster    - the source GeoRaster object
--   layerNumber  - an object layer (0) or a subLayer (>0)
--   isNODATAMask - 'TRUE' or 'FALSE'
--
-- RETURN
--   'NULL' if the GeoRaster object is NULL
--   'TRUE' if a bitmap mask exists and is a NODATA mask
--   'FALSE' otherwise
--
PROCEDURE setNODATAMask
(
    georaster     IN OUT MDSYS.SDO_GEORASTER,
    layerNumber   IN     NUMBER,
    isNODATAMask  IN     VARCHAR2
);


-- ---------------------------------------------------------------------
--           Validate GeoRaster Objects
-- ---------------------------------------------------------------------

--
-- NAME:
--      validateGeoRaster
--
-- DESCRIPTION
--      validate a GeoRaster object
--
-- ARGUMENTS
--      georaster    - The SDO_GEORASTER object to be validated
--
-- RETURNS
--      1. 'TRUE' if the georaster is valid
--      2. 'NULL' if the georaster object is null
--      3. A Oracle standard error code for known errors
--      4. 'FALSE' for unknown errors
--
FUNCTION validateGeoRaster
(
   georaster  IN MDSYS.SDO_GEORASTER
)
return VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;


--
-- NAME:
--      schemaValidate
--
-- DESCRIPTION
--      Validate GeoRaster Metadata against the GeoRaster XML Schema
--      It explains the reasons if the metadata is not valid
--
-- ARGUMENTS
--      georaster - The SDO_GEORASTER object of which the metadata is
--                  to be validated
--
-- RETURNS
--      1. 'TRUE' if the georaster is valid against XML schema
--      2. 'NULL' if the georaster or its metadata is null
--      3. Otherwise it prints Oracle standard error codes for
--         detailed errors and stop directly
--
FUNCTION schemaValidate
(
   georaster  IN MDSYS.SDO_GEORASTER
)
return VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;


-- ---------------------------------------------------------------------
-- import from and export to other raster sources/formats:
--   local FILE, HTTP file, ORDImage, BLOB, BFILE, GeoHeader files, etc
-- ---------------------------------------------------------------------

--
-- NAME:
--      importFrom procedures
--
-- DESCRIPTION
--      import from FILE, HTTP into a GeoRaster object
--
-- ARGUMENTS
--      sourceFormat   - source format, such as JPEG, TIFF, etc.
--      sourceType     - FILE or HTTP, etc.
--      sourceName     - source file name with fullpath
--      storageParam   - the GeoRaster object storage formats
--      georaster      - original and result GeoRaster object
--                       It must be an existing GeoRaster object
--      r_sourceFormat - raster sourceFormat as above
--      r_sourceType   - raster sourceType as above
--      r_sourceName   - raster sourceName as above
--      r_sourceBlob   - Blob holding source image file
--      h_sourceFormat - geo-header sourceFormat as above
--      h_sourceType   - geo-header sourceType as above
--      h_sourceName   - geo-header sourceName as above
--      h_sourceClob   - Clob holding source geo-header file
--
-- RETURNS
--      sdo_georaster object
--

PROCEDURE importFrom
(
   georaster      IN OUT MDSYS.SDO_GEORASTER,
   storageParam   IN     VARCHAR2,
   r_sourceFormat IN     VARCHAR2,
   r_sourceType   IN     VARCHAR2,
   r_sourceName   IN     VARCHAR2,
   h_sourceFormat IN     VARCHAR2 default null,
   h_sourceType   IN     VARCHAR2 default null,
   h_sourceName   IN     VARCHAR2 default null
);

PROCEDURE importFrom
(
   georaster      IN OUT MDSYS.SDO_GEORASTER,
   storageParam   IN     VARCHAR2,
   r_sourceFormat IN     VARCHAR2,
   r_sourceBlob   IN     BLOB,
   h_sourceFormat IN     VARCHAR2 default null,
   h_sourceClob   IN     CLOB default null
);

--
-- NAME:
--      exportTo procedures
--
-- DESCRIPTION
--      export GeoRaster object to other types
--
-- ARGUMENTS
--      destFormat   - dest format, such as JPEG, TIFF, etc.
--      destType     - FILE, etc.
--      destName     - dest file name with fullpath
--      subsetParam  - subset/crop parameters for output a subset
--      georaster    - the GeoRaster object to be exported
--      r_destFormat - raster destFormat as above
--      r_destType   - raster destType as above
--      r_destName   - raster destName as above
--      r_destBlob   - Blob to hold the output image file
--      h_destFormat - geo-header destFormat as above
--      h_destType   - geo-header destType as above
--      h_destName   - geo-header destName as above
--      h_destClob   - Clob to hold the output geo-header file
--
-- RETURNS
--

PROCEDURE exportTo
(
   georaster      IN  MDSYS.SDO_GEORASTER,
   subsetParam    IN  VARCHAR2,
   r_destFormat   IN  VARCHAR2,
   r_destType     IN  VARCHAR2,
   r_destName     IN  VARCHAR2,
   h_destFormat   IN  VARCHAR2 default null,
   h_destType     IN  VARCHAR2 default null,
   h_destName     IN  VARCHAR2 default null
);

PROCEDURE exportTo
(
   georaster      IN      MDSYS.SDO_GEORASTER,
   subsetParam    IN      VARCHAR2,
   destFormat     IN      VARCHAR2,
   destBlob       IN  OUT NOCOPY BLOB
);

PROCEDURE exportTo
(
   georaster      IN      MDSYS.SDO_GEORASTER,
   subsetParam    IN      VARCHAR2,
   r_destFormat   IN      VARCHAR2,
   r_destBlob     IN  OUT NOCOPY BLOB,
   h_destFormat   IN      VARCHAR2,
   h_destClob     IN  OUT NOCOPY CLOB
);

--
-- NAME:
--      getGeoreferenceType  function
--
-- DESCRIPTION
--      retrieve GeoReference type for the specified
--      GeoRaster object, so far, only three types are
--      supported by this function as below, for all other
--      types, UNKNOWN will return
--
--              1    --    Unknown
--              2    --    Affine Transform
--              3    --    Direct Linear Transform (DLT)
--              4    --    Rational Polynomial Coefficient (RPC)
--
-- ARGUMENTS
--      georaster   - geoRaster object
--
-- RETURNS
--      an integer to represent GeoReference type
FUNCTION getGeoreferenceType
(
  georaster    IN   MDSYS.SDO_GEORASTER
)
return number;

--
-- NAME:
--      isLossless
--
-- DESCRIPTION
--      Returns a string value that indicates whether or not the GeoRaster
--      object is compressed losslessly or lossily, or not compressed at all.
--
-- ARGUMENTS
--      georaster - The SDO_GEORASTER object of which losslessness is to be
--      determined.
--
-- RETURNS
--      1. 'TRUE' if GeoRaster object is losslessly compressed
--      2. 'NULL' if the georaster or its metadata is null, or if the
--         GeoRaster object is not compressed.
--      3. 'FALSE' if GeoRaster object is lossily compressed
--
FUNCTION isLossless
(
  geor    IN   MDSYS.SDO_GEORASTER
)
return VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;


-- ---------------------------------------------------------------------
--    Reproject GeoRaster Objects
--
-- ---------------------------------------------------------------------

--
-- NAME:
--      reproject
--
-- DESCRIPTION
--      Re-project a geo-referenced GeoRaster object into a new projection
--      defined by SRID which is different from the current projection.
--
--      NOTE:
--         (1) The input GeoRaster object should have a supported projection;
--         (2) If not georeferenced, use setSRS to setup if the projection
--             was known;
--         (3) The new projection should be valid and different from current one.
--
-- ARGUMENTS
--      inGeoRaster    - The source SDO_GEORASTER object to be re-projected
--      pyramidLevel   - The pyramid level of the source GeoRaster object
--      cropArea       - The crop area to be re-projected. If it is of
--                     - SDO_GEOMETRY type, it can be in any coordinate space.
--                       If it is of SDO_NUMBER_ARRAY, it is in cell space only
--      layerNumbers   - The logical layers
--      bandNumbers    - The physical bands in cell space
--      resampleParam  - The resampling method
--      storageParam   - A string specifying storage parameters for the result.
--                       The details of the parameters are explained in
--                       GeoRaster Manual
--      outSRID        - The SRID defines the new projection
--      outGeoRaster   - The re-projected persistent GeoRaster Object
--      rasterBlob     - The re-projected transient GeoRaster Object
--      outArea        - The re-projected transient GeoRaster Object extent
--                       in model coordinates.
--      outWindow      - The re-projected transient GeoRaster Object extent
--                       in cell coordinates.
--      bgValues       - background values for filling empty pixels
--                       one for each band
--
-- RETURNS
--      In the outGeoRaster is the re-projected GeoRaster object

-- For the persistent reprojection, the new GeoRatser is stored in table
PROCEDURE reproject (
     inGeoraster       IN MDSYS.SDO_GEORASTER,
     resampleParam     IN VARCHAR2,
     storageParam      IN VARCHAR2,
     outSRID           IN NUMBER,
     outGeoraster      IN OUT MDSYS.SDO_GEORASTER,
     bgValues          IN SDO_NUMBER_ARRAY DEFAULT NULL
);

PROCEDURE reproject (
     inGeoraster       IN MDSYS.SDO_GEORASTER,
     pyramidLevel      IN NUMBER,
     cropArea          IN SDO_GEOMETRY,
     layerNumbers      IN VARCHAR2,
     resampleParam     IN VARCHAR2,
     storageParam      IN VARCHAR2,
     outSRID           IN NUMBER,
     outGeoraster      IN OUT MDSYS.SDO_GEORASTER,
     bgValues          IN SDO_NUMBER_ARRAY DEFAULT NULL
);

PROCEDURE reproject (
     inGeoraster       IN MDSYS.SDO_GEORASTER,
     pyramidLevel      IN NUMBER,
     cropArea          IN SDO_NUMBER_ARRAY,
     bandNumbers       IN VARCHAR2,
     resampleParam    IN VARCHAR2,
     storageParam      IN VARCHAR2,
     outSRID           IN NUMBER,
     outGeoraster      IN OUT MDSYS.SDO_GEORASTER,
     bgValues          IN SDO_NUMBER_ARRAY  DEFAULT NULL
);

-- For the transient reprojection (on the fly),
-- the new GeoRatser is stored as BLOB
PROCEDURE reproject (
     inGeoraster       IN MDSYS.SDO_GEORASTER,
     pyramidLevel      IN NUMBER,
     cropArea          IN SDO_GEOMETRY,
     layerNumbers      IN VARCHAR2,
     resampleParam     IN VARCHAR2,
     storageParam      IN VARCHAR2,
     outSRID           IN NUMBER,
     rasterBlob        IN OUT NOCOPY BLOB,
     outArea           OUT SDO_GEOMETRY,
     outWindow         OUT SDO_NUMBER_ARRAY,
     bgValues          IN SDO_NUMBER_ARRAY DEFAULT NULL
);

PROCEDURE reproject (
     inGeoraster       IN MDSYS.SDO_GEORASTER,
     pyramidLevel      IN NUMBER,
     cropArea          IN SDO_NUMBER_ARRAY,
     bandNumbers       IN VARCHAR2,
     resampleParam     IN VARCHAR2,
     storageParam      IN VARCHAR2,
     outSRID           IN NUMBER,
     rasterBlob        IN OUT NOCOPY BLOB,
     outArea           OUT SDO_GEOMETRY,
     outWindow         OUT SDO_NUMBER_ARRAY,
     bgValues          IN SDO_NUMBER_ARRAY  DEFAULT NULL
);


-- ---------------------------------------------------------------------
--    Georeference GeoRaster Using Control Points (GCPs)
--
-- ---------------------------------------------------------------------

--
-- NAME:
--      georeference
--
-- DESCRIPTION
--      This function will georeference an image using a set of
--      control points (GCPs).
--
-- ARGUMENTS
--
--      georaster      - The source SDO_GEORASTER object to be georeferenced
--      FFMethodType   - The (rational) polynomial function used as georeference model
--      nGCP           - Number of GCPs provided
--      GCPs           - The GCP collection. Each GCP represents a points pair, one on
--                       image and another in some coordinate system or another image.
--      gcpGeorefModel - A data structure contains FFMethodType, nGCP, GCPs,solutionAccuracy
--      storeGCP       - A flag indicate whether the GCPs should be stored in the georaster
--                       metadata.
--      SRID           - The GCP's model coordinates SRID
--      modelCoordLoc  - The location on cell for the corresponding model coords
--      setResolution  - whether to set the spatial resolution in the
--                             SRS. "TRUE" or "FALSE" By default it is FALSE.
--
-- RETURNS
--      The solution accuracy (rowRMS, colRMS, totalRMS) and the ground positionning
--      accuracy (xRMS, yRMS, (zRMS), totalModelRMS) if check points provided
--
Function georeference(
     inGeoraster      IN OUT MDSYS.SDO_GEORASTER,
     FFMethodType     IN VARCHAR2,
     nGCP             IN Number,
     GCPs             IN SDO_GEOR_GCP_COLLECTION,
     storeGCP         IN VARCHAR2 DEFAULT 'TRUE',
     SRID             IN Number DEFAULT NULL,
     modelCoordinateLocation  IN Number DEFAULT NULL,
     setResolution     IN VARCHAR2 DEFAULT NULL
)Return MDSYS.SDO_NUMBER_ARRAY;        -- RMSs


Function georeference(
    inGeoraster       IN OUT MDSYS.SDO_GEORASTER,
    gcpGeorefModel    IN SDO_GEOR_GCPGEOREFTYPE,
    storeGCP          IN VARCHAR2 DEFAULT 'TRUE',
    SRID              IN Number DEFAULT NULL,
    modelCoordinateLocation  IN Number DEFAULT NULL,
    setResolution     IN VARCHAR2 DEFAULT NULL
)Return MDSYS.SDO_NUMBER_ARRAY;        -- RMSs

-- For this function, the GCPs should be already stored in the metadata
--
Function georeference(
    inGeoraster      IN OUT MDSYS.SDO_GEORASTER,
    FFMethod         IN VARCHAR2 DEFAULT NULL,
    SRID              IN Number DEFAULT NULL,
    modelCoordinateLocation  IN Number DEFAULT NULL,
    setResolution     IN VARCHAR2 DEFAULT NULL
)Return MDSYS.SDO_NUMBER_ARRAY;        -- RMSs

--
-- Georeference XML data manipulation functions
--
Function getGCPGeorefModel(
    inGeoraster       IN MDSYS.SDO_GEORASTER
)Return MDSYS.SDO_GEOR_GCPGEOREFTYPE;

PROCEDURE setGCPGeorefModel(
    inGeoraster       IN OUT MDSYS.SDO_GEORASTER,
    gcpGeorefModel    IN SDO_GEOR_GCPGEOREFTYPE
);


Function getGCPGeorefMethod(
    inGeoraster       IN MDSYS.SDO_GEORASTER
)Return VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;


PROCEDURE setGCPGeorefMethod(
    inGeoraster       IN OUT MDSYS.SDO_GEORASTER,
    georefMethod          IN VARCHAR2
);

Function getControlPoint(
    inGeoraster       IN MDSYS.SDO_GEORASTER,
    controlPointID    IN VARCHAR2
)Return SDO_GEOR_GCP DETERMINISTIC PARALLEL_ENABLE;

PROCEDURE setControlPoint(
    inGeoraster       IN OUT MDSYS.SDO_GEORASTER,
    controlPoint      IN SDO_GEOR_GCP
);

PROCEDURE deleteControlPoint(
    inGeoraster       IN OUT MDSYS.SDO_GEORASTER,
    controlPointID    IN VARCHAR2
);


-- ---------------------------------------------------------------------
--    Rectify GeoRaster Objects
--
-- ---------------------------------------------------------------------

--
-- NAME:
--      rectify
--
-- DESCRIPTION
--      Rectify a geo-referenced GeoRaster object.
--
--      NOTE:
--         (1) The input GeoRaster object should be referenced
--         (2) Use average elevation height or dem georaster (Ortho-Rectify)
--
-- ARGUMENTS
--
-- Input:
--      inGeoRaster      - Source SDO_GEORASTER object to be re-projected
--      pyramidLevel     - The pyramid level of the source GeoRaster object
--      elevationParam   - Average elevation height of the surface
--      dem              - Digital elevation model for ortho-rectification
--
-- Request:
--      outSRID          - The SRID defines the new projection
--      outModelCoordLoc - Specify the output cell coordinate system type,
--                          0 for CENTER or 1 for UPPERLEFT.
--      cropArea         - The crop area of the output image to be re-projected.
--      polygonClip      - Whether to do polygon clipping. If NULL, defaults
--                         to FALSE.
--      layerNumbers     - The logical layers to be processed
--      outResolutions   - Resolution(s) of each dimension of the output image
--      resolutionUnit   - Unit of the resolution
--      referencePoint   - The reference point to alligned the output image.
--                         If this is null, the reference point implicitly
--                         uses the upper left corner of the cropArea, or
--                         when the cropArea is null, the upper left corner
--                         of the projected output extent.
--                         This reference point must be in a SDO_GEOMETRY that
--                         describes a point.
--      resampleParam    - The resampling method
--
-- Output:
--      storageParam     - A string specifying storage parameters for the result.
--      outGeoRaster     - Re-projected persistent GeoRaster Object
--      rasterBlob       - The re-projected transient GeoRaster Object
--      outArea          - The re-projected transient GeoRaster Object extent
--                         in model coordinates.
--      outWindow        - The re-projected transient GeoRaster Object extent
--                         in cell coordinates.
--      bgValues         - Background values for filling empty pixels
--                         one for each band
--
-- RETURNS
--      For persistent output the outGeoRaster is the rectified GeoRaster object
--      For transient output the rasterBlob is the rectified resulted image and
--      outArea and outWindow specify the transient rasterBlob information

PROCEDURE rectify (
    -- input
    inGeoRaster       IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    elevationParam    IN VARCHAR2,
    dem               IN MDSYS.SDO_GEORASTER,
    -- request
    outSRID           IN NUMBER,
    outModelCoordLoc  IN NUMBER,
    cropArea          IN SDO_GEOMETRY,
    polygonClip       IN VARCHAR2,
    layerNumbers      IN VARCHAR2,
    outResolutions    IN SDO_NUMBER_ARRAY,
    resolutionUnit    IN VARCHAR2,
    referencePoint    IN MDSYS.SDO_GEOMETRY,
    resampleParam     IN VARCHAR2,
    -- output (georaster)
    storageParam      IN VARCHAR2,
    outGeoRaster      IN OUT MDSYS.SDO_GEORASTER,
    bgValues          IN SDO_NUMBER_ARRAY DEFAULT NULL
);

PROCEDURE rectify (
    -- input
    inGeoRaster       IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER,
    elevationParam    IN VARCHAR2,
    dem               IN MDSYS.SDO_GEORASTER,
    -- request
    outSRID           IN NUMBER,
    outModelCoordLoc  IN NUMBER,
    cropArea          IN SDO_GEOMETRY,
    polygonClip       IN VARCHAR2,
    layerNumbers      IN VARCHAR2,
    outResolutions    IN SDO_NUMBER_ARRAY,
    resolutionUnit    IN VARCHAR2,
    referencePoint    IN MDSYS.SDO_GEOMETRY,
    resampleParam     IN VARCHAR2,
    -- output (blob)
    storageParam      IN VARCHAR2,
    rasterBlob        IN OUT NOCOPY BLOB,
    outArea           OUT SDO_GEOMETRY,
    outWindow         OUT SDO_NUMBER_ARRAY,
    bgValues          IN SDO_NUMBER_ARRAY DEFAULT NULL
);

--
-- NAME:
--      generateSpatialResolutions
--
-- DESCRIPTION
--      Generate the spatial resolutions and set it to the georaster metadata
--
--      NOTE: The input GeoRaster object should be referenced otherwise null
--            is returned.
--
-- PARAMETERS:
--      geoRaster        - Source SDO_GEORASTER object
--      outResolution    - Output resolution in SDO_NUMBER_ARRAY for pyramid
--                         level 0 and in given georaster's SRID and unit.
--

PROCEDURE generateSpatialResolutions(
    geoRaster         IN OUT MDSYS.SDO_GEORASTER,
    outResolution     OUT SDO_NUMBER_ARRAY);

--
-- NAME:
--      generateSpatialResolutions
--
-- DESCRIPTION
--      Generate the spatial resolutions
--
--      NOTE: The input GeoRaster object should be referenced otherwise null
--            is returned.
--
-- PARAMETERS:
--      geoRaster        - Source SDO_GEORASTER object
--      pyramidLevel     - The pyramid level of the returned resolution,
--                         default to the pyramid level 0.
--      SRID             - The SRID for the returned resolution, default to the
--                         given georaster's SRID.
--      resolutionUnit   - The unit of the returned resolution. default to the
--                         unit of the SRID.
--
-- RETURN:
--      Resolution in SDO_NUMBER_ARRAY for the given georaster.
--
FUNCTION generateSpatialResolutions(
    geoRaster         IN MDSYS.SDO_GEORASTER,
    pyramidLevel      IN NUMBER DEFAULT NULL,
    SRID              IN NUMBER DEFAULT NULL,
    resolutionUnit    IN VARCHAR2 DEFAULT NULL)
RETURN SDO_NUMBER_ARRAY;

END SDO_GEOR;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_GEOR_INT" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
82ae 173d
HucZ7We71NGpp51mtwxfwrZRDUMwg81MDNCGU/P/vqpEKJlf/RFWRdrEdDPKDKA7eaF3yPWY
7R8P0za+kTcUtSzuhFHOFvHxLAAAmHmRgoLJ91YrEFZvbelFlpec4G2zqrX5+ClPtc5zJLCq
c/iqTbROTExrwK4+uc7ecnzpRJiYhOOQFrm9Q0lolB456hEuWtZty3PNH6A+q0CdxWZAnZCi
HVW8TG3lUYrMqg/fDX5QPuCACAApVz+GCpbC1WjtP0JnD1RMEL6xPVqq/BhvjLGsp5isImT5
ks+WCp/46LOONA66R66gBoLjbrnGBjhxccuZvT8ElnuYLYA9tB8r9+tvtnuXNerOKbCWD2Mw
zi3GWnxS/MzXordsa5TTmmTbqlFtrFJWEpws16/WxX3QoBEe5a9kU1KeFq3Y/Qm8dIqD6Wze
M3kf1UwfTJSn9GZszNcbGU0klIz9Jn5gTc7Vmuvc0DirCQ9QUd647843OTzaC8AjfyoIYNKp
jxnYi7AisdfZ9G9Vb64A3PFxv64RznRqYAuvglRp1CeJNbJdGKHCLx+J7gl/SLUgA7vyh7fL
jdpxvG5dBAWNkqrW5Vt3CqeAQJdVbUaGhYACeJW87n0ph+5egbBtwxcAbGziM44oAOeQ+pPC
q/mgIzEhlTxHdy1c3P7OhyqRV5QdlVXEAO5T4JqrPbSlsN6KP5GR5AYKeINiuXxiV/lhH2nG
fmxJbRXt7BbCYkD8JkVA9l0L/CdLlgpxCWYa8JmTOHUNYovSETbK6QCpyptrdfRKPUv8/7EY
2D/QG9eFIgSwMsQQIpSJb4CuoW6O+Hh5hyusEXbsq8igNyNA5xFsMCViR7Y3QbesiYq+mUJ9
AyY+hrrl4wXypU5OESmOnAhIFMkZNn5T/NlbWKO2Bo0MNdg3+1xBL56hUg1MnibN4HZEm0oJ
5mn00ww9R8NHviO+omIzR1KSdMGuTRxq7OwdF+9MENsOO4PycRoUc/PxRkHHKCk5v0ReOSvf
KoUUxmqUR+NUoaLq4I0WUkdKXdsw9JTtUEoZZ7IDkSMk4k3J3kJi7EXTDNl3BfKy8NiqAlQ1
j6M96+AFb8C8nrpMwL1gKcCn4CaeBapnB+LgKOOfALequ1jE4Alo8erYp0fGXEhrd2otnHkp
V37neZlIcRM7q/8RFkXS25oJqMRm6c/xNuBpAuLdU02dlYOy85Rdxuk3ZfoJW4S3lxPYmKwc
rg24JcTUamieUs1ESlZFJvbwUrI5zdxjOZavkTbKVtQUrA44rqbxtOOmFDM2j1ODhAK8OLm0
mwnxXhW4WOvxZhy+boxj/iU1ukucTl3R/h9FEEBwvfph9wKGkcfqb84gddOdIBKhG6RgJpuC
XSf4UOyUDdV16A0t8oUpq6vWh1nsBuMpSyu0KtguGM0jg3G92sWD3h7iyTTRqO1OpCkQ1yT/
QVKszt5vLTGAxo6z2e3hay2b1YbgvIcHLcJKhZOIC66c5d/tm+PX9p7U/NfguhdORpojLZ9/
vQ2FR17d61d8jqXOjsEDFmTY49Xnn4OHKObNJGMjYcMyQgLEjoZGk4n7bG+WFzRDmBlieNVu
VFM/n9Y1CY0LjpWTaBX0jIC9E2LEnW5RDZWzI0HFvua/d9NrLRDgjFhY5fr8Oaw0zfWjJVN/
/CQE5h9miglUlmB9vJz4B1fmlFqmvleHJjVu/bnN5aMnT5VS1V3U4Z3UjFKnZ4QdE0n9wrY7
Q2KAyCZjyGDJ3OepQXbzqVT1NqYJZxymes6/30Cp22pVoZ7QIsp4MuqNU960Qsu8898jSetL
d3jZ4/L5gtKUX2mSEOpOCqEb1XWZXQaPEXU3psCmCGKJh0uZOclnyeFZmI2gQ25pxTwsiL1R
PViXUzPcVTPLDqGWxO02AStSTWhGYRzH1VWirfsE07TrLHHgk61j6MT3soxjeo5gDk9Jl0C3
2bQJt4HLVcKeAxEgwnS515AGMTGQbrRRH8B91Mg13Te9LB0BbLOAEDUAsShaBb210mot0yvO
FQ3zi8PrPItYy7nQLOhT5Zw0fteFcB7fStKRVbgFToxIG+3XE75xy3eE5YQVHdxg/n5pPF80
4IOO7bYxEhgCm3SVx/Hgeyzs6OOKz3tMHO5GaLRBsx7IyLZIWbQ/17jPMpCkkw+OXCh+Rq0I
N6NeFyQd2/w8s4GiSfJ+VkqyIltGqEg7WsW4ilyC2nVMv3AaVU/uu0KrS/XsMxqtSKHq3zLQ
egHdOKErb7JKZhR55XqJXSgOkQ8TUcM8IS8UldgR+GCgGKkloNPRAHTMbmyuURne4mjcoixE
sEvh1EdrNWfBkOPLjZbUhRZ+WF3B0RvIQgQ7uFA7x1GyKJgVsiISUFA6t6dmHgK60aka8WdR
12DsbjykfLXvxKZM0IhiGaTixNrL2nUq9rF3to6gqUF/yNvGn1691fyblauNQ5HW/w6QB46M
VKY6NP6+V2Hm+jc3ZaRvD1ggWkWLEa5tMBjzXPhKOCDufwRZL0bkkYCPIet7l8MlLAK7kf0u
OHhJwX3R48TUm6bL4Nqhyz9nf7ijdv7hK74So8jrTZhqNv31kLRYPDyc7MGrSjFIGb0NnBQh
GxpD0C0q7UkncDkMk7S6C5w2iOyn516T0+bVLTWm7H9YegAmsO1xR+v1TAmJbL805WlXHRP2
wrvFLXpUkWvnAN3douDdXtyohN54H1VCoeNlNIjeVB4/NupGhdZwiekkO6gXCs+PGwdD6LRV
a7hjgYjWnLoFlY9PULVGP9OSowIeQNj3nTb82ICTIVL8+n9GnWKhzH1ixRwAIaCTxwiKQkRH
8X8oCRvBEP+nYwND+OZxL73XoxxNhDboCt6kuooE6R0jy5h3xOVx7Vc12FAd6r4hj2y9LYE9
in07FSd3MA6LVMlzRCmLUWSoARyjlYkYu517aG8Q0JgnAfSvTCi2CmvJAvcAYlJpPqTuwzLd
X/sFNz2kEcukbXgLbS97NK2q022v1Y+CbLLXhutRN7IyaCkdCOW9T3IR5EJghqctAT70+/+u
PHM3Rm5H5qZ+4PXE5ndiZHAi3a39SjP1vEAxc9Wy4bj/dNyxdbcPOz5zTX7KOC6LVIda2bfN
MqzG955IBEL8BojXMfIm8kjdV7ar4cnOVk3/94zoR5dSWsazssKORnBJ4LP/CdjvUYJKBbwt
ZWtd5wANGg4hBKUcnAg6SU7ZDZX063fgkKD/CzgqAvYGfbVN1k2fLjcUua1rgvZe09APX/PC
A5Kb0zht6Fah2ujSJgs6gpNP8zCz/nhd3pgVR0Kzo8aI3K65jxEWKmQHQE/B3N6JkKLuf8wU
jmju1vOXsrlvWbw7fROA20EyYWoyRHqgtoZ1RfKSTS1U9osrrADCUhdkrljqs8hFPdAQ4+RV
AiEXxy/iaSaC3EmKpJI9sZklx+rreI2csBP2l/bryKwesi+sBGfqZybVJsG/0z09a422PSoI
XPG5lOvn1Oa+Y+lbzT/K7t57cqyVlVtTSqH74f/RhWAWwTpNNH3d8G09D/EDYTCYPlooC4dT
Vcnnrr4wwvXKOHqxHNC87vlokaAEPcIxLzlXwddARlVnrQ2P5dFFrtfPetcaMvHHF8Faca0T
FklNQuaaDT9Ph6DHSXRn8am2hyEGbRavYtLFNCnofYdlecXsCNyOuLWB5tfHtvyWD9uqZWrH
Qkjm35AH8WqJTvz0K+ho1JfozTmJ0kviQrrS/PGBlYIGmONjnK9jn2sPt6yJxw+Si5vhaBXS
Is5bRGkh06WHjLV1V/QYlad0p2X0ubC8ghsES//Z0U1UwD0Cy6gFpCbKvw5vdrtDEy4X4sY+
IVVpycSi0/hIFVlbH1u6uaSPRUHXz66CBgGjwTEDeE0+vnuvmOn6VRfJv5iA+S3rP/6lIlJI
KA9mcmhqLp2EOFhsBAVKT3ahkmHAkEQaq8vpz292zg4t9L41KxAvrxbZxgYQSLAI1tiLVw15
Ii+3DZrl+qSdJyC0EWaqRWHXwE/N6w/Cp5okmw+GoWO2mEib4nDEyQ9jt0qYdFTogv/Dbrp7
O0cFGWkl3B/7XGdanXhEuVJcviNKtpXZxm4YWYsAabmkb7AyLxLaipv77DQb3p7w3pgATqE8
KT7G5Fr7A50TTJ2g/Jy7V+REjNCbInCCoyJsVJhDmFn4mFn4mFn4u23P5BtEhbC3LkIKPRYi
b6/xoslIsONHNtDUFYnVlL4P4e2blCQg11mJcBrSNvAqFbAbn8Z2qMDGdH0kit/miSlInIq5
EF2YBFr3bXfcrE2BRQyP3yMdrEgS3YwYYuVSfV86eReE5yP+/I5KKwms0ZvhTYk/bcKvm9pa
1+cMbC4GeO7MS40SAsauMsskWc58efdZgNAkxAqHuz87CK8kiGWWNVQF3e5B8MTlfI0D5tVI
UstPWNaBDeMaHTmZOGlyFAfuWKV9BRVwB4u5iY01vvdz5f24qSBY8hIIg03aQD4oBbhlOO+m
wkgLRD+CiwJeerbjEb27GQrMu/ra3sWpc86LWyyL9yiEDf+pMofxRrRri5gJF0n0+yj387Hy
fKPc0UEh9pSG9/C+XwArU8HaSXcyTdXB/bPbyC7uz0m16EqdikXFuO/K+MW7tINE7N46jXs8
jZrIQGk8H2OCBbllQNRv1CgbrCASOBfOs/KiN9Qj4oNDCt/56jKBXbjKEUGE7BcH6Hg13aG/
LCgb8cfATfw8O2LoGnM9z/u1r5WrZ7urmwqlbKfeOho0jqH3T4hwNA40ZJoZ3SBMWPr4piJj
+f9jgs8b16Oi8SyEP5k7PeB8R1hUwEaPphdy6P0Li1cdoS8iynZEdbPHw519XrVAc1h7+azM
aRt2+ni1mbrQfXOUQlyZOrDEHSxxBpligNd6B3b6N+9z0xPE+4v5i1k/k5IPGVWaRPhJ+IXt
j26fnlBlHKh4SBvSBiA8dtNqCVpR7CHaRAwFv/nVefmGbMCwN9rc0CN3M0Hg8qmr3zknWyEq
Dv55mxea2xzmxGvENTzVnzh0Nc1f3PepGjzdPmjtmrITUbcOphONnSPJeKSJ1r92gc3VvGr1
frS9oSmaRqvrXT2lkNX9o9Gk3h7cim4CqDSZuUfO5ne/ahjlJWSmNUmsaq95GiH3Q7iqH/l3
BN27L9JzyOQZMedjVORz6nGbCJvCMukhlbloVgyPI3x10nhGSieLFzKA/xrMuPp0vM3akb1g
jLvdgVKle8K/LatTI7LGCMEAm2kHJAlrVq9PZ15ebbuwO6Wy1kSuBFSjLp1MfNNASXNtL483
Z1Ts11JGZ+M35zbmdKkvZ+DtI1yIrVKU4+k78AEIRRA5GOc/kmIw8MoO52e9C2VHRkprf8+p
pgTgpfmmDkH33zC/phGWMAmogeYVV/MbiR1iObb7HEQw7hzDK6b6BGYkr8691ILdBLRoTfqy
eUjbXUDfeDjAwR1xP9jtNn+bZXKHFWR7Na4Fp+1IZ/vZ1sH6idxku/Kh4AjtHV6llVy7a5ym
cvnVlvv7atMrh5mHvDEQZb6bHlR/VGPSlq21QAf0cHan7ppYOoT6r4PdhMdcfhRljuxEmJ02
3+c7xKytHPy2h9AXqgZmQkf6kUcA9QTtPU3Rj06AJZBOyEp82jRIlVrVtgte+E7lSFJJD+dp
zMQpj3pBRfpLPdTYqyIyIgtvI/yiMzggM3EuGDpiIHnNWEp70klzlkwgdIkmB83eVdBrZc5j
V8Q4+LMK+VLjLc7Q5Wok3z6qtJXk4M4dzuPT5AvFoEaH5Kl0C5XOcQmqCAKqpeu6ToJyfM7E
BsD6T/kT9gOHLKOSlzLkobb+vZoRGS2XI/Ai6X5ncLW5z/KlM3JQsH2XWM2NggVOlgwUKoIf
6fm3l5ydlhOqK4j6PvSYlzr6GmSqOiQLy3Ui
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_GEOR_DEF" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
96e 306
JrDPSrjV42nLUYsf1P8nWq3gpSQwgzsrLiAFfHRVk53mxjYEOVbd3AB/b4bnjWOiUUVDXQyY
HJn1tSwEAZj05I2LjDnh2z8UmoxPhZFble+JFrUAnT1kliC7gU7ZD733YaOhAv15swzn5lA4
B8KiwagvI4wdoaQUr4MO9f06Nry0rA9iP3NxYixGtELqDhgcvuM1FQRQ1cpUU5omUWHGX7vm
/0xxcxVacietJdQn1z2TeKKEz/ZHiQRkTebhoF0o6r0nTY5DswDCcglkCZOS2sPAwBwAXE+g
VZTEgksA9sf7gN1zABScS3YebUSc9q1F9meNR7fHBJi3CzsuUa51kvrPOolLiC+ZlNxwAoIs
hecMdIDkuRvTBhHZl7duUMqNngel7xbqW5uDpyowKAc1mN7/r3WGaCAhq5S5/EWTpJNBbXea
1fBGLqBE3hcXjktdE+njY6Vas09BXc9sCbT9FST10fJbQ1VKshiNeUalsQwRwrce3Roud5bH
xswG06S0tn/KLs/eH9ZcLu37WUHaNkEFvdizHv1EXrgs+hl3tgQ7vJGjG7o0eWYaVEpV+pI4
lFYBCw6KxCaEM88wWrdf4vy4RSvNMEQa+dnuiXcJoCMsUrNVkKeQeqoJBaDQ2FLYdtHikQCZ
9lXI+koDP6BAd+uW7ccaQWjM1+EKmCYEN9hT/wzQpTFiPOItkiFIgvZZM6daLZUG94YlJMh3
mIukMBlNepjhefQksW8vEY1ZZ6OHKrVoJM/4KK7zAJ0=
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_GEOR_AUX" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
217c 682
HotLNola9RO/PVrhzYwvsPyfcJ8wg82TDCCG3y+5MZ2sxlYvVicP/qJtC1jn6cIUjaLt55mg
fVI3b0SSTtp3E45s1fQe10h4Z3QXyVr/R/7XpfMuA1vsHToexJaBLJ2qOgP55P4kRqe5R4j6
8gtnRUWgcOcNmKSog010VN6pULcdamepHYma7pao8kt2iWtvXBpwYcIsYl6ByoSMKE/T67j0
1VM4q4DQ4RRiqciAJ8KCKgf4YPc+zG/Cs0aeva5ko1N3X9zkLB8ZU7ljqQ99VSaJWIbyBqwC
33BiI4BPU9oXQFE0/gOmvytfuIgjCy5gNKUWdy3zfB6rN8Wk98VeRasyiOevZ5gDeMgBUopu
EAZ+G9odcnLR05Jkw2X99L7bqTZQgNFOWj057gJJa032AfIWCyrXcKtKrud/j/KCl6e20vCw
Q5zxnrnlzJLCfXjranzET5mtBYD5DlWoAb/jiqCpgC9/1LtYK3kU/PQIZkEdmULFNMX7nbHb
cuMS1+RlziMApXt2oppSBRGsvfA7jNTe+eQ0ytCCnvFs2LreftrOEGuNubxOop2JcLuCgzu6
arqvaINrz3eZNZ1NPlVN3eXwApzRY/Ux157YICN19Iqvmw84GZKlilMaYgISQW3l/fWXZEXV
cyh7iihGSOvsnS1WeSTN0OpchL5EfGCIcpAVi5FTLQZ2s+HbHu8j0f+cQRc/LABS+s/L2Bxg
j6fjPmxVrjBiM3v/I1V3vlmh1BM+tox2GQfHUHdQZjx/S20KQkwjKh6evzzt6J3HsedygJ0Y
L8p0bsLCgiSL0MOJcLpOCFEZ3JNeCxE9VfhPFIdD67lZh5ZaBvsLUNt7JnoF+K0NSxmuhfhU
BF05kvd/i80zZV4jytonMlIOx9em1yrn0TcNqjL6TbMg9UFoa90NfDI+eitdWc063MczqAZg
NS3Rgbr0s0qDZF+DsClGAExFvmDe3T8aWRiOseiIxF6K6OwrGUv8K3duCJGQFsSR8htNDeTD
RHEIOICTERyV6H+vxwP99XnvSAa0cpHLYS0gPfY63k5Ts1ddl37u9lBs5V3If/ebKgDK6XjR
sQS/ttGgykkjxpTOuB13h15dHpOq/j0FFVC8dZaoi0zyeqnQMDH/Fkd7i0jjxWOxlGb6kxJl
ExdsffDtmbH8X5lah0BlaHJzyPpB+Q9m3xzSVldoHEzeW1Mb8AF6YxI8hssK+McjT8+JTxaH
gH+25kcoAgLCiRdhegZlIyRlZlqUk+Ak6Jdcq5LLufplbxnY9Pc2KG/X7EmFxolbN5NOFr7g
368W5LAuEI4oMgMpNJSgIrn43pH+c/bmwc1dRGuNyv+RiPRqbfcRZohLcDwug4b1d2mJkXxu
Nd+uxzArh1iWeldkBECwfZSEoyKGGv2n1NGnBit2nmA0lVlQnlnVLR43BAJ3pnv+lsp2Gc8u
PbLea7lhYQ2+auIE1iz1gCVcnNNc4pEbU4dq66kr1DvdIgi2OlMc7Ca6aqtSkjrlLi04gZCt
l3MAr65ZDDzPxnJq2KnAyPlFpqRFI4S910rNE9kWVzJxxWP6OIYJrWyLTNEmRgjAk2xfnLpS
hCLRJiYVmX5PBeNFeoGOS1kZDLFPAZ//c0Vsmp/ayH4UdJ/oriRzmWdbFSk=
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_GEORX" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
2e0c 7cb
8Z/hSUlxKJKjqMuo/cjdXl10y2Iwg5WjDNCG33S5Qj8CSpjdDgft/6EtBIDaYZFawJ/CnHGj
0lNnEilylmydXQd+MVxl1HTI23f+zBqiGKDV7O3rdoUkquRFtYHBZJ21bKDfH/9aK9VEFWj2
shhpc5vm5/mQ9veI0USzMUTyI2NEF3fdnNN0lSiJuDUilxVoxc4YBp5ZOza+CY1MTZJgBARp
bB9x/UHtLn+CROMyxU0wxk+djyRmafCEVhxSHwZPUw78n8EVZ8v8PfQpGKvcmdTZXC22lNic
vW2IFtUmOVOpVEx1WfKVeqDxKRP5TIJCHzJC4TKw8rO670oR7LU2pD5BNcwOEPYE2/2oNB4x
YQ0zwt4IZAllHSvVyq1aRBdnZMlQBcS/aF3m35MTy+0qwgZfVnEW9mTlUAv4ifE17lZG1IJp
hV97JMSbDBtzhRRucnqGU9LSbuDXh8TvhDtiEgs69n9bXiW7CUw13uQ/zzfQL75aX4WT4Xbi
VUEMjPfW/LG5OcmGGLKiORf8YaOoXDUgDt9nnACkgFGpbMM6iTzhvuEvvQgRzEwR5jT86BH6
k/vqFgndyzVVldeAU+0u528kAtSfVYJNR2w+dTcot8nHnt6oCRaxQyIfMSzuiBNvw/vSl+lB
yZtYVtVEgzkPmcjFaPqKpFxZXwQtyiiTPVpogdHj39YJVgKfBbADZ5lUJdAha0Ye3/HSxk8h
k177P3tOohEJWG3knciGHQ0AwLSCdQBTbHSFU/SRzAUsLNO3DRgHDReD2su0g17IxziZlGrZ
O+kn6aBrAek/uMdSD/quPnDW4Xz3eoln6lPfSxYmRK6Jsnvbr0+AH/oVKTFEWNE1R9nw+7WN
U9qHaZ6Ne8z2d+64p0B/PMiIPK9mrmpCinZqTNwS/NhiSQCUrknNvOKbIneDUxLwmIwks0Mf
5JOLdT5eHo/gJ9AcCpW3nBUCJ5HtMZD+aER1dTLgMxwAK23BE+0laYIp5Qiwqxl/p6Aj41Xa
pVqkQSz+4nd6biARlCd8hIYNwdeNehAs/lvGyfWEhxcQBUKqSyCY8Bacwp8OlCl4ZrrOSODZ
tIZhwyFyGvv2ZK9Nx6eTCsXsTR4kQ7C0SkPTLeFhE/O0QSa+HHfA/jAC2/CDr8CDhu8gR8ue
seSD2e45zcoI2uASvuQtf4kDq3gZDGGJzWCVebC83PCaLYS+doB/4gdqKFan+tSMhgT4o1ii
cpeqFNP9i4tc9SGQeItaid3mQsZH9c7z8uqf+NCui+j1shW5Jq6uegiP03iIsihXIG/uc6sk
I+xIidWv+N5A/E4BEyMyqiE+St4+KPGS7akRK9U01Rf/+B1bbyfDwDERbzZaG7CQNxq+Ve7p
i7lwho8E+Lm28kv0uF+dAgMXhe9rZnFoLF6wam0kS/CZENrK9xz/FAiuQICjO8OqxtKInrxp
dYE+sSHy/NFbG00sb7FVlOL/Sj5QH5E1mDBf1ZLP4lxvCmELaOc9ZcbAeLuI20/hc/6k6I47
Rv755pFpuimJpF/2AOB3uqiELNWgSiP0byzHS5luIWrvTf2CUSAgtd0DQOTuSLt7N/CK98VN
pA2htvfN4y1Pt4Pd/1JTGzO0Jywi3k8nkwp0fCqFTEiIQL74EPYBdcRyhAqeKD8oGqsNTYAh
DI5iNER1eJWgzH2PIPD9STMVjL4AM0XqvXulO48G2n6vC7JUTYNpw118g1xODaKI+MPwpxkD
5yYGh/VtCQExrRz4Kx9kzBoakgAiKH5UOW0e+zI7faSBCgPlQnNQXJ9tHrMDGALn0sbadtVh
aTZICMjIKIUwGkkNR6TsQxyXWZ6MkcyhujfCZ+Aog+55fw6SdYAyiKE6ifm5E/35zPVOtE7n
2u/3wfL7ntXGa14D5ngoPWEA34md8Im1wFa9NC4Fv4q69MxbuL0RCSe/RLycLLy8oB4X7Oya
fgnU9Xf95IbNxLWmdkscog==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_GEOR_ADMIN" AUTHID CURRENT_USER AS

-- ---------------------------------------------------------------------
--      procedure to create DML triggers on a georaster table
-- ---------------------------------------------------------------------

PROCEDURE createDMLTrigger
(
    tableName      varchar2,
    columnName     varchar2
);


-- ---------------------------------------------------------------------
-- NAME
--   listRegisteredRDT
--
-- DESCRIPTION
--   This function lists all registereded RDT names in the table
--   mdsys.sdo_geor_sysdata_table
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This function should be run by any end user.
--
-- ---------------------------------------------------------------------
Function listRegisteredRDT return mdsys.sdo_string2_arrayset DETERMINISTIC PARALLEL_ENABLE;

-- ---------------------------------------------------------------------
-- NAME
--   isRDTNameUnique
--
-- DESCRIPTION
--   This function is used to check if the specific RDT name is unique
--   in the table mdsys.sdo_geor_sysdata_table
--
-- ARGUMENTS
--   rdtName.
--
-- NOTES
--   This function should be run by any end user.
--
-- ---------------------------------------------------------------------
Function isRDTNameUnique(rdtName VARCHAR2) return VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;

-- ---------------------------------------------------------------------
-- NAME
--   getUniqueRDTName
--
-- DESCRIPTION
--   This function returns an unique RDT name.
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This function should be run by any end user.
--
-- ---------------------------------------------------------------------
Function getUniqueRDTName return VARCHAR2 DETERMINISTIC PARALLEL_ENABLE;


-- ---------------------------------------------------------------------
-- NAME
--   listGeoRasterTables
--
-- DESCRIPTION
--   For user mdsys:  this function lists all GeoRaster tables defined in
--                    the database.
--                    output format is:
--                     SCHEMA    TABLE
--   For other users: this function lists all GeoRaster tables defined in
--                    the current schema.
--                    output format is:
--                      TABLE
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This function should be run by any end user.
--
-- ---------------------------------------------------------------------
Function listGeoRasterTables return MDSYS.sdo_string2_arrayset DETERMINISTIC PARALLEL_ENABLE;

-- ---------------------------------------------------------------------
-- NAME
--   listGeoRasterColumns
--
-- DESCRIPTION
--   For user mdsys:  this function lists all GeoRaster columns defined in
--                    the database.
--                    output format is:
--                    SCHEMA   TABLE  COLUMN   STATUS
--     Note: STATUS is used to indicate if a DML trigger is created on this
--          GeoRaster column or not.
--   For other users: this function lists all GeoRaster columnss defined in
--                    the current schema.
--                    output format is:
--                    TABLE  COLUMN  STATUS
--     Note: STATUS is used to indicate if a DML trigger is created on this
--          GeoRaster column or not.
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This function should be run by any end user.
--
-- ---------------------------------------------------------------------
Function listGeoRasterColumns return MDSYS.sdo_string2_arrayset DETERMINISTIC PARALLEL_ENABLE;

-- ---------------------------------------------------------------------
-- NAME
--   registerGeoRasterColumns
--
-- DESCRIPTION
--   For user mdsys: this procedure creates dml triggers for all GeoRaster
--                   columns defined in the database.
--   For other users:this procedure creates dml triggers for all GeoRaster
--                   columns defined in current schema.
--
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This procedure should be run by any end user.
--
-- ---------------------------------------------------------------------
Procedure registerGeoRasterColumns;

-- ---------------------------------------------------------------------
-- NAME
--   listGeoRasterObjects
--
-- DESCRIPTION
--   For user mdsys:  this function lists all GeoRaster objects defined in
--                    the database.
--                    output format is:
--                    SCHEMA TABLE  COLUMN RDT RID STATUS
--     Note: STATUS is used to indicate if this georaster object is
--           registered in the mdsys.sdo_geor_sysdata_table or not.
--   For other users: this function lists all GeoRaster objects defined in
--                    the current schema.
--                    output foramt is:
--                    TABLE  COLUMN RDT RID STATUS
--     Note: STATUS is used to indicate if this georaster object is
--           registered in the mdsys.sdo_geor_sysdata_table or not.
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This function should be run by any end user.
--
-- ---------------------------------------------------------------------
Function listGeoRasterObjects return MDSYS.sdo_string2_arrayset DETERMINISTIC PARALLEL_ENABLE;

-- ---------------------------------------------------------------------
-- NAME
--   registerGeoRasterObjects
--
-- DESCRIPTION
--   For user mdsys: this procedure registers all GeoRaster objects defined
--                   in the database.
--   For other users:this procedure registers all GeoRaster objects defined
--                   in current schema.
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This procedure should be run by any end user.
--
-- ---------------------------------------------------------------------
Procedure registerGeoRasterObjects;

-- ---------------------------------------------------------------------
-- NAME
--   listRDT
--
-- DESCRIPTION
--   For user mdsys:  this function lists all RDT tables defined in
--                    the database,which include registered and
--                    unregistered RDTs in the mdsys.sdo_geor_sysdata_table.
--                    output format is:
--                    SCHEMA TABLE
--   For other users: this function lists all RDT tables defined in
--                    the current schema,,which include registered and
--                    unregistered RDTs in the mdsys.sdo_geor_sysdata_table.
--                    output foramt is:
--                    TABLE
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This function should be run by any end user.
--
-- ---------------------------------------------------------------------
Function listRDT return MDSYS.sdo_string2_arrayset DETERMINISTIC PARALLEL_ENABLE;

-- ---------------------------------------------------------------------
-- NAME
--   listUnregisteredRDT
--
-- DESCRIPTION
--   For user mdsys:  this function lists all unregistered RDT tables
--                    defined in the database.
--                    output format is:
--                    SCHEMA TABLE
--   For other users: this function lists all unregistered RDT tables
--                    defined in the current schema.
--                    output foramt is:
--                    TABLE
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This function should be run by any end user.
--
-- ---------------------------------------------------------------------
Function listUnregisteredRDT return MDSYS.sdo_string2_arrayset DETERMINISTIC PARALLEL_ENABLE;

-- ---------------------------------------------------------------------
-- NAME
--   checkSysdataEntries
--
-- DESCRIPTION
--   For user mdsys:  this function checks all sysdata entries in the
--                    database, and prints out a report.
--                    the following is a list of invalid cases
--                    1)RDT name isn't unique
--                    2)GeoRaster table doesn't exist
--                    3)GeoRaster column doesn't exist
--                    4)GeoRaster object doesn't exist
--                    5)Non-empty or Non-blank GeoRaster object, but
--                      RDT doesn't exist
--                    6)Duplicate GeoRaster objects(RDT+RID non-unique)
--
--   For other users: this function checks all sysdata entries related to
--                    the current schema, and prints out a report.
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This function should be run by any end user.
--
-- ---------------------------------------------------------------------
Function checkSysdataEntries return MDSYS.sdo_string2_array  DETERMINISTIC PARALLEL_ENABLE;

-- ---------------------------------------------------------------------
-- NAME
--   maintainSysdataEntries
--
-- DESCRIPTION
--   For user mdsys:  this function maintains all sysdata entries in the
--                    database, and make them valid.
--                    the following is a list of actions to invalid cases
--         1)RDT name isn't unique : rename non-unique RDT
--         2)GeoRaster table doesn't exist : remove entry
--         3)GeoRaster column doesn't exist : remove entry
--         4)GeoRaster object doesn't exist : remove entry
--         5)Non-empty or Non-blank GeoRaster object, but
--           RDT doesn't exist : remove entry
--         6)Duplicate GeoRaster objects(RDT+RID non-unique):remove entry .
--
--   For other users: this function  maintains all sysdata entries related to
--                    the current schema.
--         1)RDT name isn't unique : no action
--         2)GeoRaster table doesn't exist : remove entry
--         3)GeoRaster column doesn't exist : remove entry
--         4)GeoRaster object doesn't exist : remove entry
--         5)Non-empty or Non-blank GeoRaster object, but
--           RDT doesn't exist : remove entry
--         6)Duplicate GeoRaster objects(RDT+RID non-unique):remove entry .
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This function should be run by any end user.
--
-- ---------------------------------------------------------------------
Function maintainSysdataEntries return MDSYS.sdo_string2_array DETERMINISTIC PARALLEL_ENABLE;



-- ---------------------------------------------------------------------
-- NAME
--   isUpgradeNeeded
--
-- DESCRIPTION
--   For user mdsys:  this function checks whole database,and prints
--                    out a report about validation of whole GeoRaster
--                    inforstrcture/data
--                    the following is a list of invalid cases
--                    1)RDT name isn't unique
--                    2)GeoRaster table doesn't exist
--                    3)GeoRaster column doesn't exist
--                    4)Non-empty or Non-blank GeoRaster object, but
--                      RDT doesn't exist
--                    5)Duplicate GeoRaster objects(RDT+RID non-unique)
--                    6)Non-registered GeoRaster columns
--                    7)Non-unique RDT(Non-registered) table
--                    8)Non-registered GeoRaster objects
--                    9)Non-registered RDT table
--
--   For other users:  this function checks whole schema,and prints
--                    out a report about validation of whole GeoRaster
--                    inforstrcture/data
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This function should be run by any end user.
--
-- ---------------------------------------------------------------------
Function isUpgradeNeeded return MDSYS.sdo_string2_array DETERMINISTIC PARALLEL_ENABLE;


-- ---------------------------------------------------------------------
-- NAME
--   upgradeGeoRaster
--
-- DESCRIPTION
--   For user mdsys:  this function maintains whole GeoRaster
--                    infrastucture/data on the database level
--
--   For other users: this function maintains whole GeoRaster
--                    infrastucture/data in schema level
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This function should be run by any end user.
--
-- ---------------------------------------------------------------------
Function upgradeGeoRaster return MDSYS.sdo_string2_array DETERMINISTIC PARALLEL_ENABLE;


-- ---------------------------------------------------------------------
-- NAME
--   listDanglingRasterData
--
-- DESCRIPTION
--   For user mdsys:  this function lists all dangling data
--                    on the database level
--
--   For other users: this function lists dangling data
--                    in schema level
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This function should be run by any end user.
--
-- ---------------------------------------------------------------------
Function listDanglingRasterData return MDSYS.sdo_string2_arrayset DETERMINISTIC PARALLEL_ENABLE;



END SDO_GEOR_ADMIN;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_GEOR_UTL" AUTHID CURRENT_USER AS

-- ---------------------------------------------------------------------
--      procedure to create DML triggers on a georaster table
-- ---------------------------------------------------------------------

PROCEDURE createDMLTrigger
(
    tableName      varchar2,
    columnName     varchar2
);

-- ---------------------------------------------------------------------
--      procedure to create DML triggers on a georaster table
-- ---------------------------------------------------------------------

PROCEDURE recreateDMLTriggers;

-- ---------------------------------------------------------------------
-- NAME
--   renameRDT
--
-- DESCRIPTION
--   This routine renames raster data table(s) owned by the current user.
--   It will update all related GeoRaster objects and GeoRaster system
--   data coorespondingly.
--
-- ARGUMENTS
--   oldRDTs - name(s) of existing raster data table(s) to be renamed
--   newRDTs - name(s) of new raster data table(s)
--
-- NOTES
--
--   This routine renames RDTs owned by the current user.
--
--   The RDT names in the strings are seperated with ','.
--   If an oldRDT does not appear in the GeoRaster sysdata, it is ignored.
--   If a newRDT is not unique in the GeoRaster sysdata, ORA-13403 is raised.
--   If a newRDT is NULL, a unique RDT name is automatically generated.
-- ---------------------------------------------------------------------
PROCEDURE renameRDT
(
   oldRDTs VARCHAR2,
   newRDTs VARCHAR2 DEFAULT NULL
);



-- ---------------------------------------------------------------------
-- NAME
--   makeRDTnamesUnique
--
-- DESCRIPTION
--   This routine resolves conflicting raster data table names by
--   automatically renaming some of them so that all raster data tables
--   are uniquely named afterwards.
--
-- ARGUMENTS
--   None.
--
-- NOTES
--   This routine is part of the fix for bug 3703288. In addition to applying
--   the necessary patchset that fixes this bug, an Oracle database of
--   version 10.1.0.2 or 10.1.0.3 needs to run this routine to resolve
--   potential RDT name conflicts. User may choose to run the above
--   renameRDT() to explicitly rename existing RDTs before run this
--   routine.
--
--   This routine should be run while connected as a user with the DBA role.
--
-- ---------------------------------------------------------------------
PROCEDURE makeRDTnamesUnique;


-- ---------------------------------------------------------------------
-- NAME
--   calcRasterNominalSize
--
-- DESCRIPTION
--   This routine calculates the total length of the raster blocks of
--   a GeoRaster object as if it is uncompressed and not sparse.
--
-- ARGUMENTS
--   geor       - the GeoRaster object
--   padding    - indicates whether to consider padding in the blocks
--   pyramid    - indicates whether to consider pyramids
--   bitmapMask - indicates whether to consider associated bitmap masks
--
-- NOTES
--   All the argument are case insensitive.
--   The result is in bytes.
--
-- ---------------------------------------------------------------------
FUNCTION calcRasterNominalSize
(
  geor       IN SDO_GEORASTER,
  padding    IN VARCHAR2 DEFAULT 'TRUE',
  pyramid    IN VARCHAR2 DEFAULT 'TRUE',
  bitmapMask IN VARCHAR2 DEFAULT 'TRUE'
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

-- ---------------------------------------------------------------------
-- NAME
--   calcRasterStorageSize
-- DESCRIPTION
--   This routine calculates the actual length of the raster blocks of
--   a GeoRaster object.
--
-- ARGUMENTS
--   geor - the GeoRaster object
--
-- NOTES
--   The result is in bytes.
--
-- ---------------------------------------------------------------------
FUNCTION calcRasterStorageSize
(
  geor       IN SDO_GEORASTER
)
RETURN NUMBER DETERMINISTIC PARALLEL_ENABLE;

-- ---------------------------------------------------------------------
-- NAME
--   calcOptimizedBlockSize
-- DESCRIPTION
--   This routine calculates the optimized blockSize based on dimensionSize and--   user input seed blockSize.
--
-- ARGUMENTS
--   dimensionSize - dimension size array, whose length must be 3.
--   blockSize - block size array, whose length must be 3.
--   pyramidLevel - pyramid level, default value is 0.
--
-- NOTES
--
-- ---------------------------------------------------------------------
PROCEDURE calcOptimizedBlockSize
(
  dimensionSize       IN MDSYS.SDO_NUMBER_ARRAY,
  blockSize           IN OUT MDSYS.SDO_NUMBER_ARRAY,
  pyramidLevel        IN number default 0
);

-- ---------------------------------------------------------------------
-- NAME
--   fillEmptyBlocks
-- DESCRIPTION
--   This routine fills in all empty blocks with background values
--   specified in the parameter
--
-- ARGUMENTS
--   geor     - the GeoRaster object
--   bgValues - background values for filling sparse data
--
-- NOTES
--
-- ---------------------------------------------------------------------
PROCEDURE fillEmptyBlocks
(
  geor IN OUT SDO_GEORASTER,
  bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL
);

-- NAME
--   emptyBlocks
-- DESCRIPTION
--   This routine make blocks empty, if the blocks only contains background values
--   specified in the parameter
--
-- ARGUMENTS
--   geor     - the GeoRaster object
--   bgValues - background values for filling sparse data
--
-- NOTES
--
-- ---------------------------------------------------------------------
PROCEDURE emptyBlocks
(
  geor IN OUT SDO_GEORASTER,
  bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL
);

------------------------------------------------------------------------
--           Status Report Related Procedures
------------------------------------------------------------------------

-- ---------------------------------------------------------------------
-- NAME
--   createReportTable
-- DESCRIPTION
--   Create the table for the operation status.
--
-- NOTES
--
-- ---------------------------------------------------------------------
PROCEDURE createReportTable;

-- ---------------------------------------------------------------------
-- NAME
--   dropReportTable
-- DESCRIPTION
--   Drop the table for the operation status.
--
-- NOTES
--
-- ---------------------------------------------------------------------
PROCEDURE dropReportTable;

-- ---------------------------------------------------------------------
-- NAME
--   clearReportTable
-- DESCRIPTION
--   Delete the records in the table for the operation status.
--   If the client_id is not null, only the records with the client_id
--   are deleted, otherwise, all the records are deleted.
-- ARGUMENTS
--   client_id: a unique id to identify the session.
--
-- NOTES
--   This procedure will only commit on the report table so that
--   other sessions can see the committed results.
-- ---------------------------------------------------------------------
PROCEDURE clearReportTable(client_id in number default null);

-- ---------------------------------------------------------------------
-- NAME
--   isReporting
-- DESCRIPTION
--   Check if any session has status report enabled.
-- RETURN
--   1: There are session(s) with status report enabled.
--   0: There is no session with status report enabled.
--
-- NOTES
-- ---------------------------------------------------------------------
FUNCTION isReporting RETURN NUMBER;

-- ---------------------------------------------------------------------
-- NAME
--   enableReport
-- DESCRIPTION
--   Enable the status report in this session.
--
-- NOTES
-- ---------------------------------------------------------------------
PROCEDURE enableReport;

-- ---------------------------------------------------------------------
-- NAME
--   disableReport
-- DESCRIPTION
--   Disable the status report in this session.
--
-- NOTES
-- ---------------------------------------------------------------------
PROCEDURE disableReport;

-- ---------------------------------------------------------------------
-- NAME
--   setseqid
-- DESCRIPTION
--   Set the sequence id for the operation in one session. This can be used
-- to identify the different operations in the same session. If this
-- procedure is not called, the sequence id defaults to 0 in the status
-- report.
-- ARGUMENTS
--   seq_id: an id to identify the operation in this session.
--
-- NOTES
-- ---------------------------------------------------------------------
PROCEDURE setseqid(seq_id number);

-- ---------------------------------------------------------------------
-- NAME
--   setClientID
-- DESCRIPTION
--   Set the client id for a session. This can be used
--   to identify the different sessions under the same user.
--   The client id can be the database session id or the client id in
--   the mid-tier environment. If this procedure is not called, the client
--   id in the status report defaults to the database session id.
-- ARGUMENTS
--   client_id: an id to identify the session.
--
-- NOTES
-- ---------------------------------------------------------------------
PROCEDURE setClientID(client_id number);

-- ---------------------------------------------------------------------
-- NAME
--   getProgress
-- DESCRIPTION
--   Get the lastest progress in percentage of a specific operation.
--
-- ARGUMENTS
--   client_id: a unique id to identify the session.
--   seq_id: a unique id to identify the operation in this session.
-- RETURNS
--   The percentage of the progress in a number between 0 and 1.
-- NOTES
-- ---------------------------------------------------------------------
FUNCTION getProgress(client_id number, seq_id number default 0)
  RETURN NUMBER;

-- ---------------------------------------------------------------------
-- NAME
--   getStatusReport
-- DESCRIPTION
--   Get the lastest status of a specific operation.
--
-- ARGUMENTS
--   client_id: a unique id to identify the session.
--   seq_id: a unique id to identify the operation in this session.
-- RETURNS
--   A sdo_string2_array in the format:
--     TIMESTAMP, OP_NAME, TARGET_RDT, TARGET_RID, OP_STATUS, DESCRIPTION.
-- NOTES
-- ---------------------------------------------------------------------
FUNCTION getStatusReport(client_id number, seq_id number default 0)
  RETURN MDSYS.sdo_string2_array DETERMINISTIC PARALLEL_ENABLE;

-- ---------------------------------------------------------------------
-- NAME
--   getAllStatusReport
-- DESCRIPTION
--   Get the lastest status of the operations in the status table for
--   each client_id.
-- ARGUMENTS
--   None.
-- RETURNS
--   A sdo_string2_arrayset in the format:
--     TIMESTAMP, OP_NAME, TARGET_RDT, TARGET_RID, OP_STATUS, DESCRIPTION.
-- NOTES
-- ---------------------------------------------------------------------
FUNCTION getAllStatusReport
  RETURN MDSYS.sdo_string2_arrayset DETERMINISTIC PARALLEL_ENABLE;

------------------------------------------------------------------------
--           End of Status Report Related Procedures
------------------------------------------------------------------------

END SDO_GEOR_UTL;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_GEOR_RA" AUTHID CURRENT_USER AS

--
-- Math Operator constants
--
   OPERATOR_ADD               CONSTANT PLS_INTEGER := 0;
   OPERATOR_ADDCONST          CONSTANT PLS_INTEGER := 1;
   OPERATOR_SUBTRACT          CONSTANT PLS_INTEGER := 2;
   OPERATOR_SUBTRACTCONST     CONSTANT PLS_INTEGER := 3;
   OPERATOR_MULTIPLY          CONSTANT PLS_INTEGER := 4;
   OPERATOR_MULTIPLYCONST     CONSTANT PLS_INTEGER := 5;
   OPERATOR_DIVIDE            CONSTANT PLS_INTEGER := 6;
   OPERATOR_DIVIDECONST       CONSTANT PLS_INTEGER := 7;
   OPERATOR_ABSOLUTE          CONSTANT PLS_INTEGER := 8;
   OPERATOR_INVERT            CONSTANT PLS_INTEGER := 9;
   OPERATOR_LOG               CONSTANT PLS_INTEGER := 10;
   OPERATOR_EXP               CONSTANT PLS_INTEGER := 11;



--
-- NAME:
--      findCells procedure
--
-- DESCRIPTION
--       generate a new georaster object based on the "condition" parameter.
--       The "condition" parameter is a boolean expression, for each pixel
--       in the inGeoRaster, the value of corresponding pixel of outGeoraster
--       is same, if "condition" is true, otherwise bgValues is used to set
--       the pixel's value of outGeoraster.
--
--
-- ARGUMENTS
--      inGeoRaster    - The SDO_GEORASTER object to be applied with condition
--      condition      - A boolean expression used to filter out pixels, the
--                       syntax details are explained in GeoRaster Manual
--      storageParam   - A string specifying storage parameters for the target
--                       georaster object. The details are explained in GeoRaster
--                       Manual
--      outGeoRaster   - The new GeoRaster Object
--      bgValues       - background values for filling pixels which make
--                       conditon return false, if it is null, then 0 will
--                       be used as background color.
--      nodata         - if 'true', then keep original value for all nodata pixel
--                       if 'false',then treat nodata as regular data.
--      parallelParam     - specify if executing operations in parallel if
--                       possible, but note if parameter parallelParam is 'true',
--                       then some execution units of this procedure will run
--                       as autonomous transactions, that means some changes
--                       are submitted and you can't rollback.
--                       You can fully rollback all of your changes if
--                       parameter parallelParam is 'false'.
--
-- RETURNS
--
PROCEDURE findCells
(
   inGeoRaster  IN      MDSYS.SDO_GEORASTER,
   condition    IN      VARCHAR2,
   storageParam IN      VARCHAR2,
   outGeoraster IN OUT  MDSYS.SDO_GEORASTER,
   bgValues     IN      SDO_NUMBER_ARRAY DEFAULT NULL,
   nodata       IN      VARCHAR2 DEFAULT 'false',
   parallelParam IN     VARCHAR2 DEFAULT NULL
);


-- NAME:
--      classify procedure
--
-- DESCRIPTION
--      Generate a new GeoRaster object after applying classification operation on the source GeoRaster object.
--
-- ARGUMENTS
--      inGeoRasters   - GeoRaster cursor.
--      expression     - A math expression used to classify cell values, the
--                       syntax details are explained in GeoRaster Manual
--      rangeArray     - A number array, which defines ranges to classify cell
--                       values, it must have at least one element.
--      valueArray     - A number array, which defines target cell value for
--                       each range. it's length must be "length of rangeArray"+1
--      storageParam   - A string specifying storage parameters for the copy
--                       The details are explained in GeoRaster Manual
--      outGeoRaster   - The new GeoRaster Object
--      nodata         - if 'true', then assign nodataValue to all nodata pixels in the target georaster
--                       if 'false',then treat all nodata as regular data.
--      nodataValue    - nodata value in the target georaster object,if nodataValue is null then 0 is used for nodataValue
--      parallelParam     - specify if executing operations in parallel if
--                       possible, but note if parameter parallelParam is 'true',
--                       then some execution units of this procedure will run
--                       as autonomous transactions, that means some changes
--                       are submitted and can't be rollback.
--                       You can fully rollback all of your changes if
--                       parameter parallelParam is 'false'.
--
-- RETURNS
--
PROCEDURE classify
(
   inGeoRasters IN      SYS_REFCURSOR,
   expression   IN      VARCHAR2,
   rangeArray   IN      SDO_NUMBER_ARRAY,
   valueArray   IN      SDO_NUMBER_ARRAY,
   storageParam IN      VARCHAR2,
   outGeoraster IN OUT  MDSYS.SDO_GEORASTER,
   nodata       IN      VARCHAR2 DEFAULT 'false',
   nodataValue  IN      NUMBER default 0,
   parallelParam   IN      VARCHAR2 DEFAULT NULL
);

-- NAME:
--      classify procedure
--
-- DESCRIPTION
--      Generate a new GeoRaster object after applying classification operation on the source GeoRaster object.
--
-- ARGUMENTS
--      inGeoRaster    - GeoRaster object.
--      expression     - A math expression used to classify cell values, the
--                       syntax details are explained in GeoRaster Manual
--      rangeArray     - A number array, which defines ranges to classify cell
--                       values, it must have at least one element.
--      valueArray     - A number array, which defines target cell value for
--                       each range. it's length must be "length of rangeArray"+1
--      storageParam   - A string specifying storage parameters for the copy
--                       The details are explained in GeoRaster Manual
--      outGeoRaster   - The new GeoRaster Object
--      nodata         - if 'true', then assign nodataValue to all nodata pixels in the target georaster
--                       if 'false',then treat all nodata as regular data.
--      nodataValue    - nodata value in the target georaster object,if nodataValue is null then 0 is used for nodataValue
--      parallelParam     - specify if executing operations in parallel if
--                       possible, but note if parameter parallelParam is 'true',
--                       then some execution units of this procedure will run
--                       as autonomous transactions, that means some changes
--                       are submitted and can't be rollback.
--                       You can fully rollback all of your changes if
--                       parameter parallelParam is 'false'.
--
-- RETURNS
--
PROCEDURE classify
(
   inGeoRaster  IN      MDSYS.SDO_GEORASTER,
   expression   IN      VARCHAR2,
   rangeArray   IN      SDO_NUMBER_ARRAY,
   valueArray   IN      SDO_NUMBER_ARRAY,
   storageParam IN      VARCHAR2,
   outGeoraster IN OUT  MDSYS.SDO_GEORASTER,
   nodata       IN      VARCHAR2 DEFAULT 'false',
   nodataValue  IN      NUMBER default 0,
   parallelParam   IN      VARCHAR2 DEFAULT NULL
);

-- NAME:
--      classify procedure
--
-- DESCRIPTION
--      Generate a new GeoRaster object after applying classification operation on the source GeoRaster objects.
--
-- ARGUMENTS
--      georArray      - An array of GeoRaster objects.
--      expression     - A math expression used to classify cell values, the
--                       syntax details are explained in GeoRaster Manual
--      rangeArray     - A number array, which defines ranges to classify cell
--                       values, it must have at least one element.
--      valueArray     - A number array, which defines target cell value for
--                       each range. it's length must be "length of rangeArray"+1
--      storageParam   - A string specifying storage parameters for the copy
--                       The details are explained in GeoRaster Manual
--      outGeoRaster   - The new GeoRaster Object
--      nodata         - if 'true', then assign nodataValue to all nodata pixels in the target georaster
--                       if 'false',then treat all nodata as regular data.
--      nodataValue    - nodata value in the target georaster object,if nodataValue is null then 0 is used for nodataValue
--      parallelParam     - specify if executing operations in parallel if
--                       possible, but note if parameter parallelParam is 'true',
--                       then some execution units of this procedure will run
--                       as autonomous transactions, that means some changes
--                       are submitted and can't be rollback.
--                       You can fully rollback all of your changes if
--                       parameter parallelParam is 'false'.
--
-- RETURNS
--
PROCEDURE classify
(
   georArray    IN      SDO_GEORASTER_ARRAY,
   expression   IN      VARCHAR2,
   rangeArray   IN      SDO_NUMBER_ARRAY,
   valueArray   IN      SDO_NUMBER_ARRAY,
   storageParam IN      VARCHAR2,
   outGeoraster IN OUT  MDSYS.SDO_GEORASTER,
   nodata       IN      VARCHAR2 DEFAULT 'false',
   nodataValue  IN      NUMBER default 0,
   parallelParam IN      VARCHAR2 DEFAULT NULL
);

--
-- NAME:
--      rasterMathOp procedure
--
-- DESCRIPTION
--      generate a new georaster object from input georaster objects
--      and math operations, the target georaster object is stored
--      based on the parameter storageParam.
--
-- ARGUMENTS
--      inGeoRaster     - The source SDO_GEORASTER object
--      operation       - An array of varying length Oracle STRING,each STRING
--                        is a valid expression, which is mapping to a target
--                        band in the target georaster object, and specifies
--                        how to calculate cell value based on source georaster
--                        objects.
--      storageParam    - A string specifying storage parameters for the copy
--                        The details are explained in GeoRaster Manual
--      outGeoRaster    - The new GeoRaster Object
--      nodata         - if 'true', then assign nodataValue to all nodata pixels in the target georaster
--                       if 'false',then treat all nodata as regular data.
--      nodataValue    - nodata value in the target georaster object,if nodataValue is null then 0 is used for nodataValue
--      parallelParam     - specify if executing operations in parallel if
--                       possible, but note if parameter parallelParam is 'true',
--                       then some execution units of this procedure will run
--                       as autonomous transactions, that means some changes
--                       are submitted and can't be rollback.
--                       You can fully rollback all of your changes if
--                       parameter parallelParam is 'false'.
--
--
PROCEDURE rasterMathOp
(
   inGeoRaster   IN      MDSYS.SDO_GEORASTER,
   operation     IN      SDO_STRING2_ARRAY,
   storageParam  IN      VARCHAR2,
   outGeoraster  IN OUT  MDSYS.SDO_GEORASTER,
   nodata        IN      VARCHAR2 DEFAULT 'false',
   nodataValue   IN      NUMBER default 0,
   parallelParam IN      VARCHAR2 DEFAULT NULL
);

--
-- NAME:
--      rasterMathOp procedure
--
-- DESCRIPTION
--      generate a new georaster object from input georaster objects
--      and math operations, the target georaster object is stored
--      based on the parameter storageParam.
--
-- ARGUMENTS
--      inGeoRasters    - GeoRaster cursor.
--      operation       - An array of varying length Oracle STRING,each STRING
--                        is a valid expression, which is mapping to a target
--                        band in the target georaster object, and specifies
--                        how to calculate cell value based on source georaster
--                        objects.
--      storageParam    - A string specifying storage parameters for the copy
--                        The details are explained in GeoRaster Manual
--      outGeoRaster    - The new GeoRaster Object
--      nodata         - if 'true', then assign nodataValue to all nodata pixels in the target georaster
--                       if 'false',then treat all nodata as regular data.
--      nodataValue    - nodata value in the target georaster object,if nodataValue is null then 0 is used for nodataValue
--      parallelParam     - specify if executing operations in parallel if
--                       possible, but note if parameter parallelParam is 'true',
--                       then some execution units of this procedure will run
--                       as autonomous transactions, that means some changes
--                       are submitted and can't be rollback.
--                       You can fully rollback all of your changes if
--                       parameter parallelParam is 'false'.
--
--
PROCEDURE rasterMathOp
(
   inGeoRasters  IN      SYS_REFCURSOR,
   operation     IN      SDO_STRING2_ARRAY,
   storageParam  IN      VARCHAR2,
   outGeoraster  IN OUT  MDSYS.SDO_GEORASTER,
   nodata        IN      VARCHAR2 DEFAULT 'false',
   nodataValue   IN      NUMBER default 0,
   parallelParam IN      VARCHAR2 DEFAULT NULL
);

--
-- NAME:
--      rasterMathOp procedure
--
-- DESCRIPTION
--      generate a new georaster object from input georaster objects
--      and math operations, the target georaster object is stored
--      based on the parameter storageParam.
--
-- ARGUMENTS
--      georArray       - An array of GeoRaster objects.
--      operation       - An array of varying length Oracle STRING,each STRING
--                        is a valid expression, which is mapping to a target
--                        band in the target georaster object, and specifies
--                        how to calculate cell value based on source georaster
--                        objects.
--      storageParam    - A string specifying storage parameters for the copy
--                        The details are explained in GeoRaster Manual
--      outGeoRaster    - The new GeoRaster Object
--      nodata         - if 'true', then assign nodataValue to all nodata pixels in the target georaster
--                       if 'false',then treat all nodata as regular data.
--      nodataValue    - nodata value in the target georaster object,if nodataValue is null then 0 is used for nodataValue
--      parallelParam     - specify if executing operations in parallel if
--                       possible, but note if parameter parallelParam is 'true',
--                       then some execution units of this procedure will run
--                       as autonomous transactions, that means some changes
--                       are submitted and can't be rollback.
--                       You can fully rollback all of your changes if
--                       parameter parallelParam is 'false'.
--
--
PROCEDURE rasterMathOp
(
   georArray     IN      SDO_GEORASTER_ARRAY,
   operation     IN      SDO_STRING2_ARRAY,
   storageParam  IN      VARCHAR2,
   outGeoraster  IN OUT  MDSYS.SDO_GEORASTER,
   nodata        IN      VARCHAR2 DEFAULT 'false',
   nodataValue   IN      NUMBER default 0,
   parallelParam IN      VARCHAR2 DEFAULT NULL
);




--
-- NAME:
--      rasterMathOp procedure
--
-- DESCRIPTION
--      apply mathematical operation on two or one georatser objects
--
-- ARGUMENTS
--      geoRaster0     - The left operand
--      geoRaster1     - The right operand
--      constant       - constant value for some operators like addConst,divideConst.
--      operator       - operator which should be one of math operators defined in the package
--      storageParam   - A string specifying storage parameters for the target georaster object
--                       The details are explained in GeoRaster Manual
--      outGeoRaster   - The new GeoRaster Object
--      bgValues       - background values for sparse data
--      nodata         - if 'true', then assign nodataValue to all nodata pixels in the target georaster
--                       if 'false',then treat all nodata as regular data.
--      nodataValue    - nodata value in the target georaster object,if nodataValue is null then 0 is used for nodataValue
--      parallelParam     - specify if executing operations in parallel if
--                       possible, but note if parameter parallelParam is 'true',
--                       then some execution units of this procedure will run
--                       as autonomous transactions, that means some changes
--                       are submitted and you can't rollback.
--                       You can fully rollback all of your changes if
--                       parameter parallelParam is 'false'.
--
-- RETURNS
--

PROCEDURE rasterMathOp
(
   georaster0   IN      MDSYS.SDO_GEORASTER,
   georaster1   IN      MDSYS.SDO_GEORASTER,
   constant     IN      NUMBER,
   operator     IN      PLS_INTEGER,
   storageParam IN      VARCHAR2,
   outGeoraster IN OUT  MDSYS.SDO_GEORASTER,
   bgValues     IN      SDO_NUMBER_ARRAY DEFAULT NULL,
   nodata       IN      VARCHAR2 DEFAULT 'false',
   nodataValue  IN      NUMBER default 0,
   parallelParam IN      VARCHAR2 DEFAULT NULL
);



--
-- NAME:
--      rasterUpdate procedure
--
-- DESCRIPTION
--       Based on conditions and expressions to update raster cellValue.
--       The "condition" parameter is a array of boolean expressions,
--       the "values" parameter is a array of arrays of math expressions,
--       for each pixel, if a "condition" is true, then it's value
--       will get updated based on calculation of corresponding array of
--       math expression.
--
--
-- ARGUMENTS
--      geoRaster      - The SDO_GEORASTER object to be updated based on conditions
--      pyramidLevel   - specifiy which pyramid level gets updated, if null, then all
--                       pyramid levels get updated
--      condition      - A array of boolean expressions to pick pixels, the
--                       syntax details are explained in GeoRaster Manual
--      values         - A array of arrays of math expressions,the outer array is
--                       corresponding to each conditions, and inner array is
--                       corresponding to each band
--      bgValues       - background values
--      nodata         - if 'true', then keep original value for all nodata
--                       if 'false',then treat nodata as regular data.
--      parallelParam     - specify if executing operations in parallel if
--                       possible, but note if parameter parallelParam is 'true',
--                       then some execution units of this procedure will run
--                       as autonomous transactions, that means some changes
--                       are submitted and you can't rollback.
--                       You can fully rollback all of your changes if
--                       parameter parallelParam is 'false'.
--
-- RETURNS
--
PROCEDURE rasterUpdate
(
   geoRaster    IN out  MDSYS.SDO_GEORASTER,
   pyramidLevel IN      NUMBER,
   conditions   IN      SDO_STRING2_ARRAY,
   vals         IN      SDO_STRING2_ARRAYSET,
   bgValues     IN      SDO_NUMBER_ARRAY DEFAULT NULL,
   nodata       IN      VARCHAR2 DEFAULT 'false',
   parallelParam IN     VARCHAR2 DEFAULT NULL
);


--
-- NAME:
--      isOverlap
--
-- DESCRIPTION
--       This helper function will check if two georaster objects have .
--       same row/column dimension sizes, and if they are overlapped in
--       the model space if they are georeferenced
--
--
-- ARGUMENTS
--      geoRaster1      - The SDO_GEORASTER 1
--      geoRaster2      - The SDO_GEORASTER 2
--      tolerance       - Specifies the tolerance used to decide if two pixels in cell space are
--                        overlapped in the model spce. The value should be between 0
--                        and 1 and is in pixel unit. for example, 0.5 means half pixel.
--
-- RETURNS
--   'TRUE' if overlapped, otherwise 'FALSE'

FUNCTION isOverlap
(
  georaster1 IN MDSYS.SDO_GEORASTER,
  georaster2 IN MDSYS.SDO_GEORASTER,
  tolerance  IN NUMBER default 0.5
)
RETURN VARCHAR2  DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--      isOverlap
--
-- DESCRIPTION
--       This helper function will check if an array of georaster objects have .
--       same row/column dimension sizes, and if they are overlapped in
--       the model space if they are georeferenced
--
--
-- ARGUMENTS
--      geor_array      - The SDO_GEORASTER array
--      tolerance       - Specifies the tolerance used to decide if two pixels in cell space are
--                        overlapped in the model spce. The value should be between 0
--                        and 1 and is in pixel unit. for example, 0.5 means half pixel.
--
-- RETURNS
--   'TRUE' if overlapped, otherwise 'FALSE'

FUNCTION isOverlap
(
  georArray  IN SDO_GEORASTER_ARRAY,
  tolerance  IN NUMBER default 0.5
)
RETURN VARCHAR2  DETERMINISTIC PARALLEL_ENABLE;

--
-- NAME:
--      isOverlap
--
-- DESCRIPTION
--       This helper function will check if a cursor of georaster objects have .
--       same row/column dimension sizes, and if they are overlapped in
--       the model space if they are georeferenced
--
--
-- ARGUMENTS
--      geor_cur        - The SDO_GEORASTER cursor
--      tolerance       - Specifies the tolerance used to decide if two pixels in cell space are
--                        overlapped in the model spce. The value should be between 0
--                        and 1 and is in pixel unit. for example, 0.5 means half pixel.
--
-- RETURNS
--   'TRUE' if overlapped, otherwise 'FALSE'

FUNCTION isOverlap
(
  geor_cur   IN SYS_REFCURSOR,
  tolerance  IN NUMBER default 0.5
)
RETURN VARCHAR2  DETERMINISTIC PARALLEL_ENABLE;


END SDO_GEOR_RA;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_GEOR_AGGR" AUTHID CURRENT_USER AS

--
-- NAME:
--      mosaicSubset procedure
--
-- DESCRIPTION
--      Subset from a set of source georaster objects.
--
-- ARGUMENTS
--      inGeoRasters     - The input source georaster objects in a cursor.
--      pyramidLevel     - The pyramid level, if NULL and outResolution is
--                         specified, use the outResolution to determine the
--                         pyramidLevel, otherwise defaults to 0.
--      outSRID          - The output georaster data's SRID.
--      outModelCoordLoc - The output georaster data's model coordinate
--                         location. If NULL, defaults to CENTER.
--      referencePoint   - The reference point of the mosaic. The mosaic result
--                         will align with this reference point. If this is
--                         null, the reference point implicitly uses the
--                         upper left corner of the cropArea, or when the
--                         cropArea is null, the upper left corner of the
--                         output extent.
--                         This reference point must be in a SDO_GEOMETRY that
--                         describes a point.
--      cropArea         - The output georaster data's window. If the
--                         sdo_geometry object has srid, the source georaster
--                         objects must be georeferenced, otherwise, the source
--                         georaster object can be georeferenced or non-
--                         georeferenced.
--      polygonClip      - Whether to do polygon clipping. If NULL, defaults
--                         to FALSE.
--      boundaryClip     - Whether to use the source data boundary to clip the
--                         cropArea. If false, the outside the source
--                         data area is filled with background value. If NULL,
--                         defaults to TRUE.
--      layerNumbers     - The layer numbers from the source georasters. If
--                         NULL, empty or has value of '0', all layers are
--                         included.
--      outResolutions   - Output georaster data's resolution. If NULL, defaults
--                         to the source data's resolution at the given
--                         pyramid level.
--      resolutionUnit   - The unit of the output resolution. If NULL, defaults
--                         to the unit of the output SRID. If outResolutions is
--                         NULL, this parameter is ignored. It must be in format
--                         of "unit=val" where val is the unit name.
--      mosaicParam      - The parameter related to mosaic
--      storageParam     - The storage parameter
--      outGeoRaster     - The output georaster object.
--      bgValues         - The background values for sparse data
--      parallelParam    - The parameter related to parallel processing.
--                         Currently we only support
--                           "parallel=DEFAULT": The database computes
--                              the degree of parallelism, which can be 2 or
--                              greater.
--                           "parallel=n": where n>1 is the degree of parallel.
--                              The database optimizer uses the degree of
--                              parallelism specified by n
--                           By default when this parameter is null, there is
--                           no parallel processing.
--
-- RETURNS
--
  PROCEDURE mosaicSubset(
     inGeoRasters       IN SYS_REFCURSOR,
     pyramidLevel       IN NUMBER,
     outSRID            IN NUMBER,
     outModelCoordLoc   IN NUMBER,
     referencePoint     IN MDSYS.SDO_GEOMETRY,
     cropArea           IN MDSYS.SDO_GEOMETRY,
     polygonClip        IN VARCHAR2,
     boundaryClip       IN VARCHAR2,
     layerNumbers       IN VARCHAR2,
     outResolutions     IN MDSYS.SDO_NUMBER_ARRAY,
     resolutionUnit     IN VARCHAR2,
     mosaicParam        IN VARCHAR2,
     storageParam       IN VARCHAR2,
     outGeoRaster       IN OUT MDSYS.SDO_GEORASTER,
     bgValues           IN MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL,
     parallelParam      IN VARCHAR2 DEFAULT NULL
     );

--
-- NAME:
--      mosaicSubset procedure
--
-- DESCRIPTION
--      Subset from a set of source georaster objects.
--
-- ARGUMENTS
--      georasterTableNames - The table names of the input georaster objects
--      georasterColumnNames - The column names of the input georaster objects
--      pyramidLevel     - The pyramid level, if NULL and outResolution is
--                         specified, use the outResolution to determine the
--                         pyramidLevel, otherwise defaults to 0.
--      outSRID          - The output georaster data's SRID.
--      outModelCoordLoc - The output georaster data's model coordinate
--                         location. If NULL, defaults to CENTER.
--      referencePoint   - The reference point of the mosaic. The mosaic result
--                         will align with this reference point. If this is
--                         null, the reference point implicitly uses the
--                         upper left corner of the cropArea, or when the
--                         cropArea is null, the upper left corner of the
--                         output extent.
--                         This reference point must be in a SDO_GEOMETRY that
--                         describes a point.
--      cropArea         - The output georaster data's window. If the
--                         sdo_geometry object has srid, the source georaster
--                         objects must be georeferenced, otherwise, the source
--                         georaster object can be georeferenced or non-
--                         georeferenced.
--      polygonClip      - Whether to do polygon clipping. If NULL, defaults
--                         to FALSE.
--      boundaryClip     - Whether to use the source data boundary to clip the
--                         cropArea. If false, the outside the source
--                         data area is filled with background value. If NULL,
--                         defaults to TRUE.
--      layerNumbers     - The layer numbers from the source georasters. If
--                         NULL, empty or has value of '0', all layers are
--                         included.
--      outResolutions   - Output georaster data's resolution. If NULL, defaults
--                         to the source data's resolution at the given
--                         pyramid level.
--      resolutionUnit   - The unit of the output resolution. If NULL, defaults
--                         to the unit of the output SRID. If outResolutions is
--                         NULL, this parameter is ignored.It must be in format
--                         of "unit=val" where val is the unit name.
--      mosaicParam      - The parameter related to mosaic
--      storageParam     - The storage parameter
--      outGeoRaster     - The output georaster object.
--      bgValues         - The background values for sparse data
--      parallelParam    - The parameter related to parallel processing.
--                         Currently we only support
--                           "parallel=DEFAULT": The database computes
--                              the degree of parallelism, which can be 2 or
--                              greater.
--                           "parallel=n": where n>1 is the degree of parallel.
--                              The database optimizer uses the degree of
--                              parallelism specified by n
--                           By default when this parameter is null, there is
--                           no parallel processing.
--
-- RETURNS
--
  PROCEDURE mosaicSubset(
     georasterTableNames IN VARCHAR2,
     georasterColumnNames IN VARCHAR2,
     pyramidLevel       IN NUMBER,
     outSRID            IN NUMBER,
     outModelCoordLoc   IN NUMBER,
     referencePoint     IN MDSYS.SDO_GEOMETRY,
     cropArea           IN MDSYS.SDO_GEOMETRY,
     polygonClip        IN VARCHAR2,
     boundaryClip       IN VARCHAR2,
     layerNumbers       IN VARCHAR2,
     outResolutions     IN MDSYS.SDO_NUMBER_ARRAY,
     resolutionUnit     IN VARCHAR2,
     mosaicParam        IN VARCHAR2,
     storageParam       IN VARCHAR2,
     outGeoRaster       IN OUT MDSYS.SDO_GEORASTER,
     bgValues           IN MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL,
     parallelParam      IN VARCHAR2 DEFAULT NULL
     );

--
-- NAME:
--      getMosaicSubset procedure
--
-- DESCRIPTION
--      Subset from a set of source georaster objects.
--
-- ARGUMENTS
--      inGeoRasters     - The input source georaster objects in a cursor.
--      pyramidLevel     - The pyramid level, if NULL and outResolution is
--                         specified, use the outResolution to determine the
--                         pyramidLevel, otherwise defaults to 0.
--      outSRID          - The output georaster data's SRID.
--      outModelCoordLoc - The output georaster data's model coordinate
--                         location. If NULL, defaults to CENTER.
--      referencePoint   - The reference point of the mosaic. The mosaic result
--                         will align with this reference point. If this is
--                         null, the reference point implicitly uses the
--                         left upper corner of the cropArea, or when the
--                         cropArea is null, the upper corner of the outArea.
--                         This reference point must be in a SDO_GEOMETRY that
--                         describes a point.
--      cropArea         - The output georaster data's window. If the
--                         sdo_geometry object has srid, the source georaster
--                         objects must be georeferenced, otherwise, the source
--                         georaster object can be georeferenced or non-
--                         georeferenced.
--      polygonClip      - Whether to do polygon clipping. If NULL, defaults
--                         to FALSE.
--      boundaryClip     - Whether to use the source data boundary to clip the
--                         cropArea. If false, the outside the source
--                         data area is filled with background value. If NULL,
--                         defaults to TRUE.
--      layerNumbers     - The layer numbers from the source georasters. If
--                         NULL, empty or has value of '0', all layers are
--                         included.
--      outResolutions   - Output georaster data's resolution. If NULL, defaults
--                         to the source data's resolution at the given
--                         pyramid level.
--      resolutionUnit   - The unit of the output resolution. If NULL, defaults
--                         to the unit of output SRID. If outResolutions is
--                         NULL, this parameter is ignored.It must be in format
--                         of "unit=val" where val is the unit name.
--      mosaicParam      - The parameter related to mosaic
--      rasterBlob       - The output Lob
--      outArea          - The output area in model space
--      outWindow        - The output window in cell space
--      storageParam     - The storage parameter
--      bgValues         - The background values for sparse data
--
-- RETURNS
--
  PROCEDURE getMosaicSubset(
     inGeoRasters       IN SYS_REFCURSOR,
     pyramidLevel       IN NUMBER,
     outSRID            IN NUMBER,
     outModelCoordLoc   IN NUMBER,
     referencePoint     IN MDSYS.SDO_GEOMETRY,
     cropArea           IN MDSYS.SDO_GEOMETRY,
     polygonClip        IN VARCHAR2,
     boundaryClip       IN VARCHAR2,
     layerNumbers       IN VARCHAR2,
     outResolutions     IN MDSYS.SDO_NUMBER_ARRAY,
     resolutionUnit     IN VARCHAR2,
     mosaicParam        IN VARCHAR2,
     rasterBlob         IN OUT NOCOPY BLOB,
     outArea            OUT MDSYS.SDO_GEOMETRY,
     outWindow          OUT MDSYS.SDO_NUMBER_ARRAY,
     storageParam       IN VARCHAR2 DEFAULT NULL,
     bgValues           IN MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
     );

--
-- NAME:
--      getMosaicSubset procedure
--
-- DESCRIPTION
--      Subset from a set of source georaster objects.
--
-- ARGUMENTS
--      georasterTableNames - The table names of the input georaster objects
--      georasterColumnNames - The column names of the input georaster objects
--      pyramidLevel     - The pyramid level, if NULL and outResolution is
--                         specified, use the outResolution to determine the
--                         pyramidLevel, otherwise defaults to 0.
--      outSRID          - The output georaster data's SRID.
--      outModelCoordLoc - The output georaster data's model coordinate
--                         location. If NULL, defaults to CENTER.
--      referencePoint   - The reference point of the mosaic. The mosaic result
--                         will align with this reference point. If this is
--                         null, the reference point implicitly uses the
--                         left upper corner of the cropArea, or when the
--                         cropArea is null, the upper corner of the outArea.
--                         This reference point must be in a SDO_GEOMETRY that
--                         describes a point.
--      cropArea         - The output georaster data's window. If the
--                         sdo_geometry object has srid, the source georaster
--                         objects must be georeferenced, otherwise, the source
--                         georaster object can be georeferenced or non-
--                         georeferenced.
--      polygonClip      - Whether to do polygon clipping. If NULL, defaults
--                         to FALSE.
--      boundaryClip     - Whether to use the source data boundary to clip the
--                         cropArea. If false, the outside the source
--                         data area is filled with background value. If NULL,
--                         defaults to TRUE.
--      layerNumbers     - The layer numbers from the source georasters. If
--                         NULL, empty or has value of '0', all layers are
--                         included.
--      outResolutions   - Output georaster data's resolution. If NULL, defaults
--                         to the source data's resolution at the given
--                         pyramid level.
--      resolutionUnit   - The unit of the output resolution. If NULL, defaults
--                         to the unit of output SRID. If outResolutions is
--                         NULL, this parameter is ignored.It must be in format
--                         of "unit=val" where val is the unit name.
--      mosaicParam      - The parameter related to mosaic
--      rasterBlob       - The output Lob
--      outArea          - The output area in model space
--      outWindow        - The output window in cell space
--      storageParam     - The storage parameter
--      bgValues         - The background values for sparse data
--
-- RETURNS
--
  PROCEDURE getMosaicSubset(
     georasterTableNames IN VARCHAR2,
     georasterColumnNames IN VARCHAR2,
     pyramidLevel       IN NUMBER,
     outSRID            IN NUMBER,
     outModelCoordLoc   IN NUMBER,
     referencePoint     IN MDSYS.SDO_GEOMETRY,
     cropArea           IN MDSYS.SDO_GEOMETRY,
     polygonClip        IN VARCHAR2,
     boundaryClip       IN VARCHAR2,
     layerNumbers       IN VARCHAR2,
     outResolutions     IN MDSYS.SDO_NUMBER_ARRAY,
     resolutionUnit     IN VARCHAR2,
     mosaicParam        IN VARCHAR2,
     rasterBlob         IN OUT NOCOPY BLOB,
     outArea            OUT MDSYS.SDO_GEOMETRY,
     outWindow          OUT MDSYS.SDO_NUMBER_ARRAY,
     storageParam       IN VARCHAR2 DEFAULT NULL,
     bgValues           IN MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
     );

--
-- NAME:
--      validateForMosaicSubset procedure
--
-- DESCRIPTION
--      Check if the mosaic request is valid. The validation result is stored
--  in a user created result table with the following columns:
--   (time timestamp, type varchar2, description varchar2,
--    table_name varchar2, column_name varchar2, rdt_table_name varchar2,
--    raster_id number)
--
-- ARGUMENTS
--      inGeoRasters     - The input source georaster objects in a cursor.
--      outSRID          - The output georaster data's SRID.
--      outResolutions   - Output georaster data's resolution. If NULL, defaults
--                         to the source data's resolution at the given
--                         pyramid level.
--      resolutionUnit   - The unit of the output resolution. If NULL, defaults
--                         to the unit of the output SRID. If outResolutions is
--                         NULL, this parameter is ignored.It must be in format
--                         of "unit=val" where val is the unit name.
--      resultTableName  - The name of the result table.
--
-- RETURNS
--
  PROCEDURE validateForMosaicSubset(
     inGeoRasters       IN SYS_REFCURSOR,
     outSRID            IN NUMBER,
     outResolutions     IN MDSYS.SDO_NUMBER_ARRAY,
     resolutionUnit     IN VARCHAR2,
     resultTableName    IN VARCHAR2
     );

--
-- NAME:
--      validateForMosaicSubset procedure
--
-- DESCRIPTION
--      Check if the mosaic request is valid. The validation result is stored
--  in a user created result table with the following columns:
--   (time timestamp, type varchar2, description varchar2,
--    table_name varchar2, column_name varchar2, rdt_table_name varchar2,
--    raster_id number)
--
-- ARGUMENTS
--      georasterTableNames - The table names of the input georaster objects
--      georasterColumnNames - The column names of the input georaster objects
--      outSRID          - The output georaster data's SRID.
--      outResolutions   - Output georaster data's resolution. If NULL, defaults
--                         to the source data's resolution at the given
--                         pyramid level.
--      resolutionUnit   - The unit of the output resolution. If NULL, defaults
--                         to the unit of the output SRID. If outResolutions is
--                         NULL, this parameter is ignored.It must be in format
--                         of "unit=val" where val is the unit name.
--      resultTableName  - The name of the result table.
--
-- RETURNS
--
  PROCEDURE validateForMosaicSubset(
     georasterTableNames IN VARCHAR2,
     georasterColumnNames IN VARCHAR2,
     outSRID            IN NUMBER,
     outResolutions     IN MDSYS.SDO_NUMBER_ARRAY,
     resolutionUnit     IN VARCHAR2,
     resultTableName    IN VARCHAR2
     );

--
-- NAME:
--      getMosaicExtent Function.
--
-- DESCRIPTION
--  Calculate the extent of the total mosaic set.
--
-- ARGUMENTS
--      inGeoRasters     - The input source georaster objects in a cursor.
--      outSRID          - The SRID of the output extent. If null, the
--                         SRID of the output extent will use 4326 (WGS84)
--
-- RETURNS: A MDSYS.GEOMETRY object that describes the MBR of the total mosaic.
--
FUNCTION getMosaicExtent(
     inGeoRasters       IN SYS_REFCURSOR,
     outSRID            IN NUMBER  DEFAULT NULL
) RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC;

--
-- NAME:
--      getMosaicExtent Function.
--
-- DESCRIPTION
--  Calculate the extent of the total mosaic set.
--
-- ARGUMENTS
--      georasterTableNames - The table names of the input georaster objects
--      georasterColumnNames - The column names of the input georaster objects
--      outSRID          - The SRID of the output extent. If null, the
--                         SRID of the output extent will use 4326 (WGS84)
--
-- RETURNS: A MDSYS.GEOMETRY object that describes the MBR of the total mosaic.
--
FUNCTION getMosaicExtent(
     georasterTableNames IN VARCHAR2,
     georasterColumnNames IN VARCHAR2,
     outSRID            IN NUMBER  DEFAULT NULL
) RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC;

--
-- NAME:
--      getMosaicResolutions Function.
--
-- DESCRIPTION
--  Get the resolution range of the total mosaic set in a given coordinate
--  system.
--
-- ARGUMENTS
--      inGeoRasters     - The input source georaster objects in a cursor.
--      resolutionUnit   - The unit of the output resolution range. If NULL,
--                         defaults to 'unit=METER'. It must be in format
--                         of "unit=val" where val is the unit name.
-- RETURN:               - The output x and y resolution range in
--                         MDSYS.SDO_RANGE_ARRAY. The resolution unit will
--                         be the unit defined by the targetSRID.
--
--
FUNCTION  getMosaicResolutions(
     inGeoRasters       IN SYS_REFCURSOR,
     resolutionUnit     IN VARCHAR2 DEFAULT NULL
) return MDSYS.SDO_RANGE_ARRAY DETERMINISTIC;

--
-- NAME:
--      getMosaicResolutions Function.
--
-- DESCRIPTION
--  Get the resolution range of the total mosaic set in a given coordinate
--  system.
--
-- ARGUMENTS
--      georasterTableNames - The table names of the input georaster objects
--      georasterColumnNames - The column names of the input georaster objects
--      resolutionUnit   - The unit of the output resolution range. If NULL,
--                         defaults to 'unit=METER'. It must be in format
--                         of "unit=val" where val is the unit name.
--      targetSRID       - The target SRID for the resolution. If null, the
--                         target SRID will default to 4326 (WGS84)
-- RETURN:               - The output x and y resolution range in
--                         MDSYS.SDO_RANGE_ARRAY. The resolution unit will
--                         be the unit defined by the targetSRID.
--
FUNCTION getMosaicResolutions(
     georasterTableNames  IN VARCHAR2,
     georasterColumnNames IN VARCHAR2,
     resolutionUnit       IN VARCHAR2 DEFAULT NULL
) RETURN MDSYS.SDO_RANGE_ARRAY DETERMINISTIC;

--
-- NAME:
--      Append procedure
--
-- DESCRIPTION
--      Append one GeoRaster object to another GeoRaster object.
--
-- The source and target GeoRaster objects must have the same number of bands.
--
-- There is no change on metadata of target GeoRaster object except the
-- extent, the number of blocks and statistics removed.
--
-- The mask of the target GeoRaster object is expanded according to the
-- raster data expansion.
--
-- The sourceGeoRaster object will be appended to the targetGeoRaster pyramid
-- level 0. The pyramids of the target GeoRaster object are updated too.
--
-- The overlapping area of the source and targe GeoRaster objects are resolved
-- according to the commonPointRule defined in the appendParam.
--
-- ARGUMENTS
--      targetGeoRaster - The GeoRaster object to be appended. Cannot be the
--                        same GeoRaster. (Be sure to make a copy of this
--                        object before calling this procedure as this object
--                        will be modified).
--      sourceGeoRaster - The GeoRaster object to be appended to targeGeoRaster
--      sourcePyramidLevel - The source GeoRaster object pyramid level to be
--                         appended at the target GeoRaster object pyramid level
--                         0. If NULL, pyramid level 0 is used.
--      appendParam      - The parameter related to append.
--      bgValues         - The background values for sparse data
--
--
  PROCEDURE Append(
     targetGeoRaster    IN OUT NOCOPY MDSYS.SDO_GEORASTER,
     sourceGeoRaster    IN MDSYS.SDO_GEORASTER,
     sourcePyramidLevel IN NUMBEr,
     appendParam        IN VARCHAR2,
     bgValues           IN MDSYS.SDO_NUMBER_ARRAY DEFAULT NULL
     );

END SDO_GEOR_AGGR;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_GCDR" AUTHID current_user as
  procedure validateCountryRow( country VARCHAR2,
    keys SDO_keywordArray);

  -- used by country profile validation trigger, should not be documented
  procedure validateInLineStreetTypeRow( country VARCHAR2,
    pos VARCHAR2,
    sep VARCHAR2,
    out VARCHAR2,
    keys SDO_keywordArray);

  -- used by country profile validation trigger, should not be documented
  procedure validateStreetTypeRow( country VARCHAR2,
    pos VARCHAR2,
    sep VARCHAR2,
    out VARCHAR2,
    keys SDO_keywordArray);

  -- used by country profile validation trigger, should not be documented
  procedure validateSecondUnitRow( country VARCHAR2,
    pos VARCHAR2,
    out VARCHAR2,
    keys SDO_keywordArray);

  -- used by country profile validation trigger, should not be documented
  procedure validateStreetPrefixRow( country VARCHAR2,
    out VARCHAR2,
    keys SDO_keywordArray);

  -- used by country profile validation trigger, should not be documented
  procedure validateStreetSuffixRow( country VARCHAR2,
    out VARCHAR2,
    keys SDO_keywordArray);

  -- used by country profile validation trigger, should not be documented
  procedure validateRegionRow( country VARCHAR2,
    out VARCHAR2,
    keys SDO_keywordArray);

  -- used by country profile validation trigger, should not be documented
  procedure validateCityRow( country VARCHAR2,
    out VARCHAR2,
    keys SDO_keywordArray);

  -- used by country profile validation trigger, should not be documented
  procedure validateLocalityDictRow( country VARCHAR2,
    out VARCHAR2,
    keys SDO_keywordArray);

  -- used by country profile validation trigger, should not be documented
  procedure validateStreetDictRow( country VARCHAR2,
    out VARCHAR2,
    keys SDO_keywordArray);

  -- used by country profile validation trigger, should not be documented
  procedure validatePoBoxRow( country VARCHAR2,
    out VARCHAR2,
    keys SDO_keywordArray);

  -- used by country profile validation trigger, should not be documented
  procedure validatePlaceNameRow( country VARCHAR2,
    out VARCHAR2);

  -- create parser profile tables
  procedure create_profile_tables ;

  -- used by java geocoder client, should not be documented
  function batch_geocode(address_list in varchar2, gc_username in varchar2, max_result_count number)
  return sdo_keywordarray deterministic PARALLEL_ENABLE;

  -- geocode an input address specified by address lines and return
  -- the first matched address as a SDO_GEO_ADDR object
  function geocode(
    username varchar2,
    addr_lines SDO_keywordArray,
    country VARCHAR2,
    match_mode VARCHAR2,
    logging number default 0) return SDO_GEO_Addr deterministic PARALLEL_ENABLE;

  -- geocode an input address specified by address lines and return
  -- the the coordinates of the first matched address as sdo_geometry
  function geocode_as_geometry(
    username varchar2,
    addr_lines SDO_keywordArray,
    country VARCHAR2)
  RETURN SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

  -- geocode an input address specified by a SDO_GEO_ADDR object and return
  -- the first matched address as a SDO_GEO_ADDR object
  function geocode_addr(
    gc_username varchar2,
    address SDO_GEO_ADDR,
    logging number default 0) return SDO_geo_Addr deterministic PARALLEL_ENABLE;

  -- geocode an input address specified by a address lines and return all
  -- matched addresses as a VARRAY of SDO_GEO_ADDR objects
  function geocode_all(
    gc_username varchar2,
    addr_lines SDO_keywordArray,
    country VARCHAR2,
    match_mode varchar2,
    max_res_num number default 4000) return SDO_ADDR_ARRAY deterministic PARALLEL_ENABLE;

  -- geocode an input address specified by a SDO_GEO_ADDR object and return all
  -- matched addresses as a VARRAY of SDO_GEO_ADDR objects
  function geocode_addr_all(
    gc_username varchar2,
    address SDO_GEO_ADDR,
    max_res_num number default 4000) return SDO_ADDR_ARRAY deterministic PARALLEL_ENABLE;

  -- reverse-geocode a location specified by longitude and latitude into
  -- address as a sdo_geo_addr object
  function reverse_geocode(
    username varchar2,
    longitude number,
    latitude number,
    country VARCHAR2) return SDO_GEO_Addr deterministic PARALLEL_ENABLE;

  -- reverse-geocode a location specified by longitude, latitude and srid into
  -- address as a sdo_geo_addr object
  function reverse_geocode(
    username varchar2,
    longitude number,
    latitude number,
    srid number DEFAULT -1,
    country VARCHAR2) return SDO_GEO_Addr deterministic PARALLEL_ENABLE;

  -- reverse-geocode a location specified by longitude and latitude into
  -- address as a sdo_geo_addr object
  function reverse_geocode(
    username varchar2,
    location sdo_geometry,
    country VARCHAR2) return SDO_GEO_Addr deterministic PARALLEL_ENABLE;

  -- reverse-geocode a location specified by longitude, latitude, into
  -- address as a sdo_geo_addr object; address returned in lang
  function reverse_geocode(
    username varchar2,
    longitude number,
    latitude number,
    language_ VARCHAR2,
    country VARCHAR2) return SDO_GEO_Addr deterministic PARALLEL_ENABLE;

  -- reverse-geocode a location specified by longitude, latitude, srid, into
  -- address as a sdo_geo_addr object; address returned in lang
  function reverse_geocode(
    username varchar2,
    longitude number,
    latitude number,
    srid number DEFAULT -1,
    language_ VARCHAR2,
    country VARCHAR2) return SDO_GEO_Addr deterministic PARALLEL_ENABLE;

  -- reverse-geocode a location specified by geom into
  -- address as a sdo_geo_addr object; address returned in lang
  function reverse_geocode(
    username varchar2,
    location sdo_geometry,
    language_ VARCHAR2,
    country VARCHAR2) return SDO_GEO_Addr deterministic PARALLEL_ENABLE;

  -- lists the countries available for geocoding. If more than one Geocoder is
  -- installed, the UNION of countries available in each Geocoder is returned
  FUNCTION list_countries RETURN SDO_STRING_ARRAY DETERMINISTIC PARALLEL_ENABLE;

  -- lists the data version used for geocoding. If more than one Geocoder is
  -- installed, all the gc_table_suffix-version combinations are listed
  FUNCTION data_version RETURN SDO_STRING_ARRAY DETERMINISTIC PARALLEL_ENABLE;

end SDO_GCDR;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_ROUTER_PARTITION" AUTHID current_user AS
  FUNCTION adjust_m(start_m IN NUMBER, end_m IN NUMBER, m IN NUMBER)
    RETURN NUMBER;

  FUNCTION get_pid(m IN NUMBER, pid IN NUMBER)
    RETURN NUMBER;

  FUNCTION min_eigenvector(sum_x2 IN NUMBER, sum_y2 IN NUMBER, sum_xy IN NUMBER)
    RETURN mdsys.vector_2d;

  PROCEDURE cleanup_router(all_tables IN BOOLEAN DEFAULT TRUE);

  PROCEDURE create_sdo_router_log_dir(
             router_schema    IN VARCHAR2,
             new_dir_path     IN VARCHAR2 DEFAULT NULL);

  PROCEDURE partition_router(log_file_name IN VARCHAR2 := 'sdo_router_partition.log',
                        max_v_no IN NUMBER DEFAULT 10000,
                        driving_side IN VARCHAR2 := 'R',
                        network_name IN VARCHAR := 'ROUTER_NETWORK',
                        max_memory IN NUMBER := 1.75,
                        cleanup IN BOOLEAN DEFAULT TRUE,
                        use_securefiles IN BOOLEAN DEFAULT TRUE,
                        generate_11g_restrictions IN BOOLEAN DEFAULT TRUE);

  PROCEDURE validate_sdo_router_log_dir(log_file_name IN VARCHAR2 := 'sdo_router_partition.log');

  PROCEDURE create_trucking_data(
                      log_file_name IN VARCHAR2 := 'sdo_router_partition.log',
                      cleanup IN BOOLEAN DEFAULT TRUE);

  PROCEDURE create_turn_restriction_data(
                      log_file_name IN VARCHAR2 := 'sdo_router_partition.log',
                      cleanup IN BOOLEAN DEFAULT TRUE);

  PROCEDURE dump_partitions(log_file_name IN VARCHAR2 := 'sdo_router_partition.log',
                      start_pid IN NUMBER DEFAULT 0,
                      end_pid IN NUMBER DEFAULT -1,
                      verbose IN BOOLEAN DEFAULT FALSE);

  PROCEDURE dump_trucking_data(log_file_name IN VARCHAR2 := 'sdo_router_partition.log',
                      start_pid IN NUMBER DEFAULT 0,
                      end_pid IN NUMBER DEFAULT -1,
                      skip_unsupported IN BOOLEAN DEFAULT TRUE);

  PROCEDURE dump_turn_restriction_data(log_file_name IN VARCHAR2 := 'sdo_router_partition.log',
                      start_pid IN NUMBER DEFAULT 0,
                      end_pid IN NUMBER DEFAULT -1,
                      dump_soft_restrictions IN BOOLEAN DEFAULT FALSE);

  PROCEDURE validate_partitions(log_file_name IN VARCHAR2 := 'sdo_router_partition.log',
                      start_pid IN NUMBER DEFAULT 0,
                      end_pid IN NUMBER DEFAULT -1,
                      verbose IN BOOLEAN DEFAULT FALSE);

   PROCEDURE gather_table_stats(table_name IN VARCHAR2);

   PROCEDURE get_version(log_file_name IN VARCHAR2 := 'sdo_router_partition.log');

  PROCEDURE create_router_network(log_file_name IN VARCHAR2 := 'sdo_router_partition.log',
                                  network_name  IN VARCHAR2 := 'ROUTER_NETWORK');

  PROCEDURE delete_router_network(log_file_name IN VARCHAR2 := 'sdo_router_partition.log',
                                  network_name  IN VARCHAR2 := 'ROUTER_NETWORK',
                                  log_delete IN BOOLEAN := TRUE);

  PROCEDURE elocation_partition_router (logfile_name  IN VARCHAR2,
                                        blob_format IN VARCHAR2) AS LANGUAGE java
    NAME 'oracle.spatial.router.partitioning.ElocationPartition.partition_router(
      java.lang.String, java.lang.String)';

  PROCEDURE elocation_trucking_data (logfile_name IN VARCHAR2) AS LANGUAGE java
    NAME 'oracle.spatial.router.partitioning.ElocationPartition.create_trucking_data(
      java.lang.String)';

  PROCEDURE elocation_turn_restrict_data (logfile_name IN VARCHAR2) AS LANGUAGE java
    NAME 'oracle.spatial.router.partitioning.ElocationPartition.create_turn_restriction_data(
      java.lang.String)';

  PROCEDURE elocation_dump_partition (logfile_name in VARCHAR2,
                                      start_pid in NUMBER,
                                      end_pid in NUMBER,
                                      verbose in BOOLEAN,
                                      is10g in BOOLEAN) AS LANGUAGE java
    NAME 'oracle.spatial.router.partitioning.ElocationPartition.dumpPartition(
      java.lang.String, int, int, boolean, boolean)';

  PROCEDURE elocation_dump_trucking_data (logfile_name IN VARCHAR2,
                                         start_pid IN NUMBER,
                                         end_pid IN NUMBER,
                                         skip_unsupported IN BOOLEAN) AS LANGUAGE java
    NAME 'oracle.spatial.router.partitioning.ElocationPartition.dumpTruckingData(
      java.lang.String, int, int, boolean)';

  -- PLSQL limit, full name elocation_dump_turn_restrict_data
  PROCEDURE elocation_dump_turn_restrict (logfile_name IN VARCHAR2,
                                         start_pid IN NUMBER,
                                         end_pid IN NUMBER,
                                         dump_soft_restrictions IN BOOLEAN) AS LANGUAGE java
    NAME 'oracle.spatial.router.partitioning.ElocationPartition.dumpTurnRestrictionData(
      java.lang.String, int, int, boolean)';


  PROCEDURE elocation_validate_partition (logfile_name in VARCHAR2,
                                          start_pid in NUMBER,
                                          end_pid in NUMBER,
                                          verbose in BOOLEAN,
                                          is10g in BOOLEAN) AS LANGUAGE java
    NAME 'oracle.spatial.router.partitioning.ElocationPartition.validatePartition(
      java.lang.String, int, int, boolean, boolean)';

  PROCEDURE build_turn_restrictions (logdir in VARCHAR2,
                                     drivingside in VARCHAR2) AS LANGUAGE java
    NAME 'oracle.spatial.router.partitioning.TurnRestriction.buildTurnRestrictions(java.lang.String, java.lang.String)';

  PROCEDURE elocation_validate_logfile(logfile_name  IN VARCHAR2,
                                     schema_name IN VARCHAR2) AS LANGUAGE java
    NAME 'oracle.spatial.router.partitioning.ElocationPartition.validate_logfile(
      java.lang.String, java.lang.String)';

    FUNCTION get_edge_info(edge_ids       IN  sdo_list_type,
                         to_edge_ids    OUT sdo_list_type,
                         rets           OUT mdsys.string_array,
                         angle_segments OUT sdo_list_type)
  RETURN mdsys.string_array ;


  FUNCTION get_geometry_info(edge_ids       IN  sdo_list_type,
                             merged_coords  OUT sdo_list_type)
  RETURN NUMBER;

END SDO_ROUTER_PARTITION;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_NET_PARTITION" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
1bd4 58b
wnFlqWcNMp49V2jweK4BzKGde3wwgw2T2UqGyi9ox7ysjO/wK+wRDZyt8+uhtHClm4ULluS1
D1Zw2tQttp0EDILMfMPlCqt8zdPBF882GuNLdqBiLXfDXq/z35KivZfwid0NKp4UFScDNX1w
MBxFjom6DoCPH4UNyFhlAu3NL0PjE+Aomx06pxJkQ58gumHLL6i9g1pbWndMc10aS5RRVfeW
IYabiuCsgCzzbJPzgriylj+8J5L82+P6LIygYmVjkCFh1jZu9f0Y0bhbb0RoCRh24/epwDl1
uvD+dHfrYkMRglKgiSyinw505X12YbNHkkBP+U89/tNhD5BrP1T78q2uA5Lr0JhwWE9LaK1z
rgYnKmLmTofncuHzV3BqISUlMN3LBswGm3eL6Ssj/6eGBr0wTv914ZrYt6/ANWfpGPB0e9YC
nTkD4wqwH36fqiL5MKmAxgkGEmk5zAKsNFp2qygWSbiE+NqDXkpDVT7Y7n1iu9aUVMFJyjdS
LHJbkBBIwaanR7zGdoZXji0+5amWQVBXkQvqM/ixn+OMnTpvSx+/H1KmCRjVbPsDHY7swYXG
FiRe8d20nlrmuVJoB8g2Abyze+ZVjpJN3mF/dAobBGpj4QbMQDckW17SEPn+ZKanmWMkXjfM
wgzZfpym2KMnAEDEkWx1Dxosafav5fUEhc2vNFf7vGj4rbPJBXsi5WPC4UTxDjAesYyim59j
EC1XnbGf8D3eoC4USGYysNkTgv5HHcBaGZKn6jARhBOAFuxbHq9m2fGpTDLFfFr6dAllbdP2
ALTxMRIywQe3+UGBf83DuUOVI3xa+nQJZQygj0fXbfftwD6IlLsx2cpwAKIaKYLbyAS8B7Zr
Qo95QUkseqeSCddT3o786+k9Ih4mEhbsfJKtQYuzVvk792qR/iNuWeprd+XbhgeOCPpXjkCd
eworRwsDz+2j+x3ecAaNcKJu75/5qm3GHN2M0AlNfuQc05YRVt11dX6SxVZrAu3SrnJrcR+L
DjsgvFfunRXb8vRoMzdbxY6298fvjRHVOdPLMrce+E3oPR5G4dBDQXhI6nlVQci+HU9kPVwh
BsIlU2G8oEaIturKPHmps4+zLQXo5v5WF1mtuMK4jPIKfk3SgWfeq2h9Ec9QZIgPEFipSyk8
0hFKk02vXN56hLBLFoH4ndyDnwA7Zrtckt/rGM9e5c+8o/qihz3fSdsGRepDUKFV6b1ob0pH
dGMEccqJ/R47ir6rRZdt6sl+aSOCb1MISwvgfPD960Vy9Qu0SvMm2FG1bu+sN9t6B02rtSGM
SmH1mUCRzkVQ+kSH4sDHk70QQWsDYpAg/M+6xvDwmibjUSGrfkigwlvE/Q1kYldTO65BF0jR
DKJxqMHjSz2Y0DPh3JKWubw/5FtCBVNi
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_NET" AUTHID current_user AS

  ---------------------------
  --CONSTANTS
  ---------------------------
  --Logging levels
  --The finer the logging level, the higher the number
  LOGGING_LEVEL_FATAL     CONSTANT INTEGER := 1;
  LOGGING_LEVEL_ERROR     CONSTANT INTEGER := 2;
  LOGGING_LEVEL_WARN      CONSTANT INTEGER := 3;
  LOGGING_LEVEL_INFO      CONSTANT INTEGER := 4;
  LOGGING_LEVEL_DEBUG     CONSTANT INTEGER := 5;
  LOGGING_LEVEL_FINEST    CONSTANT INTEGER := 6;

  --Fearture Types
  FEAT_TYPE_PON           CONSTANT INTEGER := 1;  --SINGLE POINT ON NODE
  FEAT_TYPE_POL           CONSTANT INTEGER := 2;  --SINGLE POINT ON LINK
  FEAT_TYPE_POINT         CONSTANT INTEGER := 3;  --SINGLE POINT
  FEAT_TYPE_LINE          CONSTANT INTEGER := 4;  --SINGLE LINE
  FEAT_TYPE_MPON          CONSTANT INTEGER := 5;  --MULTI POINT ON NODE
  FEAT_TYPE_MPOL          CONSTANT INTEGER := 6;  --MULTI POINT ON LINK
  FEAT_TYPE_MPOINT        CONSTANT INTEGER := 7;  --MULTI POINT
  FEAT_TYPE_MLINE         CONSTANT INTEGER := 8;  --MULTI LINE
  FEAT_TYPE_COLL          CONSTANT INTEGER := 9;  --COLLECTION

  --Fearture Element Types
  FEAT_ELEM_TYPE_PON      CONSTANT INTEGER := 1;  --POINT ON NODE
  FEAT_ELEM_TYPE_POL      CONSTANT INTEGER := 2;  --POINT ON LINK
  FEAT_ELEM_TYPE_LINE     CONSTANT INTEGER := 3;  --LINE

  --Net Element Types
  NET_ELEM_TYPE_NODE      CONSTANT INTEGER := 1;  --NODE
  NET_ELEM_TYPE_LINK      CONSTANT INTEGER := 2;  --LINK

  ---------------------------
  --TYPES
  ---------------------------
  type ref_cursor is ref cursor;

  ---------------------------
  --SUBPROGRAMS
  ---------------------------
  -- check if the network exists in the network metadata
  FUNCTION network_exists(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(network_exists,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return the network ID from network name
  FUNCTION get_network_id(network IN VARCHAR2)
    RETURN NUMBER;
  --PRAGMA RESTRICT_REFERENCES(get_network_id,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return  network name from network ID
  FUNCTION get_network_name(network_id IN NUMBER)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_network_name,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return  network name from network ID
  FUNCTION get_network_name(network_id IN NUMBER, owner OUT VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_network_name,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return  network owner from network ID
  FUNCTION get_network_owner(network_id IN NUMBER)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_network_owner,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return the type of network
  FUNCTION get_network_type(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_network_type,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return the type of network
  FUNCTION get_network_category(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_network_category,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return the type of geometry
  FUNCTION get_geometry_type(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_geometry_type,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return no of hierarchy levels
  FUNCTION get_no_of_hierarchy_levels(network IN VARCHAR2)
    RETURN NUMBER;
  PRAGMA RESTRICT_REFERENCES(get_no_of_hierarchy_levels,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: query partition table instead      --
  -----------------------------------------------------
  -- return no of partition
  FUNCTION get_no_of_partitions(network IN VARCHAR2,
                                link_level IN NUMBER DEFAULT 1)
    RETURN NUMBER;

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return geometry table(LRS) name of network
  FUNCTION get_lrs_table_name(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_lrs_table_name,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return LRS geom column of network
  FUNCTION get_lrs_geom_column(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_lrs_geom_column,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return node table name of network
  FUNCTION get_node_table_name(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_node_table_name,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return node geom column of network
  FUNCTION get_node_geom_column(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_node_geom_column,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return node cost column of network
  FUNCTION get_node_cost_column(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_node_cost_column,WNDS,WNPS,RNPS);

  ----------------------------------------------------------------------
  -- @deprecated: node partition column is no longer used since 11gR1.--
  ----------------------------------------------------------------------
  -- return node partition column of network
  FUNCTION get_node_partition_column(network IN VARCHAR2)
    RETURN VARCHAR2;
  --PRAGMA RESTRICT_REFERENCES(get_node_partition_column,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return link table name of network
  FUNCTION get_link_table_name(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_link_table_name,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return link geom column of network
  FUNCTION get_link_geom_column(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_link_geom_column,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return link direction of network
  FUNCTION get_link_direction(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_link_direction,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: link partition column is not used. --
  -----------------------------------------------------
  -- return link partition column of network
  FUNCTION get_link_partition_column(network IN VARCHAR2)
    RETURN VARCHAR2;
  --PRAGMA RESTRICT_REFERENCES(get_link_partition_column,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return link cost column of network
  FUNCTION get_link_cost_column(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_link_cost_column,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return path table name of network
  FUNCTION get_path_table_name(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_path_table_name,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return path geom column name of network
  FUNCTION get_path_geom_column(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_path_geom_column,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return path-link table name of network
  FUNCTION get_path_link_table_name(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_path_link_table_name,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return subpath table name of network
  FUNCTION get_subpath_table_name(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_subpath_table_name,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return subpath geom column name of network
  FUNCTION get_subpath_geom_column(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_subpath_geom_column,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return partition table name of network
  FUNCTION get_partition_table_name(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_partition_table_name,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return partition blob table name of network
  FUNCTION get_partition_blob_table_name(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_partition_blob_table_name,WNDS,WNPS,RNPS);

  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return if there is any user defined data in the metadata
  FUNCTION get_user_defined_data(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_user_defined_data,WNDS,WNPS,RNPS);


  -- return no of nodes of the network
  FUNCTION get_no_of_nodes(network IN VARCHAR2)
    RETURN NUMBER;

  -- return no of nodes of the network of specified hierarchy_level
  FUNCTION get_no_of_nodes(network IN VARCHAR2, hierarchy_level IN NUMBER)
    RETURN NUMBER;

  -- return no of links of the network
  FUNCTION get_no_of_links(network IN VARCHAR2)
    RETURN NUMBER;
--  PRAGMA RESTRICT_REFERENCES(get_no_of_links,WNDS,WNPS,RNPS);

  -- return no of links of the network of specified hierarchy_level
  FUNCTION get_no_of_links(network IN VARCHAR2, hierarchy_level IN NUMBER)
    RETURN NUMBER;

  -- return no of links of the given path
  FUNCTION get_no_of_links_in_path(network IN VARCHAR2, path_id IN NUMBER)
    RETURN NUMBER;

  -- return no of nodes of the given path
  FUNCTION get_no_of_nodes_in_path(network IN VARCHAR2, path_id IN NUMBER)
    RETURN NUMBER;

  -- return the in-link ids of a node
  FUNCTION get_in_links(network IN VARCHAR2, node_id in number)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC ;

  -- return the out-link ids of a node
  FUNCTION get_out_links(network IN VARCHAR2, node_id in number)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC;


  -- return the in-degree of a node
  FUNCTION get_node_in_degree(network IN VARCHAR2, node_id in number)
    RETURN NUMBER;

  -- return the out-degree of a node
  FUNCTION get_node_out_degree(network IN VARCHAR2, node_id in number)
    RETURN NUMBER;
--  PRAGMA RESTRICT_REFERENCES(get_node_out_degree,WNDS,WNPS,RNPS);

  -- return the degree of a node(in_degree+out_degree)
  FUNCTION get_node_degree(network IN VARCHAR2, node_id in number)
    RETURN NUMBER;


  -- return the child nodes of a given node
  FUNCTION get_child_nodes(network IN VARCHAR2, node_id in number)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC;

  -- return the child links of a given link
  FUNCTION get_child_links(network IN VARCHAR2, link_id in number)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC;

  -----------------
  -- @deprecated --
  -----------------
  -- return the path links of a given path
  FUNCTION get_links_in_path(network IN VARCHAR2, path_id in number)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC;

  -- return the path nodes of a given path
  FUNCTION get_nodes_in_path(network IN VARCHAR2, path_id in number)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC;


  --
  -- create xxx_network assumes the following naming convention
  -- table name length limitation: 32 char.
  -- network name length limitation : 24 char
  --

  -- default table/columns names:
  -- node table                 : <network>_node$
  -- link table                 : <network>_link$
  -- path table                 : <network>_path$
  -- path link  table           : <network>_plink$ (path_id, link_id)
  -- node geom. column          : geometry
  -- node lrs geom column       : geom_id and measure
  -- node topo geom column      : topo_geometry
  -- link geom. column          : geometry
  -- link lrs geom column       : geom_id, start_measure, and end_measure
  -- link topo geom column      : topo_geometry
  -- path geom. column          : geometry
  -- node cost  column          : cost
  -- link cost  column          : cost
  -- path cost  column          : cost
  -- subpath table name         : <network>_spath$
  -- subpath geom. column       : geometry
  -- storage parameters         : for create table statement



  -- create a logical network
  PROCEDURE create_logical_network(network                      IN VARCHAR2,
                                   no_of_hierarchy_levels       IN NUMBER,
                                   is_directed                  IN BOOLEAN,
                                   node_table_name              IN VARCHAr2,
                                   node_cost_column             IN VARCHAR2,
                                   link_table_name              IN VARCHAR2,
                                   link_cost_column             IN VARCHAR2,
                                   path_table_name              IN VARCHAR2,
                                   path_link_table_name         IN VARCHAR2,
                                   subpath_table_name           IN VARCHAR2,
                                   is_complex                   IN BOOLEAN DEFAULT FALSE,
                                   storage_parameters           IN VARCHAR2 DEFAULT '');

  -- create a logical network
  PROCEDURE create_logical_network(network                      IN VARCHAR2,
                                   no_of_hierarchy_levels       IN NUMBER,
                                   is_directed                  IN BOOLEAN,
                                   node_table_name              IN VARCHAr2,
                                   node_cost_column             IN VARCHAR2,
                                   link_table_name              IN VARCHAR2,
                                   link_cost_column             IN VARCHAR2,
                                   path_table_name              IN VARCHAR2,
                                   path_link_table_name         IN VARCHAR2,
                                   is_complex                   IN BOOLEAN DEFAULT FALSE,
                                   storage_parameters           IN VARCHAR2 DEFAULT '');

  -- create a logical network (simplified version)
  PROCEDURE create_logical_network(network                      IN VARCHAR2,
                                   no_of_hierarchy_levels       IN NUMBER,
                                   is_directed                  IN BOOLEAN,
                                   node_with_cost               IN BOOLEAN DEFAULT FALSE,
                                   is_complex                   IN BOOLEAN DEFAULT FALSE,
                                   storage_parameters           IN VARCHAR2 DEFAULT '');



  -- create a spatial (SDO_GEOMETRY) network
  PROCEDURE create_sdo_network(network                  IN VARCHAR2,
                               no_of_hierarchy_levels   IN NUMBER,
                               is_directed              IN BOOLEAN,
                               node_table_name          IN VARCHAR2,
                               node_geom_column         IN VARCHAR2,
                               node_cost_column         IN VARCHAR2,
                               link_table_name          IN VARCHAR2,
                               link_geom_column         IN VARCHAR2,
                               link_cost_column         IN VARCHAR2,
                               path_table_name          IN VARCHAR2,
                               path_geom_column         IN VARCHAR2,
                               path_link_table_name     IN VARCHAR2,
                               subpath_table_name       IN VARCHAR2,
                               subpath_geom_column      IN VARCHAR2,
                               is_complex               IN BOOLEAN DEFAULT FALSE,
                               storage_parameters       IN VARCHAR2 DEFAULT '');

  -- create a spatial (SDO_GEOMETRY) network
  PROCEDURE create_sdo_network(network                  IN VARCHAR2,
                               no_of_hierarchy_levels   IN NUMBER,
                               is_directed              IN BOOLEAN,
                               node_table_name          IN VARCHAR2,
                               node_geom_column         IN VARCHAR2,
                               node_cost_column         IN VARCHAR2,
                               link_table_name          IN VARCHAR2,
                               link_geom_column         IN VARCHAR2,
                               link_cost_column         IN VARCHAR2,
                               path_table_name          IN VARCHAR2,
                               path_geom_column         IN VARCHAR2,
                               path_link_table_name     IN VARCHAR2,
                               is_complex               IN BOOLEAN DEFAULT FALSE,
                               storage_parameters       IN VARCHAR2 DEFAULT '');



  -- create a spatial (SDO_GEOMETRY) network
  PROCEDURE create_sdo_network(network IN VARCHAR2,
                               no_of_hierarchy_levels   IN NUMBER,
                               is_directed              IN BOOLEAN,
                               node_with_cost           IN BOOLEAN DEFAULT FALSE,
                               is_complex               IN BOOLEAN DEFAULT FALSE,
                               storage_parameters       IN VARCHAR2 DEFAULT '');


  -- create a spatial (LRS_GEOMETRY) network
  PROCEDURE create_lrs_network(network                  IN VARCHAR2,
                               no_of_hierarchy_levels   IN NUMBER,
                               is_directed              IN BOOLEAN,
                               node_table_name          IN VARCHAR2,
                               node_cost_column         IN VARCHAR2,
                               link_table_name          IN VARCHAR2,
                               link_cost_column         IN VARCHAR2,
                               lrs_table_name           IN VARCHAR2,
                               lrs_geom_column          IN VARCHAR2,
                               path_table_name          IN VARCHAR2,
                               path_geom_column         IN VARCHAR2,
                               path_link_table_name     IN VARCHAR2,
                               subpath_table_name       IN VARCHAR2,
                               subpath_geom_column      IN VARCHAR2,
                               is_complex               IN BOOLEAN DEFAULT FALSE,
                               storage_parameters       IN VARCHAR2 DEFAULT '');
  -- create a spatial (LRS_GEOMETRY) network
  PROCEDURE create_lrs_network(network                  IN VARCHAR2,
                               no_of_hierarchy_levels   IN NUMBER,
                               is_directed              IN BOOLEAN,
                               node_table_name          IN VARCHAR2,
                               node_cost_column         IN VARCHAR2,
                               link_table_name          IN VARCHAR2,
                               link_cost_column         IN VARCHAR2,
                               lrs_table_name           IN VARCHAR2,
                               lrs_geom_column          IN VARCHAR2,
                               path_table_name          IN VARCHAR2,
                               path_geom_column         IN VARCHAR2,
                               path_link_table_name     IN VARCHAR2,
                               is_complex               IN BOOLEAN DEFAULT FALSE,
                               storage_parameters       IN VARCHAR2 DEFAULT '');


  -- create a spatial (LRS_GEOMETRY) network
  PROCEDURE create_lrs_network(network                  IN VARCHAR2,
                               lrs_table_name           IN VARCHAR2,
                               lrs_geom_column          IN VARCHAR2,
                               no_of_hierarchy_levels   IN NUMBER,
                               is_directed              IN BOOLEAN,
                               node_with_cost           IN BOOLEAN DEFAULT FALSE,
                               is_complex               IN BOOLEAN DEFAULT FALSE,
                               storage_parameters       IN VARCHAR2 DEFAULT '');



  PROCEDURE create_topo_network(network IN VARCHAR2,
                                no_of_hierarchy_levels IN NUMBER,
                                is_directed             IN BOOLEAN,
                                node_table_name         IN VARCHAR2,
                                node_geom_column        IN VARCHAR2,
                                node_cost_column        IN VARCHAR2,
                                link_table_name         IN VARCHAR2,
                                link_geom_column        IN VARCHAR2,
                                link_cost_column        IN VARCHAR2,
                                path_table_name         IN VARCHAR2,
                                path_geom_column        IN VARCHAR2,
                                path_link_table_name    IN VARCHAR2,
                                subpath_table_name      IN VARCHAR2,
                                subpath_geom_column     IN VARCHAR2,
                                is_complex              IN BOOLEAN DEFAULT FALSE,
                                storage_parameters      IN VARCHAR2 DEFAULT '');

  -- create a spatial (TOPO_GEOMETRY) network
  PROCEDURE create_topo_network(network IN VARCHAR2,
                                no_of_hierarchy_levels IN NUMBER,
                                is_directed             IN BOOLEAN,
                                node_table_name         IN VARCHAR2,
                                node_geom_column        IN VARCHAR2,
                                node_cost_column        IN VARCHAR2,
                                link_table_name         IN VARCHAR2,
                                link_geom_column        IN VARCHAR2,
                                link_cost_column        IN VARCHAR2,
                                path_table_name         IN VARCHAR2,
                                path_geom_column        IN VARCHAR2,
                                path_link_table_name    IN VARCHAR2,
                                is_complex              IN BOOLEAN DEFAULT FALSE,
                                storage_parameters      IN VARCHAR2 DEFAULT '');


  -- create a spatial (TOPO_GEOMETRY) network
  PROCEDURE create_topo_network(network IN VARCHAR2,
                                no_of_hierarchy_levels  IN NUMBER,
                                is_directed             IN BOOLEAN,
                                node_table_name         IN VARCHAR2,
                                node_cost_column        IN VARCHAR2,
                                link_table_name         IN VARCHAR2,
                                link_cost_column        IN VARCHAR2,
                                path_table_name         IN VARCHAR2,
                                path_geom_column        IN VARCHAR2,
                                path_link_table_name    IN VARCHAR2,
                                is_complex              IN BOOLEAN DEFAULT FALSE,
                                storage_parameters      IN VARCHAR2 DEFAULT '');



  -- create a spatial (TOPO_GEOMETRY) network
  PROCEDURE create_topo_network(network                 IN VARCHAR2,
                                no_of_hierarchy_levels  IN NUMBER,
                                is_directed             IN BOOLEAN,
                                node_with_cost          IN BOOLEAN DEFAULT FALSE,
                                is_complex              IN BOOLEAN DEFAULT FALSE,
                                storage_parameters      IN VARCHAR2 DEFAULT '');



  -- create a spatial (TOPO_GEOMETRY) network from existing topology data
  -- The nodes and links in the resultant network have one-to-one mapping
  -- to the nodes and edges in the given topology
  PROCEDURE create_topo_network(network                  in varchar2,
                                no_of_hierarchy_levels   in number,
                                is_directed              in boolean,
                                node_with_cost           in boolean,
                                is_complex               in boolean,
                                topology                 in varchar2,
                                storage_parameters       in varchar2 );

  -----------------
  -- @deprecated --
  -----------------
  PROCEDURE create_network(network                      IN VARCHAR2,
                           geom_type                    IN VARCHAR2,
                           no_of_hierarchy_levels       IN NUMBER,
                           is_directed                  IN BOOLEAN,
                           node_table_name              IN VARCHAR2,
                           node_geom_column             IN VARCHAR2,
                           node_cost_column             IN VARCHAR2,
                           link_table_name              IN VARCHAR2,
                           link_geom_column             IN VARCHAR2,
                           link_cost_column             IN VARCHAR2,
                           lrs_table_name               IN VARCHAR2,
                           lrs_geom_column              IN VARCHAR2,
                           path_table_name              IN VARCHAR2,
                           path_geom_column             IN VARCHAR2,
                           path_link_table_name         IN VARCHAR2,
                           subpath_table_name           IN VARCHAR2,
                           subpath_geom_column          IN VARCHAR2,
                           is_complex                   IN BOOLEAN DEFAULT FALSE,
                           storage_parameters           IN VARCHAR2 DEFAULT '');

  -----------------
  -- @deprecated --
  -----------------
  -- create a general network creation
  PROCEDURE create_network(network                      IN VARCHAR2,
                           geom_type                    IN VARCHAR2,
                           no_of_hierarchy_levels       IN NUMBER,
                           is_directed                  IN BOOLEAN,
                           node_table_name              IN VARCHAR2,
                           node_geom_column             IN VARCHAR2,
                           node_cost_column             IN VARCHAR2,
                           link_table_name              IN VARCHAR2,
                           link_geom_column             IN VARCHAR2,
                           link_cost_column             IN VARCHAR2,
                           lrs_table_name               IN VARCHAR2,
                           lrs_geom_column              IN VARCHAR2,
                           path_table_name              IN VARCHAR2,
                           path_geom_column             IN VARCHAR2,
                           path_link_table_name         IN VARCHAR2,
                           is_complex                   IN BOOLEAN DEFAULT FALSE,
                           storage_parameters           IN VARCHAR2 DEFAULT '');


  -----------------
  -- @deprecated --
  -----------------
  -- create a general network creation
  PROCEDURE create_network(network                      IN VARCHAR2,
                           geom_type                    IN VARCHAR2,
                           no_of_hierarchy_levels       IN NUMBER,
                           is_directed                  IN BOOLEAN,
                           node_with_cost               IN BOOLEAN,
                           lrs_table_name               IN VARCHAR2,
                           lrs_geom_column              IN VARCHAR2,
                           is_complex                   IN BOOLEAN DEFAULT FALSE,
                           storage_parameters           IN VARCHAR2 DEFAULT '');


  -- validate a network
  FUNCTION validate_network(network IN VARCHAR2, check_data IN VARCHAR2 default 'FALSE')
    RETURN VARCHAR2;

  -- validate the table consistency of a network
  FUNCTION validate_consistency(network IN VARCHAR2, is_fast IN VARCHAR2 default 'TRUE')
    RETURN VARCHAR2;

  -- create an empty  node table with necessary columns
  PROCEDURE create_node_table(table_name                in varchar2,
                              geom_type                 in varchar2,
                              geom_column               in varchar2,
                              cost_column               in varchar2,
                              partition_column          in varchar2,
                              no_of_hierarchy_levels    in number,
                              is_complex                in boolean default false,
                              storage_parameters        in varchar2 default '');


  -- create an empty  node table with necessary columns
  PROCEDURE create_node_table(table_name                in varchar2,
                              geom_type                 in varchar2,
                              geom_column               in varchar2,
                              cost_column               in varchar2,
                              no_of_hierarchy_levels    in number,
                              is_complex                in boolean default false,
                              storage_parameters        in varchar2 default '');



  -- create an empty link table with necessary columns
  PROCEDURE create_link_table(table_name                in varchar2,
                              geom_type                 in varchar2,
                              geom_column               in varchar2,
                              cost_column               in varchar2,
                              no_of_hierarchy_levels    in number,
                              add_bidirected_column     in boolean default false,
                              storage_parameters        in varchar2 default '');

  -- create an empty compact path table with necessary columns
  PROCEDURE create_path_table(table_name in varchar2,  geom_column in varchar2,
                              storage_parameters   IN VARCHAR2 DEFAULT '');
  -- create an empty compact subpath table with necessary columns
  PROCEDURE create_subpath_table(table_name in varchar2,  geom_column in varchar2,
                              storage_parameters   IN VARCHAR2 DEFAULT '');

  -- create an empty compact path table with necessary columns
  PROCEDURE create_path_link_table(table_name in varchar2,
                                   storage_parameters   IN VARCHAR2 DEFAULT '');

  -- create an empty lrs geom table with necessary columns
  PROCEDURE create_lrs_table(table_name in varchar2,  geom_column in varchar2,
                              storage_parameters   IN VARCHAR2 DEFAULT '');

  -- create an empty partition table with necessary columns
  PROCEDURE create_partition_table(table_name in varchar2);

  -- create an empty partition blob table with necessary schema
  PROCEDURE create_partition_blob_table(table_name in varchar2);

  -- create an empty component table with necessary schema
  PROCEDURE create_component_table(table_name in varchar2);

  -- validate a node schema
  FUNCTION validate_node_schema(network IN VARCHAR2)
    RETURN VARCHAR2;

  -- validate a link schema
  FUNCTION validate_link_schema(network IN VARCHAR2)
    RETURN VARCHAR2;

  -- validate a path schema
  FUNCTION validate_path_schema(network IN VARCHAR2)
    RETURN VARCHAR2;

  -- validate a subpath schema
  FUNCTION validate_subpath_schema(network IN VARCHAR2)
    RETURN VARCHAR2;

  -- validate an lrs geom schema
  FUNCTION validate_lrs_schema(network IN VARCHAR2)
    RETURN VARCHAR2;

  -- validate a partition table schema
  FUNCTION validate_partition_schema(network IN VARCHAR2)
    RETURN VARCHAR2;

  -- validate necessary partition blob table schema and blob content
  FUNCTION validate_partition_blob_schema(network IN VARCHAR2)
    RETURN VARCHAR2;

  -- validate necessary connected component schema
  FUNCTION validate_component_schema(network IN VARCHAR2)
    RETURN VARCHAR2;

  --
  -- drop a network
  -- it drops :
  -- node table, link table, and path table
  -- network metadata
  --

  PROCEDURE drop_network(network        in varchar2);

  --
  -- create a point geometry from an LRS geometry and a measure
  --
  FUNCTION get_lrs_node_geometry(network        in VARCHAR2,
                                 node_id        in number)
        RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

  --
  -- create a point geometry from a topology
  --
  FUNCTION get_topo_node_geometry(network       in VARCHAR2,
                                  node_id       in number)
        RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


  --
  -- get the node geometry
  --
  FUNCTION get_node_geometry(network    in VARCHAR2,
                             node_id    in number)
        RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


  --
  -- create linestring geometry from an LRS geometry and start/end measure
  --
  FUNCTION get_lrs_link_geometry(network        in VARCHAR2,
                                 link_id        in number)

        RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

  --
  -- create linestring geometry from a topo geometry
  --
  FUNCTION get_topo_link_geometry(network       in VARCHAR2,
                                  link_id       in number)

        RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;


  --
  -- get the link geometry
  --
  FUNCTION get_link_geometry(network    in VARCHAR2,
                             link_id    in number,
                             start_percentage IN NUMBER default 0,
                             end_percentage   IN NUMBER default 1.0)

        RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;



  --
  -- network type queries
  --
  FUNCTION is_spatial(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(is_spatial,WNDS,WNPS,RNPS);

  FUNCTION is_logical(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(is_logical,WNDS,WNPS,RNPS);

  FUNCTION is_hierarchical(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(is_hierarchical,WNDS,WNPS,RNPS);

  -----------------
  -- @deprecated --
  -----------------
  -- a simple network does not refer nodes/links in another networks
  -- a complex network has the network_type anything other than  'COMPLEX'
  -- before 10GR1, all networks are simple networks
  FUNCTION is_simple(network IN VARCHAR2)
    RETURN VARCHAR2;

  -----------------
  -- @deprecated --
  -----------------
  -- a complex network can refer nodes/links in another networks
  -- a complex network has the network_type = 'COMPLEX'
  -- after 10GR2, a network can refer nodes/links in other networks (network_id, and element_id)
  FUNCTION is_complex(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(is_complex,WNDS,WNPS,RNPS);

  FUNCTION is_simple(network IN VARCHAR2,path_id in number)
    RETURN VARCHAR2;

  FUNCTION is_link_in_path(network IN VARCHAR2,path_id in number, link_id in number)
    RETURN VARCHAR2;

  FUNCTION is_node_in_path(network IN VARCHAR2,path_id in number,node_id in number)
    RETURN VARCHAR2;


  FUNCTION sdo_geometry_network(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(sdo_geometry_network,WNDS,WNPS,RNPS);

  FUNCTION lrs_geometry_network(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(lrs_geometry_network,WNDS,WNPS,RNPS);

  FUNCTION topo_geometry_network(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(topo_geometry_network,WNDS,WNPS,RNPS);



  --
  -- copy network structure
  --

 PROCEDURE copy_network(source_network  in varchar2,
                        target_network  in varchar2,
                        storage_parameters in varchar2 default '');


  --
  -- create delete trigger on node/link table
  --

 PROCEDURE create_delete_trigger(network in varchar2);


  -- return the hierarchy_level of a node
  FUNCTION get_node_hierarchy_level(network IN VARCHAR2, node_id in number)
    RETURN NUMBER;


  --
  -- add referential constraints
  --

  PROCEDURE create_ref_constraints(network IN VARCHAR2);

  --
  -- drop referential constraints
  --

  PROCEDURE drop_ref_constraints(network IN VARCHAR2);

  --
  -- enable referential constraints
  --

  PROCEDURE enable_ref_constraints(network IN VARCHAR2);


  --
  -- disable referential constraints
  --

  PROCEDURE disable_ref_constraints(network IN VARCHAR2);



  --
  -- add an geometry metadata entry
  --

  PROCEDURE insert_geom_metadata(geom_table_name       IN VARCHAR2,
                                 geom_column_name      IN VARCHAR2,
                                 diminfo               IN MDSYS.SDO_DIM_ARRAY,
                                 srid                  IN NUMBER);
  --PRAGMA RESTRICT_REFERENCES(insert_geom_metadata,WNPS,RNPS);


  --
  -- add geometry metadata entries for a spatial network
  --

  PROCEDURE insert_geom_metadata(network               IN VARCHAR2,
                                 diminfo               IN MDSYS.SDO_DIM_ARRAY,
                                 srid                  IN NUMBER);
  --PRAGMA RESTRICT_REFERENCES(insert_geom_metadata,WNPS,RNPS);



  --
  -- return the ids of isolated nodes
  --

  FUNCTION get_isolated_nodes(network IN VARCHAR2)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC ;

  --
  -- return the ids of invalid nodes
  --

  FUNCTION get_invalid_nodes(network IN VARCHAR2)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC ;


  --
  -- return the ids of invalid links
  --

  FUNCTION get_invalid_links(network IN VARCHAR2)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC ;

  --
  -- return the ids of invalid paths
  --

  FUNCTION get_invalid_paths(network IN VARCHAR2)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC ;


  -----------------
  -- @deprecated --
  -----------------
  --
  -- add path-link information to the path-link table
  -- the seq no is indicated by the order in the given link array
  --
  PROCEDURE insert_path_link_info(network               IN VARCHAR2,
                                  path_id               IN NUMBER,
                                  links                 IN SDO_NUMBER_ARRAY,
                                  is_simple             IN BOOLEAN DEFAULT TRUE) ;


  --
  -- delete a node from a network
  --
  --
  PROCEDURE delete_node(network         IN VARCHAR2,
                        node_id         IN NUMBER) ;

  --
  -- delete a link from a network
  --
  --
  PROCEDURE delete_link(network         IN VARCHAR2,
                        link_id         IN NUMBER) ;


  --
  -- delete a path from a network
  --
  --
  PROCEDURE delete_path(network         IN VARCHAR2,
                        path_id         IN NUMBER) ;


  --
  -- delete a subpath from a network
  --
  --
  PROCEDURE delete_subpath(network      IN VARCHAR2,
                           subpath_id   IN NUMBER) ;

  -----------------
  -- @deprecated --
  -----------------
  --
  -- change a spatial network into a logical network (Metadata Level)
  --
  --
  PROCEDURE switch_to_logical_network(network   IN VARCHAR2);
  PRAGMA RESTRICT_REFERENCES(switch_to_logical_network,WNPS,RNPS);

  -----------------
  -- @deprecated --
  -----------------
  --
  -- change a logical network into a spatial network (Metadata Level)
  --
  --
  PROCEDURE switch_to_spatial_network(network       IN VARCHAR2,
                                      node_geom_col IN VARCHAR2,
                                      link_geom_col IN VARCHAR2,
                                      path_geom_col IN VARCHAR2,
                                      subpath_geom_col IN VARCHAR2);


  -----------------------------------------------------
  -- @deprecated: use network metadata views instead --
  -----------------------------------------------------
  -- return the topology of a topology network
  FUNCTION get_topology(network IN VARCHAR2)
    RETURN VARCHAR2;
  PRAGMA RESTRICT_REFERENCES(get_topology,WNDS,WNPS,RNPS);

  -- compute the geometry of a path from its constituent link geometries
  FUNCTION compute_path_geometry(network IN VARCHAR2,
                                 path_id IN NUMBER,
                                 tolerance IN NUMBER)
    RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

  -- Partition the nodes in the network and write the result into the
  -- partition table.
  PROCEDURE spatial_partition(network IN VARCHAR2,
                              partition_table_name IN VARCHAR2,
                              max_num_nodes IN NUMBER,
                              log_loc   IN VARCHAR2,
                              log_file  IN VARCHAR2,
                              open_mode IN VARCHAR2 DEFAULT 'a',
                              link_level IN INTEGER DEFAULT 1);

  -- Generate or regenerate blobs for all the partitions.
  -- @param regenerate_node_levels whether to overwrite existing node level table.
  --                               Set to true if there are nodes added/deleted to/from second or higher
  --                               link levels, since the last time blobs were generated.
  PROCEDURE generate_partition_blobs(
                              network                   IN VARCHAR2,
                              link_level                IN NUMBER DEFAULT 1,
                              partition_blob_table_name IN VARCHAR2,
                              include_user_data         IN BOOLEAN,
                              commit_for_each_blob      IN BOOLEAN DEFAULT true,
                              log_loc   IN VARCHAR2,
                              log_file  IN VARCHAR2,
                              open_mode IN VARCHAR2 DEFAULT 'a',
                              perform_delta_update IN BOOLEAN DEFAULT false,
                              regenerate_node_levels IN BOOLEAN DEFAULT false);

  -- generate or regenerate the blob for the specified partition
  -- into the partition blob table
  -- assumption: partition blob table already exists
  PROCEDURE generate_partition_blob(
                              network           IN VARCHAR2,
                              link_level        IN NUMBER DEFAULT 1,
                              partition_id      IN NUMBER,
                              include_user_data IN BOOLEAN,
                              log_loc   IN VARCHAR2,
                              log_file  IN VARCHAR2,
                              open_mode IN VARCHAR2 DEFAULT 'a',
                              perform_delta_update IN BOOLEAN DEFAULT false);

  -- Find connected components for the network on the specified link level,
  -- and store node_id component_id relation into the component table.
  PROCEDURE find_connected_components(
                              network              IN VARCHAR2,
                              link_level           IN NUMBER DEFAULT 1,
                              component_table_name IN VARCHAR2,
                              log_loc   IN VARCHAR2,
                              log_file  IN VARCHAR2,
                              open_mode IN VARCHAR2 DEFAULT 'a');

  -- Sets the maximum java heap size for the java stored procedure.
  PROCEDURE set_max_java_heap_size(bytes NUMBER);

  -- Sets the logging level for both the plsql subprograms and
  -- the java stored procedure.
  PROCEDURE set_logging_level( level     IN NUMBER );

  -- Returns the logging level
  FUNCTION get_logging_level RETURN NUMBER;

  -- Loads the configuration xml for the java stored procedure.
  PROCEDURE load_config( file_directory  IN VARCHAR2 ,
                         file_name       IN VARCHAR2 );

  -- return the partition size in bytes
  FUNCTION get_partition_size(network IN VARCHAR2,
                              partition_id IN NUMBER,
                              link_level IN NUMBER DEFAULT 1,
                              include_user_data IN VARCHAR2 DEFAULT 'FALSE',
                              include_spatial_data IN VARCHAR2 DEFAULT 'FALSE')
  RETURN NUMBER;

  --- register given network constraint into user_sdo_network_constraints
  PROCEDURE register_constraint(
    constraint_name VARCHAR2, class_name  VARCHAR2,
    directory_name VARCHAR2,  description VARCHAR2);

  --- deregister given constraint from user_sdo_network_constraints
  PROCEDURE deregister_constraint(
    constraint_name  VARCHAR2);

  -- clear the content of the given network's related history tables
  PROCEDURE db_sync_clear(network IN VARCHAR2);

  -- disable database synchronization option for the given network
  PROCEDURE db_sync_disable(network IN VARCHAR2);

  -- enable database synchronization option for the given network
  PROCEDURE db_sync_enable(network IN VARCHAR2, base_node_table IN VARCHAR2 default NULL,
    base_link_table IN VARCHAR2 default NULL);

  -- for the given network and link level, get updates between the given
  -- timestamp and the current largest timestamp recorded
  FUNCTION db_sync_get_update(network IN VARCHAR2, last_get_time  IN TIMESTAMP,
    node_change_history OUT SDO_NET_UPD_HIST_NTBL,
    link_change_history OUT SDO_NET_UPD_HIST_TBL)
    RETURN TIMESTAMP;

  -- the variant using the cursor to facilitate the calls made by JDBC
  FUNCTION db_sync_get_update(network IN VARCHAR2, last_get_time  IN TIMESTAMP,
    node_change_history OUT ref_cursor,
    link_change_history OUT ref_cursor)
    RETURN TIMESTAMP;

  --- register given java object into user_sdo_network_java_objects
  PROCEDURE register_java_object(
    name VARCHAR2, class_name  VARCHAR2,
    directory_name VARCHAR2,  description VARCHAR2, java_interface VARCHAR2);

  --- deregister given java object  from user_sdo_network_java_objects
  PROCEDURE deregister_java_object(
    name  VARCHAR2);
  --- validate lod partition information
  FUNCTION validate_partition_info(network IN VARCHAR2,check_data IN VARCHAR2 default 'FALSE')
    RETURN VARCHAR2;

  -- return the percentage of the given pt geometry from the start of the linestring geometry
  -- if the pt geometry is not on the link geometry, the nearest pt on the link geometry is used
  -- percentage is between [0,1]
  FUNCTION get_percentage(network IN VARCHAR2, link_id IN NUMBER, pt_geom IN mdsys.sdo_geometry)
    RETURN NUMBER;


  -- return the pt geometry on the givne link geometry based on the given percentage
  -- if the pt geometry is not on the link geometry, the nearest pt on the link geometry is used
  -- valid percentage is between [0,1]
  FUNCTION get_pt(network IN VARCHAR2, link_id IN NUMBER, percentage IN NUMBER)
        RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

  -- return the geometry on the givne link geometry based on the given percentages
  -- valid percentage is between [0,1]
  FUNCTION get_geometry(network IN VARCHAR2, link_id IN NUMBER, start_percentage IN NUMBER, end_percentage IN NUMBER)
        RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

  -- Generates node levels for the specified multi-level network.
  -- If the the input network is single level, do nothing.
  -- @param overwrite: whether to overwrite existing node level table or not
  PROCEDURE generate_node_levels(
    network   in varchar2,
    node_level_table_name in varchar2,
    overwrite in boolean default false,
    log_loc   IN VARCHAR2,
    log_file  IN VARCHAR2,
    open_mode IN VARCHAR2 DEFAULT 'a');

  -- Make sure the data in the newwork tables are consistent.
  PROCEDURE update_consistency(network in VARCHAR2);

  -- create the logical network partitions on node table
  PROCEDURE logical_partition(network IN VARCHAR2,
                              partition_table_name IN VARCHAR2,
                              max_num_nodes IN NUMBER,
                              log_loc   IN VARCHAR2,
                              log_file  IN VARCHAR2,
                              open_mode IN VARCHAR2 DEFAULT 'a',
                              link_level IN INTEGER DEFAULT 1);

  -- Create logical network partitions on node table
  -- with focus on minimizing partition degree
  PROCEDURE logical_partition(network IN VARCHAR2,
                              partition_table_name IN VARCHAR2,
                              max_num_nodes IN NUMBER,
                              log_loc   IN VARCHAR2,
                              log_file  IN VARCHAR2,
                              open_mode IN VARCHAR2 DEFAULT 'a',
                              link_level IN INTEGER DEFAULT 1,
                              part_size_tolerance IN NUMBER);

  PROCEDURE logical_powerlaw_partition(network IN VARCHAR2,
                              partition_table_name IN VARCHAR2,
                              max_num_nodes  IN NUMBER,
                              log_loc   IN VARCHAR2,
                              log_file  IN VARCHAR2,
                              open_mode IN VARCHAR2 default 'a',
                              link_level IN INTEGER default 1,
                              part_size_tolerance IN NUMBER default 0);


  -- Returns the ordinate of a point geometry given the ordinate index
  -- the point geometry can be a 2d standard geometry or an LRS geometry

  FUNCTION get_pt_geom_ord(geometry IN MDSYS.SDO_GEOMETRY, idx IN INTEGER)
    RETURN NUMBER;


  ----------------------------
  -- BEGIN Feature Modeling --
  ----------------------------

  FUNCTION GET_FEATURE_LAYER_ID(
    network_name          IN VARCHAR2,
    feature_layer_name    IN VARCHAR2)
  RETURN NUMBER;

  -- Adds a feature layer.
  -- A feature layer ID will be automatically generated
  -- for the feature layer.
  PROCEDURE ADD_FEATURE_LAYER(
    network_name          IN VARCHAR2,
    feature_layer_name    IN VARCHAR2,
    feature_layer_type    IN NUMBER,
    feature_table         IN VARCHAR2,
    relation_table        IN VARCHAR2,
    hierarchy_table       IN VARCHAR2);

  -- Drops a feature layer.
  -- @param drop_tables   If set to false, then only the feature
  --                      layer metadata will be deleted. All the
  --                      relevant tables will remain untouched.
  --                      If set to true, then all relevant tables,
  --                      including feature table, relation table
  --                      and hierarchy table, will be dropped.
  PROCEDURE DROP_FEATURE_LAYER(
    network_name          IN VARCHAR2,
    feature_layer_name    IN VARCHAR2,
    drop_tables           IN BOOLEAN DEFAULT FALSE);

  -- Adds a feature to the input feature layer.
  PROCEDURE ADD_FEATURE(
    feature_layer_id      IN NUMBER,
    feature_id            IN NUMBER,
    feature_elements      IN SDO_NET_FEAT_ELEM_ARRAY DEFAULT NULL,
    child_feature_ids     IN SDO_NET_LAYER_FEAT_ARRAY DEFAULT NULL,
    check_integrity       IN BOOLEAN DEFAULT TRUE);

  -- Adds a feature element to the input feature.
  -- The input feature element will be appended to the end of the
  -- existing feature elements in the feature.
  PROCEDURE ADD_FEATURE_ELEMENT(
    feature_layer_id      IN NUMBER,
    feature_id            IN NUMBER,
    feature_element       IN SDO_NET_FEAT_ELEM,
    sequence_number       IN NUMBER DEFAULT NULL,
    check_integrity       IN BOOLEAN DEFAULT TRUE);

  -- Adds an array of feature elements to a feature.
  -- The input feature elements will be appended to the end of the
  -- existing feature elements in the feature.
  PROCEDURE ADD_FEATURE_ELEMENTS(
    feature_layer_id      IN NUMBER,
    feature_id            IN NUMBER,
    feature_elements      IN SDO_NET_FEAT_ELEM_ARRAY,
    check_integrity       IN BOOLEAN DEFAULT TRUE);

  -- Adds a child feature. This precedure assumes that the child feature
  -- already exists.
  PROCEDURE ADD_CHILD_FEATURE(
    parent_layer_id       IN NUMBER,
    parent_feature_id     IN NUMBER,
    child_layer_id        IN NUMBER,
    child_feature_id      IN NUMBER,
    sequence_number       IN NUMBER DEFAULT NULL,
    check_integrity       IN BOOLEAN DEFAULT TRUE);

  -- Adds child features. This procedure assumes that the child features
  -- already exist.
  PROCEDURE ADD_CHILD_FEATURES(
    parent_layer_id       IN NUMBER,
    parent_feature_id     IN NUMBER,
    child_feature_ids     IN SDO_NET_LAYER_FEAT_ARRAY,
    check_integrity       IN BOOLEAN DEFAULT TRUE);

  -- Deletes the input feature elements from the feature.
  PROCEDURE DELETE_FEATURE_ELEMENTS(
    feature_layer_id      IN NUMBER,
    feature_id            IN NUMBER,
    feature_elements      IN SDO_NET_FEAT_ELEM_ARRAY,
    delete_net_elems      IN BOOLEAN DEFAULT FALSE);

  -- Deletes the feature elements at the given sequence numbers.
  PROCEDURE DELETE_FEATURE_ELEMENTS_AT(
    feature_layer_id      IN NUMBER,
    feature_id            IN NUMBER,
    sequence_numbers      IN SDO_NUMBER_ARRAY,
    delete_net_elems      IN BOOLEAN DEFAULT FALSE);

  -- Remove the parent-child relationship for the input child features.
  PROCEDURE DELETE_CHILD_FEATURES(
    parent_layer_id       IN NUMBER,
    parent_feature_id     IN NUMBER,
    child_feature_ids     IN SDO_NET_LAYER_FEAT_ARRAY);

  -- Remove the parent-child relationship for the child features
  -- at the given sequence numbers.
  PROCEDURE DELETE_CHILD_FEATURES_AT(
    parent_layer_id      IN NUMBER,
    parent_id            IN NUMBER,
    sequence_numbers     IN SDO_NUMBER_ARRAY);

  -- Deletes the features with the given feature IDs.
  -- If delete_net_elems is set to true, then all network elements
  -- that are referenced only by the input features are also deleted.
  -- If delete_children is set to true, then all child features
  -- that are referenced only by the input features are also deleted.
  PROCEDURE DELETE_FEATURES(
    feature_layer_id          IN NUMBER,
    feature_ids               IN SDO_NUMBER_ARRAY,
    delete_net_elems          IN BOOLEAN DEFAULT FALSE,
    delete_children           IN BOOLEAN DEFAULT FALSE);

  -- Deletes the dangling features in the given feature layer.
  -- A dangling feature is a feature ths is not associated with any
  -- network elements.
  PROCEDURE DELETE_DANGLING_FEATURES(
    feature_layer_id      IN NUMBER);

  -- Returns the IDs of the dangling features.
  -- A dangling feature is a feature ths is not associated with any
  -- network elements.
  FUNCTION GET_DANGLING_FEATURES(
    feature_layer_id      IN NUMBER)
  RETURN SDO_NUMBER_ARRAY;

  -- Deletes the phantom features in the given feature layer.
  -- A phantom feature is a feature that references nonexistent
  -- network elements.
  PROCEDURE DELETE_PHANTOM_FEATURES(
    feature_layer_id      IN NUMBER);

  -- Returns the IDs of the phantom features.
  -- A phantom feature is a feature that references nonexistent
  -- network elements.
  FUNCTION GET_PHANTOM_FEATURES(
    feature_layer_id      IN NUMBER)
  RETURN SDO_NUMBER_ARRAY;

  -- Returns the nodes that are not referenced by
  -- any feature in any feature layer.
  FUNCTION GET_DANGLING_NODES(
    network               IN VARCHAR2)
  RETURN SDO_NUMBER_ARRAY;

  -- Returns the links that are not referenced by
  -- any feature in any feature layer.
  FUNCTION GET_DANGLING_LINKS(
    network               IN VARCHAR2)
  RETURN SDO_NUMBER_ARRAY;

  -- Deletes the network nodes that are not referenced by
  -- any feature in any feature layer.
  PROCEDURE DELETE_DANGLING_NODES(
    network               IN VARCHAR2);

  -- Deletes the network links that are not referenced by
  -- any feature in any feature layer.
  PROCEDURE DELETE_DANGLING_LINKS(
    network               IN VARCHAR2);

  -- Returns the IDs of the features that references the given nodes.
  FUNCTION GET_FEATURES_ON_NODES(
    feature_layer_id      IN NUMBER,
    node_ids              IN SDO_NUMBER_ARRAY)
  RETURN SDO_NUMBER_ARRAY;

  -- Returns the IDs of the features that references the given links.
  FUNCTION GET_FEATURES_ON_LINKS(
    feature_layer_id      IN NUMBER,
    link_ids              IN SDO_NUMBER_ARRAY)
  RETURN SDO_NUMBER_ARRAY;

  -- Returns the feature layer ID and feature ID of the child features.
  FUNCTION GET_CHILD_FEATURE_IDS(
    feature_layer_id      IN NUMBER,
    feature_id            IN NUMBER
  )
  RETURN SDO_NET_LAYER_FEAT_ARRAY;

  -- Returns the feature layer ID and feature ID of the parent features.
  FUNCTION GET_PARENT_FEATURE_IDS(
    feature_layer_id      IN NUMBER,
    feature_id            IN NUMBER
  )
  RETURN SDO_NET_LAYER_FEAT_ARRAY;

  -- Updates the feature elements, child features and/or feature
  -- user data.
  -- @param feature_elements  new feature elements. If null, then the existing
  --                          feature elements are left unchanged. If empty, then
  --                          the existing feature elements are removed.
  -- @param child_features    new child features. If null, then the existing
  --                          child features are left unchanged. If empty, then
  --                          relationship with the existing child features are removed.
  PROCEDURE UPDATE_FEATURE(
    feature_layer_id      IN NUMBER,
    feature_id            IN NUMBER,
    feature_elements      IN SDO_NET_FEAT_ELEM_ARRAY DEFAULT NULL,
    child_feature_ids     IN SDO_NET_LAYER_FEAT_ARRAY DEFAULT NULL,
    check_integrity       IN BOOLEAN DEFAULT TRUE);

  -- Updates the feature element at the given sequence number.
  PROCEDURE UPDATE_FEATURE_ELEMENT(
    feature_layer_id      IN NUMBER,
    feature_id            IN NUMBER,
    sequence_number       IN NUMBER,
    feature_element       IN SDO_NET_FEAT_ELEM,
    check_integrity       IN BOOLEAN DEFAULT TRUE);

  -- Returns the feature elements in the given feature.
  FUNCTION GET_FEATURE_ELEMENTS(
    feature_layer_id      IN NUMBER,
    feature_id            IN NUMBER)
  RETURN SDO_NET_FEAT_ELEM_ARRAY;

  ----------------------------
  -- END Feature Modeling --
  ----------------------------

  -- Create and/or populate link table in parent network based on
  -- the content of the hierarchy table
  PROCEDURE GENERATE_PARENT_LINK_TABLE(
    parent_network   IN VARCHAR2,
    cost_function    IN VARCHAR2);

  -- Find the child link IDs on the given link level of the child network
  FUNCTION GET_LINKS_IN_CHILD_NETWORK(
    network           IN VARCHAR2,
    link_id           IN NUMBER)
  RETURN SDO_NUMBER_ARRAY;

  -- Find the child node IDs on the given link level of the child network
  FUNCTION GET_NODES_IN_CHILD_NETWORK(
    network           IN VARCHAR2,
    node_id           IN NUMBER)
  RETURN SDO_NUMBER_ARRAY;

  -- Sends xml requests to the given URL, and returns the xml response.
  FUNCTION POST_XML(
    url       IN VARCHAR2,
    request   IN XMLTYPE)
  RETURN XMLTYPE;

  -- Checks if the network (spatial network) is geodetic('TRUE'), 'FALSE' otherwise
  -- Return NULL  if the network is logical

  FUNCTION is_geodetic(network IN VARCHAR2)
    RETURN VARCHAR2;


  -- This function checks whether the input link interval
  -- covers given point on the same link.
  -- It returns 'TRUE' if the point is covered by the link
  -- interval; 'FALSE' otherwise.
  FUNCTION is_covered_by_link_interval(
    query_percentage IN NUMBER,
    interval_start_percentage IN NUMBER,
    interval_end_percentage IN NUMBER)
  RETURN VARCHAR2;


  -- Returns the cost from (to) network buffer center to (from) the query point
  -- based on the start and end costs of the link interval defined on
  -- the same link as the query point.
  -- Returns null if not covered.
  FUNCTION get_buffer_cost(
    query_percentage IN NUMBER,
    interval_start_percentage IN NUMBER,
    interval_end_percentage IN NUMBER,
    interval_start_cost IN NUMBER,
    interval_end_cost IN NUMBER)
  RETURN NUMBER;

END sdo_net;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."MD_NET" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
23ff 76a
hFBi2VCTjBe/JRNj2vppfiw5ZDUwg82j2rceG47cOw81FxLJSemDO0v1ftXVNzlQGTJjG8Q0
Jpu1SVtQHb3I8F2QIfe7R6TZpZBbwdffIbUO6sqd+fz5+TooaztFjUT6uqipJuKNyueNk2Ba
7zDL6dWpWmlMlWSx8UyYniJre9NOLLOu+uf2HoJI2u0eeZynQ+VdX3GcmOOmPZ5A2o5xNXU9
Laq2UkbKxlle5UONXyjxbF23GORglSwgi/70sO7+QfFzkzdNDGCUH9nNGqmZedXpy1txQsAE
/QL38vXyiTKwEZOkCBNgBPq37D9rX4rlSLci3NvIzQIcPMuP78JRwZ57zsVj8YD4ArOrceRe
BOdSp3CjwWWdNS6yhQylG1+c3X9pJFPOS6m5nEmoweNjisCHDSoeIt5cb9EHkZ+iiPQkAKxV
jVOhVRM66Pp1BBe4MKPxboIh1Rgb2gTWTskmT3jxP468i8WozSlIabpZF7BW4IHiv9o5rx7i
OemZ5X3KxEKthuMUduhCdNtflUTbPgIM9eTVQPezofhk+j9LdHlEww4OEz7ulCUkqPn4Vhn/
U8WIi6aBD7iBNmDM4HSdpZW6202ZQpyd2ay/UxqM5lD4trgJcLlOQT5G2kpF9Swr3erGWG8R
fHQTyX2tb6HSJYWuIx+1r2c2hL0YQPV8WBAmhjWwEXBPB3jAuAMz7iEDnYLBlGkzHIuH38ON
oPzYjn+dmV20Gk4uaCBYLfs9cghecZTy3dbd/Dq0yBFg1rkPztz3Yu2g/gcW5lSJjozUF2dy
PitWcWgLcF0+IRDTDttVXItIPOFU/VQLNIacuSusUPi5YWWJmZ0SDKknTWlj3ye+RAtZNy1L
yStXp+0ui+F6xYIEAxVj8T/yq6jBCfDP0d7IwXU78jMt/9iT8wvfN1rMnkvuFmDbjUmQ59RT
BUUUyZXRDf1GY5ffDtLf5GaJx5VymA7Ah3hU7WUNmelhF7V0JXJSqTG7LBu0oqKrTpn2CuW7
+2oButGmjPV42WsFq9CkzQcTZRDl7LXn/sFh2J4K2SLC+FhWKV80dw3jeyj7NHDIUdZps/Fh
MfScoRPtTUE0Qgo1Eqh7Qk7Jl3V0Sb62lGBt5uuikrdYgQH8tpKep7Kv8hDCgZmSxlRTKTjI
yDyFSof/miv9Ym6/KGlLWrR0oNnCCwek3u+C4CSHyFiK0lNqLurpLSDCu2WDpEFhanIr9k9+
CtBiE5PELKC5RH1isoAkLe2PNDscIxiTmgGQliH/JYwi73PnRaw6YEuyT88xY4+W1KJ5gL60
oKe+4iMRXDijW+hyPhktB1O91yhg6CshED5EQUr77D0vmtsjLiTdWR5WHvAjBhGHWVVpHGtK
I4UVMODGQ1m6QZrblh+9xTK3FtJNLF0Gfgf+n2fSxRBCY+56BtvUi17w3/t8Et7A2DXyEAwD
VJ0JQDkYvl0J2iECpZjCO2OjTXETa7vco9l2koMcEjvXBeorAmbEXnZsXCTzt3qcM7QO45xz
/SMDZ/u8pJUAknmNcoQq6ckZ7fGjM53xyfIV0LAaOFEnz9eHAqLoJq7uVGSD0AtJsvhS1GuV
HU3uhhr6JL59Ii3GUO8E1AMBWNJ8T5Exm6NUcnGxSExzCL+L8ivnGXr/NSsvB2GpbbzgfN5s
nTX588Pmb7xnx7hHjX6wMGp/Y2tjs9r8x857A1VUw0xoG3qJABMfDpKHFEeLWRmozTcvMKwN
NBuFHkxdZDjYhwXiOP4jdd0PUUtH+BLwOaJKW9CNxlLYrGaUEgsKr0Ybr+/oHLaIOpNhW5jF
xGmM4JeDgORa6QIKbLAUbOgNzt8/1o2+pnOwrWMcwX9fwRhtDhn3ghTlXoP4ILXhWlOPaQ==

/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_NET_MEM" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
1d2 164
tL8K2LCe/Od1kGFV6UWEt3rtMJ8wg3n3AK5qfC9AWE7VSPbCokfwBOL6JrImzZcsZ5PYTcJp
Y+j35m2pD9CkPtvFMJvt/noch7tLfrguDsU4rd7Z42ymEdLo4g4hCdOxPBbxveXbIHpOVpEL
iMBk+vptggo4OqW7Udy7A+A/Nui2A6pdD6HDNrOIiE/pYHUbz7pOi28oMV/Q60a7aSBICMjX
zlcuMHwaFiZlJb8fI2qcUJDIEgr86vLqEi6eUzjV8ZPd+5R+92QuEfjzTy9XZat4bT8RKEmc
xLGvmpvQ0R8LymTB2S3HOpiYSzO3vuIsvHcIBWOw+eSnYhjKSdsKzk4YmCzlCyNs
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SEM_UPGRADE_TO_11" authid current_user AS
  PROCEDURE unload_all_into_staging_tables(downgrade BOOLEAN DEFAULT FALSE);
  PROCEDURE empty_app_tabs_drop_RDF_cols(downgrade BOOLEAN DEFAULT FALSE);

  PROCEDURE setup_for_loading_in_11;
  PROCEDURE create_all_models_in_11;
  PROCEDURE load_from_all_staging_tables;

  PROCEDURE save_10_2_RDF_network_for_11;
  PROCEDURE restore_10_2_RDF_network_in_11;
END sem_upgrade_to_11;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_SEM_DOWNGRADE" authid current_user as

  /**
   * This method will save all model data, rulebase data before an actual
   * database downgrade.
   */
  procedure prepare_downgrade_from_11;

END;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_RDF_MIG" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
102 d2
A6RgITWgzFg+fy0DHcZVPF9qA2swg/BKAJkVcHRGkHOUiJRucdqVFIMG+OmS1CoMLVfjDrUs
oEjgRCCtMMu54sqkCMqlBEg/LP8/7V+pKwVKN1lcCTIe6fv4bGezWRXo4RqsXHFCu38DNlTt
17ZgN9GvvY2jd805xbmsR6XqVRSXr+Ds+rA9ljRIIodLi5tyBw9M8VOTevsDZqIH
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_SEM_DOWNGRADE_UTL" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
237 168
1tGaGLSohcjH4gGo2y5/YOZEpXEwgztKr/IdNXRAAP4+wGisB7mH/omQ+rnLpBenWehhsMp+
CFFv2AYe2sUYrGPnQHbAzrWWmkbJ8B2vUiJ9UqpkTu5D7jMIyRkeTuukcKezk3xYWKwR3Nup
3i2mVM903duzyNdZcGBl9jseoy407GlxwSZzp2LqT9bzHx1UjlazYN4e8RrFolJz3AB5hdaZ
AURWgXXt3SeT7FnxrWcfjEl0zYgCiyieOM4Xvf1kat0RoWwn7SfFYe2eb40ha6i0yhPzvr7P
hgi5tv6B5YBPETH5RmVs9FmXMV4H9NPDTEEZmm42bvyYcJA68Li8XtgWtDMGlMWD8EY=
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_SAM" AUTHID current_user AS

----------------------------------------------------------------------
-- Name
--  Predicated_Join
--
-- Purpose
--   This routine allows partial predicate-based join of tables.
--   Useful in finding co-located items of different categories
--   from the same or different tables.
--
--  Syntax
--    Predicated_Join(table1, col1, table2, col2, pred1, pred2, dst_spec)
--    table1, col1, pred1: refer to first table, location column and
--                         associated predicate to filter rows from table1
--    table2, col2, pred2: refer to second table, location column and
--                         associated predicate to filter rows from table2
--    dst_spec: is of the form "distance=1 units=mile" (just as in
--              regular spatial query windows.
--
--  Usage
--    select a.state_abrv from states a,
--      table(sdo_sam.Predicated_Join('STATES', 'GEOM',
--        'STATES', 'GEOM',  'state_abrv=''NH''', null, null)) b
--          where a.rowid = b.rid2;


  FUNCTION Predicated_Join(table_name1 varchar2, column_name1 varchar2,
                           table_name2 varchar2, column_name2 varchar2,
                           tab1_predicate varchar2, tab2_predicate varchar2,
                           dst_spec in varchar2)
  RETURN MDSYS.SDO_ROWIDSET
  PIPELINED;

------------------------------------------------------------------------------
-- Name
--   Simplify_Geometry
--
-- Purpose
--   This procedure simplifies a geometry without actually having to specify
--   thresholds. This routine iteratively invokes sdo_util.simplify
--   starting with a threshold of tolerance and increasing it by a
--   factor of threshold_incrmnts in each iteration. The recursive
--   invocation stops when the area of the resulting geometry
--   decreases by at most the specified "pct_area_chng_limit", i.e., when
--   (area(orig_geom)-area(result_geom))/area(orig_geom) < pct_area_chng_limit/100.
--
-- Syntax
--   Simplify_Geometry (geom, dim, pct_area_chang_limit)
--
-- Keywords and Paramters
--   geom                   geometry to be simplified. Datatype is MDSYS.sdo_geometry.
--   dim                    diminfo containing tolerance info.
--                          Datatype is mdsys.sdo_dim_array.
--   pct_area_change_limit: Stops simplifying  when area of resulting
--                          geometry changes by at most this percentage.
--
-- Usage
-- select sdo_sam.simplify_geometry(a.geometry, b.diminfo)
--   from poly_4pt_temp a, user_sdo_geom_metadata b
--     where b.table_name='POLY_4PT_TEMP' ;



  FUNCTION simplify_geometry(geom mdsys.sdo_geometry,
                             dim mdsys.sdo_dim_array,
                             pct_area_change_limit number default 2)
  RETURN mdsys.sdo_geometry  DETERMINISTIC PARALLEL_ENABLE;

-- Tolerance as a parameter
  FUNCTION simplify_geometry(geom mdsys.sdo_geometry,
                             tol number,
                             pct_area_change_limit number default 2)
  RETURN mdsys.sdo_geometry  DETERMINISTIC PARALLEL_ENABLE;


-- Name
--   Simplify_Layer
--
-- Purpose
--   The "simplify_geometry" is applied to all geometries in a layer.
--   The simplified geometry is re-inserted in the table in column
--   "smpl_geom_colname". The commit_interval specifies the interval
--   at which each batch of simplified-geom inserts are committed.
--
-- Syntax
--   Simplify_Layer (theme_tablename, theme_colname,
--                   smpl_geom_colname, commit_interval, pct_area_change_limit)
--
-- Keywords and Paramters
--   theme_tablename    Name of table. Datatype varchar2
--   theme_colname      Geometry column in table. Datatype varchar2
--   smpl_geom_colname  Name of column to store simplified_geometry.
--                      Datatype varchar2.
--
--   Rest of the parameters below are for controlling the # of iterations
--
-- Usage
-- execute sdo_sam.simplify_layer('POLY_4PT_TEMP', 'GEOMETRY', 'SMPL_GEOM');


  PROCEDURE simplify_layer(theme_tablename varchar2,
                           theme_colname varchar2,
                           smpl_geom_colname varchar2,
                           commit_interval number default 10,
                           pct_area_change_limit number default 2);



------------------------------------------------------------------------------
-- Name
--   Intersection_Ratio
--
-- Purpose
--   This routine first computes the intersection of location,thematic_boundary
--   geometries. The ratio of the  area of this intersection to the
--   area of the "thematic_boundary" is computed and returned.
--
--   If dist and units are specified, then the location geometry
--   is "buffered" using the specified distance and the intersection_ratio
--   of the buffered_location to thematic_boundary is returned.
--
-- Syntax
--   Intersection_Ratio(location, thematic_boundary, dim,
--                        dist,  units);
-- Usage
--   select sdo_sam.intersection_ratio(a.geometry, b.geometry,
--     c.diminfo) from poly_4pt_temp a, tst b, user_sdo_geom_metadata c
--       where c.table_name = 'POLY_4PT_TEMP';

  FUNCTION Intersection_Ratio(location mdsys.sdo_geometry,
                              thematic_boundary mdsys.sdo_geometry,
                              dim mdsys.sdo_dim_array,
                              dist number default null,
                              units varchar2 default null)
  RETURN number PARALLEL_ENABLE;


------------------------------------------------------------------------------
-- Name
--   Tiled_Bins
--
-- Purpose
--   This routine tiles a 2-d space and returns geometries corresponding
--   to those tiles. The returned sdo_region object has (the tile_id,
--   tile_code (quadtree-code), tile_geometry) corresponding to each tile.
--   If srid is non-null, it is set in the tile_geometry.
--   If xdivs, ydivs (# of divisions in each dimension) are specified,
--   then tiling_level  is ignored.
-- Syntax
--   Tiled_Bins(l1, u1, l2, u2, srid)
--
-- Usage
--   select * from TABLE(sdo_sam.tiled_bins(-180, 180, -90, 90, 1, 0));



  FUNCTION Tiled_Bins(l1 number, u1 number, l2 number, u2 number,
                      tiling_level number default null,
                      srid number default null,
                      xdivs number default null, ydivs number default null)
  RETURN MDSYS.SDO_REGIONSET
  PIPELINED DETERMINISTIC PARALLEL_ENABLE;


------------------------------------------------------------------------------
-- Name
--   Bin_Geometry
--
-- Purpose
--   This routine bins the geometry to the most-intersecting bin
--   from a bin_tablename.
--
-- Syntax
--   Bin_Geometry(geom, dim, bin_tablename, bin_colname)
--
-- Usage
--   select sdo_sam.bin_geometry(a.geometry, b.diminfo, 'BINTBL', 'GEOMETRY')
--     from poly_4pt a, user_sdo_geom_metadata b
--       where b.table_name='POLY_4PT' and a.gid=1;

  FUNCTION Bin_Geometry(geom mdsys.sdo_geometry, dim mdsys.sdo_dim_array,
                        bin_tablename varchar2, bin_colname in varchar2)
  RETURN NUMBER PARALLEL_ENABLE;


-- Signature using tolerance instead of dim
  FUNCTION Bin_Geometry(geom mdsys.sdo_geometry, tol number,
                        bin_tablename varchar2, bin_colname in varchar2)
  RETURN NUMBER PARALLEL_ENABLE;

-- Name
--  Bin_Layer
--
-- Purpose
--   This routine computes the most-intersecting bin for each geomtry row
--   in a specified layer using the bins in "bin_tablename".
--   The bin_id for each geometry is added in the "bin_id_colname".
--   Commit_intrvl specifies the batch-size for the inserts.
--
-- Syntax
--   Bin_Layer(tablename, colname, bin_tablename, bin_colname,
--             bin_id_colname, commit_intrvl)
--
-- Usage
--   execute sdo_sam.bin_layer('POLY_4PT_TEMP', 'GEOMETRY', 'BINTBL',
--                             'GEOMETRY', ' BIN_ID', 1);


  PROCEDURE Bin_Layer(tablename varchar2, colname varchar2,
                      bin_tablename varchar2, bin_colname varchar2,
                      bin_id_colname varchar2,
                        commit_interval number default 20);



------------------------------------------------------------------------------
-- Name
--   Spatial_Clusters
--
-- Purpose
--   This routine computes clusters using existing R-tree index.
--   The parameter max_clusters specifies the number of clusters to
--   obtain. Returns sdo_region objects where the geometry field
--   specifies the cluster boundary of each cluster. (The geometry_key
--   is set to null).
--
-- Syntax
--  Spatial_Clusters(tablename, colname, max_clusters,
--                   allow_outliers, tablepartition)
--
-- Usage
--   select count(*) from
--     TABLE(sdo_sam.Spatial_Clusters('POLY_4PT_TEMP', 'GEOMETRY', 3));

  FUNCTION Spatial_Clusters(tablename varchar2, colname varchar2,
                            max_clusters number,
                            allow_outliers varchar2 default null,
                            tablepartition varchar2 default null)
  RETURN MDSYS.SDO_REGIONSET
  PIPELINED;

------------------------------------------------------------------------------
-- Name
--   Aggregates For Layer
--
-- Purpose
--   Compute thematic aggregates for a layer of rows.
--   For each geometry in  tablename, identify the geometries in
--   theme_name table, find their intersection_ratio, and multiply
--   the specified aggregate using this intersection_ratio and aggregate
--   it for each geometry in tablename.
--
--   Returns a table of geometry(from tablename table), aggregate_value using
--   the sdo_regaggr object.
--
-- Syntax
--   Aggregate_For_Layer(theme_name, theme_colname, tablename, colname,
--                       aggr_type_string, aggr_col_string, dst_spec)
--
-- Usage
--   select * from TABLE(sdo_sam.Aggregate_For_Layer('POLY_4PT_TEMP',
--                       'GEOMETRY', 'SUM', '1', 'TST', 'GEOMETRY'));
--   select * from TABLE(sdo_sam.Aggregate_For_Layer('POLY_4PT_TEMP',
--                      'GEOMETRY', 'SUM', '1','TST', 'GEOMETRY','distance=2'));
--   select * from TABLE(sdo_sam.Aggregate_For_Layer('POLY_4PT_TEMP',
--                       'GEOMETRY', 'SUM', '1',  'TST', 'GEOMETRY',
--                       'distance=2 UNIT=MILE'));

  FUNCTION Aggregates_For_Layer(theme_name varchar2,
                                theme_colname varchar2,
                                aggr_type_string varchar2,
                                aggr_col_string varchar2,
                                tablename varchar2, colname varchar2,
                                dst_spec varchar2 default null,
      dst_offset number default null, zero_agg_rows number default 0 )
  RETURN MDSYS.SDO_REGAGGRSET
  PIPELINED;

  FUNCTION Aggregates_For_Geometry(theme_name varchar2,
                                   theme_colname varchar2,
                                   aggr_type_string varchar2,
                                   aggr_col_string varchar2,
                                   geom mdsys.sdo_geometry,
                                   dst_spec varchar2 default null,
                                   dst_offset number default null)
  RETURN number ;


------------------------------------------------------------------------------
-- Name
--   Tiled Aggregates
--
-- Purpose
--   Similar to thematic aggregates. Instead of explicit tablename
--   the table is dynamically generated using tiling information.
--
--   Given a theme_name table, the tiling domain is determined.
--   Based on the tiling_level, a number of tiles are generated.
--   For each tile geometry, thematic aggregates are computed
--   as described above.
--   Parameter zero_agg_tiles, if 0, skips (does not return)
--   tiles that have aggregate value of 0. Default is 0.
--   Parameter x_divs, y_divs specify the # of divisions if tiling_level
--   is not specified. If both are specified, then tiling_level is ignored.
--
--
--
--   Returns a table of tile_geometry, aggregate_value  using
--   the sdo_regaggr object.
--
-- Syntax
--   Tiled_Aggregates(theme_name, theme_colname,
--                    aggr_type_string, aggr_col_string,
--                    tiling_level, dst_spec, tiling_domain, zero_agg_tiles)
--
-- Usage
-- select * from TABLE(sdo_sam.Tiled_Aggregates('POLY_4PT_TEMP',
--                     'GEOMETRY', 2, 'SUM', '1'));

  FUNCTION Tiled_Aggregates(theme_name varchar2,
                            theme_colname varchar2,
                            aggr_type_string varchar2,
                            aggr_col_string varchar2,
                            tiling_level number default null,
                            tiling_domain mdsys.sdo_dim_array default null,
                            zero_agg_tiles number default 0,
                            xdivs number default null, ydivs number default null)
  RETURN MDSYS.SDO_REGAGGRSET
  PIPELINED;

------------------------------------------------------------------------------
-- Name
--   Colocated Reference Features
--
-- Purpose
--   Same as Predicated_Join. Materialize the join results into
--   a table "result_tablename".  The result_tablename should have
--   the columns (tid number, rid1 number, rid2 number).
--
--   This routine materializes  each pair of rowids returned from
--   Predicated_Join and stores them in the rid1, rid2 columns of the
--   result_tablename. The tid is a unique generated "interaction"
--   number corresponding to each "rid1".
--
  PROCEDURE Colocated_Reference_Features(theme_tablename varchar2,
                                         theme_colname varchar2,
                                         theme_predicate varchar2,
                                         tablename varchar2,
                                         colname varchar2,
                                         ref_predicate varchar2,
                                         dst_spec varchar2,
                                         result_tablename varchar2,
                                         commit_interval number default 100);


END sdo_sam;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."PRVT_SAM" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
56e 248
JQHyim+ffj5jqIJon2I0YM/93iwwg2OJr0gFfHRAvxlepTyOBEBhB0zACRTUqMXZq6EBCKG0
HXQWgzhyD54R8FcMVfXr+onOoRSqJTE6ErGoenr5OkxPP/nh6vWA+8841BoN52VXOuT+4bSn
XY1ANv2OO+IeBNqwVIaPTAWcjUUu210jRu0LncfP/kR0z/Y6qP+QH88Fx1zGX1yJPjKchDOX
gHXDkrLAAeSHVi50lv0fymphGB7HeuWF2fM2aEXTlEidYkDVvMtxHRhP5pBQ1RH46gzPfJMU
hohXjQScWpm0oAqCKiKeT+WthmTwF3cVvZLKjM+NfHc8JOjIDoPe6F/300CBNDF7diPDHLpC
jWbiBqVqGBAwPUTy/8Yz5g5id9RKSYow8wxe1d2oUIcb9m6TFbeGMRoPTi2bFsCu9KL6hJ+K
4NtUeT9+4zwDq+eTurOfbo9c+FfHKQZTDctrHEp8ggoLn4bAi8jt19qMCht+/NidJklE8rDN
EP7/AIuH+sKnx4rX2ku5BAF422k+Qrm3lySiS4ArejSQ3dcq5JwRdeGRGfb4ttgkAB2pRyGC

/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_OLS_LOCUTL" AUTHID current_user AS

  FUNCTION geocodeSingleAdr(
    addressInRequest  XMLTYPE,
    openLsVersion     VARCHAR2)
      RETURN XMLTYPE;

  FUNCTION makeOpenLS10Request(
    request XMLTYPE)
      RETURN XMLTYPE;

END sdo_ols_locutl;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_OLS_PRESENTATION" AUTHID current_user AS

  FUNCTION makeOpenLS10Request(
    request XMLTYPE)
      RETURN XMLTYPE;

  FUNCTION specify_theme_for_mapviewer(
    openls_layer    XMLTYPE,
    openls_version  VARCHAR2)
      RETURN XMLTYPE;

  FUNCTION specify_poi_for_mapviewer(
    openls_poi      XMLTYPE,
    openls_version  VARCHAR2)
      RETURN XMLTYPE;

END sdo_ols_presentation;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_OLS_ROUTE" AUTHID current_user AS

  FUNCTION maneuverOracleToOpenLS(
    oracle          XMLTYPE,
    openls_version  VARCHAR2)
      RETURN XMLTYPE;

  FUNCTION makeOpenLS10Request(
    request XMLTYPE)
      RETURN XMLTYPE;

END sdo_ols_route;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_OLS_DIRECTORY" AUTHID current_user AS

  FUNCTION isBusinessOfCategoryId(
    businessId      VARCHAR2,
    categoryId      VARCHAR2,
    categoryTypeId  VARCHAR2)
      RETURN NUMBER;

  FUNCTION isBusinessOfCategoryName(
    businessId      VARCHAR2,
    categoryName    VARCHAR2,
    categoryTypeId  VARCHAR2)
      RETURN NUMBER;

  FUNCTION makeOpenLS10Request(
    request XMLTYPE)
      RETURN XMLTYPE;

  FUNCTION getOpenLsForBusiness(
    BUSINESS_ID                   VARCHAR2,
    BUSINESS_NAME                 VARCHAR2,
    DESCRIPTION                   VARCHAR2,
    PHONE                         VARCHAR2,
    COUNTRY                       VARCHAR2,
    COUNTRY_SUBDIVISION           VARCHAR2,
    COUNTRY_SECONDARY_SUBDIVISION VARCHAR2,
    MUNICIPALITY                  VARCHAR2,
    MUNICIPALITY_SUBDIVISION      VARCHAR2,
    POSTAL_CODE                   VARCHAR2,
    POSTAL_CODE_EXT               VARCHAR2,
    STREET                        VARCHAR2,
    INTERSECTING_STREET           VARCHAR2,
    BUILDING                      VARCHAR2,
    x                             NUMBER,
    y                             NUMBER,
    parameters                    XMLTYPE,
    openLsVersion                 VARCHAR2)
      RETURN XMLTYPE;

  FUNCTION getOpenLsForCategory(
    CATEGORY_ID       VARCHAR2,
    CATEGORY_TYPE_ID  NUMBER,
    CATEGORY_NAME     VARCHAR2,
    PARENT_ID         VARCHAR2,
    openLsVersion     VARCHAR2)
      RETURN XMLTYPE;

  FUNCTION getOpenLsForCategories(
    BUSINESS_ID   VARCHAR2,
    openLsVersion VARCHAR2)
      RETURN XMLTYPE;

END sdo_ols_directory;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_WS_PROCESS" AUTHID current_user AS
        function evaluateExpr(operandType varchar2, op varchar2, operand1 varchar2, operand2 varchar2) return number;
        function evaluateNonTSExpr(op IN VARCHAR2, p1 IN VARCHAR2, p2 IN VARCHAR2) RETURN NUMBER ;
        function evaluateNonTSNumExpr(op IN VARCHAR2, p1 IN NUMBER, p2 IN NUMBER) RETURN NUMBER ;
        function evaluateTimeExpr(op varchar2, operand1 varchar2, operand2 varchar2) return number;
        function evaluateTSExpr(op varchar2, l_operand1 varchar2, l_operand2 varchar2) return number ;
        function evaluateGYearMonthExpr(op varchar2, operand1 varchar2, operand2 varchar2) return number ;
        function evaluateGMonthDayExpr(op varchar2, operand1 varchar2, operand2 varchar2) return number ;
        function evaluateGYearExpr(op varchar2, operand1 varchar2, operand2 varchar2) return number ;
        function evaluateGMonthExpr(op varchar2, operand1 varchar2, operand2 varchar2) return number ;
        function evaluateGDayExpr(op varchar2, operand1 varchar2, operand2 varchar2) return number ;
        function evaluateDurationExpr(op varchar2, operand1 varchar2, operand2 varchar2) return number ;
        function convertDurationExpr(operand varchar2) return number ;
        function checkLength(val varchar2, maxLength number) return number;

end;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_WFS_PROCESS" AUTHID current_user AS
        SPATIALCOLSEP varchar2(40) := '<>';
        SPATIALPATHELEMSEP varchar2(20) := '>';
        NS_SEP varchar2(20) := '<';
        NULL_NS varchar2(20) := 'null';
        KEY_SEP varchar2(20) := ';';
        COMMIT_THRESHOLD number  := 1000;
        LARGE_THRESHOLD number  := 0;

        -- publish from relation table content
        procedure publishFeatureType(dataSrc IN VARCHAR2,
                                     ftnsUrl IN VARCHAR2,
                                     ftName IN VARCHAR2,
                                     ftnsAlias IN VARCHAR2,
                                     featureDesc IN XMLType,
                                     SCHEMALOCATION IN VARCHAR2,
                                     pkeyCol IN VARCHAR2,
                                     columnInfo IN mdsys.StringList, pSpatialCol varchar2, featureMemberNS varchar2, featureMemberName varchar2, srsNS varchar2, srsNSAlias varchar2, mandatoryColumnInfo IN mdsys.StringList default mdsys.StringList('$ALL$'), wfs_version IN varchar2 default '1.0.0',
                                     ftXSD IN XMLType default NULL/*,
                                     ftVaryingNSAlias_ColName IN StringList default NULL*/,
                                     customSrsNamePrefixes IN VARCHAR2 default NULL) ;
        procedure publishFeatureType(dataSrc IN VARCHAR2,
                                     ftnsUrl IN VARCHAR2,
                                     ftName IN VARCHAR2,
                                     ftnsAlias IN VARCHAR2,
                                     featureDesc IN XMLType,
                                     SCHEMALOCATION IN VARCHAR2,
                                     pkeyCol IN VARCHAR2,
                                     columnInfo IN mdsys.StringList, pSpatialCol varchar2, featureMemberNS varchar2, featureMemberName varchar2, srsNS varchar2, srsNSAlias varchar2, viewTableName varchar2, viewTablepkeyCol varchar2, mandatoryColumnInfo IN mdsys.StringList default mdsys.StringList('$ALL$'), wfs_version IN varchar2 default '1.0.0',
                                     ftXSD IN XMLType default NULL/*,
                                     ftVaryingNSAlias_ColName IN StringList default NULL*/,
                                     customSrsNamePrefixes IN VARCHAR2 default NULL) ;
        -- publish from a external feature xsd
        procedure publishFeatureType(dataSrc IN VARCHAR2,
                                     ftnsUrl IN VARCHAR2,
                                     ftName IN VARCHAR2,
                                     ftnsAlias IN VARCHAR2,
                                     featureDesc IN XMLType,
                                     SCHEMALOCATION IN VARCHAR2,
                                     pkeyCol IN VARCHAR2,
                                     columnInfo IN mdsys.StringList, pSpatialCol varchar2, featureMemberNS varchar2, featureMemberName varchar2, srsNS varchar2, srsNSAlias varchar2, featureCollectionNS varchar2, featureCollectionName varchar2, isGML3 varchar2, formattedkeyCols mdsys.StringList, viewTableName varchar2, viewTablepkeyCol varchar2, viewTableFmtKeyCols mdsys.StringList, mandatoryColumnInfo IN mdsys.StringList default mdsys.StringList('$ALL$'), wfs_version IN varchar2 default '1.0.0',
                                     ftXSD IN XMLType default NULL/*,
                                     ftVaryingNSAlias_ColName IN StringList default NULL*/,
                                     customSrsNamePrefixes IN VARCHAR2 default NULL) ;
        function populateVaryingAliases(ftXSD IN XMLType,
                                        ftName IN VARCHAR2,
                                        featureTypeId IN NUMBER,
                                        col_name IN VARCHAR2,
                                        tagTypeName OUT VARCHAR2) return varchar2;
  function strip_special_chars(input_str           varchar2,
                               chars_to_be_deleted varchar2,
                               placeholders        varchar2 default CHR(1)) return varchar2;
        procedure publish_featureTypes_in_schema(
                                                p_owner               varchar2,
                                                p_namespace_url       varchar2,
                                                p_namespace_alias     varchar2,
                                                p_wls_postxml_url     varchar2,
                                                p_tablename_pattern   varchar2 default '%',
                                                p_wfs_version         varchar2 default '1.1.0',
                                                p_write_xsd           varchar2 default 'N');
        -- publish from a external feature xsd
        procedure publishFeatureType(ftxsd IN XMLType, featureDesc IN XMLType, wfs_version IN varchar2 default '1.0.0');
        procedure processInLineComplexElement(ftxsd IN XMLType,
                               elementXml IN XMLType,
                               elemIndex IN number,
                               spatialCols IN OUT NOCOPY mdsys.StringList,
                               currGmlElementsCnt IN OUT number,
                               gmlElementsCnt IN number,
                               parentElemPath IN varchar2,
                               gmlAlias IN VARCHAR2);
        procedure processComplexElement(ftxsd IN XMLType,
                               elementType IN varchar2,
                               spatialCols IN OUT NOCOPY mdsys.StringList,
                               currGmlElementsCnt IN OUT number,
                               gmlElementsCnt IN number,
                               parentElemPath IN varchar2,
                               gmlAlias IN VARCHAR2);
        function isComplexObjectType(elemType IN VARCHAR2, gmlAlias IN VARCHAR2) return number ;
        function isInList(l mdsys.StringList, item varchar2) return number ;
        function orderInList(l mdsys.StringList, item varchar2) return number ;

        procedure  registerObject(objNs IN VARCHAR2, objName IN VARCHAR2, ftnsUrl IN VARCHAR2, currObjColPath varchar2, objNameIndex IN  NUMBER, ftId IN NUMBER, spatialColInfo mdsys.StringList, spatialColInfoIndex IN OUT NUMBER);
        function getXMLTagType(typeOwner IN VARCHAR2, type IN VARCHAR2) RETURN VARCHAR2;
        procedure dropFeatureType(ftnsUrl IN VARCHAR2, ftName IN VARCHAR2);
        procedure dropFeatureTypes(ftnsUrl IN VARCHAR2);
        procedure insertFtMDUpdated(ns varchar2, name varchar2, updateTs timestamp) ;
        procedure insertFtDataUpdated(ns varchar2, name varchar2, updatedRowList ROWPOINTERLIST, updateTs timestamp);
        procedure insertCapabilitiesInfo(capabilitiesInfo xmltype, wfs_version IN varchar2 default '1.0.0');
        procedure deleteCapabilitiesInfo;
        procedure  genCollectionProcs ;
        procedure genCollectionProcsHelper(objNs IN VARCHAR2, objName IN VARCHAR2) ;
        procedure populateFeatureTypeXMLInfo(xmlcoltypexsd XMLType,
                        fTypeId number, columnName varchar2,
                        objPathInfo mdsys.StringList) ;
        procedure deleteFeatureTypeXMLInfo(fTypeId number);
        function containsSDO(ns varchar2, name varchar2, ftId number) return number;
        function containsSDOInternal(rootns varchar2, rootname varchar2,
                                ns varchar2, name varchar2, ftId number) return number ;
        procedure updateObjectRef(refObjNs varchar2, refObjName varchar2, featureTypeId number , refObjSeqNo number) ;
        procedure updateObjectRef(refObjNs varchar2, refObjName varchar2,
                refObjSeqNo number, nsUrl varchar2,
                containerObjNs varchar2, containerObjName varchar2, containerObjNameIndex number, featureTypeId number) ;
        function sortSpContentByColIndex (spatialPaths mdsys.StringList, spatialPathInfo sdo_geom_path_info,
                userName varchar2, tableName in varchar2) return sdo_geom_path_info;
        function genSpatialPathElemColIndex(spatialPaths mdsys.StringList, spatialPathElem sdo_geom_path_elem) return number ;
        function genIdValue(data xmltype, idPaths mdsys.StringList, tNS varchar2, tName varchar2, ftUserName varchar2) return varchar2 ;
        function getPath(path mdsys.StringList) return varchar2;
        function getParsedPath(path varchar2) return mdsys.StringList; -- (ns1, name1, ns2, name2....)
        procedure genRecordTypeProcessingLogic(tNS varchar2, tName varchar2) ;
        function extractSDO(xmldata XMLType, spatialPaths mdsys.StringList, srsNs varchar2, ISGML3 varchar2, spPathsSRSNSList mdsys.StringListList) return sdo_geom_path_info ;
        function parsePath(path varchar2) return mdsys.StringList ;
        function generateParsedSpatialPath(spatialPaths mdsys.StringList) return mdsys.StringListList ;
        function processPath(srcPaths mdsys.StringListList,  genArrIdx number) return mdsys.StringListList ;
        function generateAliasString(aliasList mdsys.StringList) return varchar2 ;
        function getAlias(nsurl varchar2, aliasList mdsys.StringList) return varchar2 ;
        function putAlias (nsurl varchar2, alias varchar2, aliasList mdsys.StringList) return mdsys.StringList;
        function isRowIdIn (r ROWID, rlist RowPointerList) return number ;
        function isPKColIn (r varchar2, rlist RowPointerList) return number;
        function extractID(xmldata XMLType, idPaths mdsys.StringList) return varchar2 ;
        function processIdPath(srcPaths mdsys.StringList) return mdsys.StringList ;

        function getFeatureTypeId(ftnsUrl IN VARCHAR2,
                                  ftName IN VARCHAR2) return number;
        procedure grantMDAccessToAdminUser(userName IN varchar2) ;
        procedure grantMDAccessToUser(userName IN varchar2);
        procedure revokeMDAccessFromAdminUser(userName IN varchar2) ;
        procedure revokeMDAccessFromUser(userName IN varchar2);
        procedure grantFeatureTypeToUser(ftnsUrl IN VARCHAR2,
                                  ftName IN VARCHAR2,
                                  userName IN varchar2);
        procedure revokeFeatureTypeFromUser(ftnsUrl IN VARCHAR2,
                                  ftName IN VARCHAR2,
                                  userName IN varchar2);
        procedure registerMTableView(ftNSUrl varchar2,
                     ftName varchar2,
                     viewTableList mdsys.StringList,
                     viewTablePkeyColList mdsys.StringList,
                     tablePKeyColList mdsys.StringList);
        procedure registerMTableView(ftNSUrl varchar2,
                     ftName varchar2,
                     viewTableList mdsys.StringList,
                     viewTablePkeyColList mdsys.StringList,
                     formattedViewTableColList mdsys.StringListList,
                     tablePKeyColList mdsys.StringList);
        procedure unRegisterMTableView(ftNSUrl varchar2,
                       ftName varchar2);
        function notInArray(p varchar2, pList mdsys.RowPointerList) return number;

        function genSpatialArrInfo(tableNamePrefix varchar2, pkVal varchar2,
                                   l_spatialArrList mdsys.StringListList,
                                   data XMLType,  srsNs varchar2, spatialArrUpdMap varchar2, ISGML3 varchar2, spArrPathsSRSNSList mdsys.StringListList)
        return mdsys.SDO_GEOM_PATH_INFO_LIST;
        function  getUpdateMap(spatialArrList mdsys.StringListList) return varchar2;
        function expandPath(aliasedPath varchar2, nsParam varchar2) return varchar2;
        function findNSUrl(nsAlias varchar2, nsAliasList mdsys.StringList, nsUrlList mdsys.StringList) return varchar2;
        function getCount(pathPattern varchar2, nsParam varchar2, data xmltype) return number;
        function enumerateArrPaths(pathPattern varchar2, nsParam varchar2, data xmltype) return mdsys.StringList;
        procedure genTriggers(tNS varchar2, tName varchar2);
        function isListMember(featureTypeName varchar2, namespaceUrl varchar2, ftIdList mdsys.StringListList) return number;
        PROCEDURE initialize_after_import;

        FUNCTION prepare_for_export_user return varchar2;
        FUNCTION prepare_for_export_user(exportSDOMetadata varchar2) return varchar2;

        FUNCTION prepare_for_export_fts (ftList mdsys.StringListList) return varchar2;
        FUNCTION prepare_for_export_fts (ftList mdsys.StringListList,  exportSDOMetadata varchar2) return varchar2;
        PROCEDURE prepare_for_export_ft_m_int(ftName in varchar2, ftNsUrl in varchar2, exportSDOMetadata varchar2) ;
        PROCEDURE prepare_for_export_ft_int(ftName in varchar2, ftNsUrl in varchar2, exportSDOMetadata varchar2);

        FUNCTION prepare_for_export_all return varchar2;
        FUNCTION prepare_for_export_all(exportSDOMetadata varchar2) return varchar2;
        procedure drop_export_tables;
        procedure genUpdateStr(spatialColCount number, update_prefix varchar2, update_suffix varchar2);
        procedure preProcessInsert (xmldata xmltype,
                                    idPaths mdsys.StringList,
                                    spatialPaths mdsys.StringList,
                                    parsedAliasSpPath mdsys.StringListList,
                                    spPathsSRSNSList mdsys.StringListList,
                                    spatialArrPathsList mdsys.StringListList,
                                    spArrPathsSRSNSList mdsys.StringListList,
                                    ftNS varchar2,
                                    ftName varchar2,
                                    ftId number,
                                    ftUserName varchar2,
                                    tableName varchar2,
                                    srsNs varchar2,
                                    ISGML3 varchar2,
                                    spatialPathsStgSrIds mdsys.sdoNumList, -- spatialPaths storage srid
                                    spatialArrPathsStgSrIds mdsys.sdoNumList, pkColVal OUT VARCHAR2); -- spatial Arr paths storage srids
        procedure preProcessUpdate(xmldata xmltype,
                                   oldId varchar2,
                                   spColUpdMap mdsys.StringList,
                                   spArrColUpdMap mdsys.StringList,
                                   idPaths mdsys.StringList,
                                   spatialPaths mdsys.StringList,
                                   parsedAliasSpPath mdsys.StringListList,
                                   spPathsSRSNSList mdsys.StringListList,
                                   spatialArrPathsList mdsys.StringListList,
                                   spArrPathsSRSNSList mdsys.StringListList,
                                   ftNS varchar2,
                                   ftName varchar2,
                                   ftId number,
                                   ftUserName varchar2,
                                   tableName varchar2,
                                   srsNs varchar2,
                                   ISGML3 varchar2,
                                   spatialPathsStgSrIds mdsys.sdoNumList,  -- spatialPaths storage srid
                                   spatialArrPathsStgSrIds mdsys.sdoNumList,   -- spatial Arr paths storage srids
                                   computeSp number, newId OUT varchar2);

END SDO_WFS_PROCESS;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_WFS_PROCESS_UTIL" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
7c 92
mCKsDXN1w7Nq2h2nekDmlOqWFecwg3lHf8upynSmZxcPs6p8XBZG42JhbEUItQ9XrSk/vkpS
xuZwoYuNeZ+NWsnHMHmpYYuvswp8juAJ9UXQK63ZoLaJzxYd0Avvsg+SPySnVwJD+xrmZrM=

/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_WFS_LOCK" authid current_user AS

cleanup number := 1;
ROWCNT_THRESHOLD number := 100;

procedure registerFeatureTable(userName IN varchar2, tableName IN varchar2) ;
procedure unRegisterFeatureTable(userName IN varchar2, tableName IN varchar2) ;
function lockRowsById(userName IN VARCHAR2,
                  tableName IN varchar2,
                  tableAlias varchar2,
                  expiryTime IN number,
                  rowsLocked OUT mdsys.RowPointerList,
                  rowsNotLocked OUT mdsys.RowPointerList,
                  lockAll varchar2,
                  pkeyCols mdsys.StringList,
                  autoCommit varchar2,
                  rowsToBeLocked IN  mdsys.RowPointerList,
                  orderClause varchar2,
                  indexClause varchar2,
                  maxcnt number) return number;
procedure lockRowsById(pTokenId IN varchar2,
                userName IN VARCHAR2,
                tableName IN varchar2,
                tableAlias varchar2,
                expiryTime IN number,
                rowsLocked OUT mdsys.RowPointerList,
                rowsNotLocked OUT mdsys.RowPointerList,
                lockAll varchar2,
                pkeyCols mdsys.StringList,
                autoCommit varchar2,
                rowsToBeLocked IN  mdsys.RowPointerList,
                orderClause varchar2,
                indexClause varchar2,
                maxcnt number) ;
procedure unlockRowsById(pTokenId IN varchar2,
                userName IN VARCHAR2,
                tableName IN varchar2,
                tableAlias IN varchar2,
                pkeyCols IN mdsys.StringList,
                autoCommit IN varchar2,
                rowsToBeUnLocked IN  mdsys.RowPointerList);
procedure transferTokenById (pTokenId IN varchar2) ;

procedure updateTokenSessionMap(tId varchar2, sId varchar2) ;

procedure deleteTokenSessionMap(tId varchar2) ;

function queryTokenSessionMap (tId varchar2) return varchar2 ;

procedure resetTokenExpiry(tId varchar2) ;

function generateTokenId return varchar2;

procedure enableDBTxns;
end;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_WFS_LOCK_UTIL" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
ec d6
jVCQ+/nO6dqWJwNyq6Kn4nhys64wgzLwf8sVfHTpWBKe0Mp/LZ/Ath9RGp8B2pFHcyA12eHD
4HO7Hu2UhNTaN+kpeWGHFF2HAJRn/YuXr7d8Nl2kTaBO/PH0XkZJJzAOGeKPV5TgcX32XrT/
Podn+gpluEwbJVLOVy2O3jLwfY4myOtIKFWFfmokNycaW7U8elaby/n608YI0uH6QyTJ
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_WFS_LOCK_GEN" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
4b 85
2qd73VXCT7mCOyInS6Bnr2D8Y2Ywg7LGLfOpynREafbohXRhw76lNSiWCOZQ8XPEULHtE2PH
HfDgHjsLTBsQKhYIWjLl297yte525x5QA8jv6NUAisBLu601DBkids2OaQ==
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_CSW_PROCESS" AUTHID current_user AS
        SPATIALCOLSEP varchar2(20) := '<>';
        SPATIALPATHELEMSEP varchar2(20) := '>';
        NS_SEP varchar2(20) := '<';
        NULL_NS varchar2(20) := 'null';
        function sortSpContentByColIndex (spatialPaths mdsys.StringList, spatialPathInfo sdo_geom_path_info,
                userName varchar2, tableName in varchar2) return sdo_geom_path_info;
        function genSpatialPathElemColIndex(spatialPaths mdsys.StringList, spatialPathElem sdo_geom_path_elem) return number ;
        function genIdValue(data xmltype, tNS varchar2, tName varchar2,  rtUserName varchar2) return varchar2 ;
        function getPath(path mdsys.StringList) return varchar2;
        function getParsedPath(path varchar2) return mdsys.StringList; -- (ns1, name1, ns2, name2....)
        procedure genRecordTypeProcessingLogic(tNS varchar2, tName varchar2) ;
        function isRowIdIn (r ROWID, rlist RowPointerList) return number ;
        procedure insertRtMDUpdated(ns varchar2, name varchar2, updateTs timestamp) ;
        procedure insertRtDataUpdated(ns varchar2, name varchar2, updatedRowList ROWPOINTERLIST, updateTs timestamp);
        procedure insertCapabilitiesInfo(capabilitiesInfo xmltype);
        procedure deleteCapabilitiesInfo;

        function getRecordTypeId(rtnsUrl IN VARCHAR2,
                                  rtName IN VARCHAR2) return number;
        procedure insertPluginMap(rtnsUrl IN VARCHAR2, rtName IN VARCHAR2,
                                        pluginpackageName varchar2);

        procedure deletePluginMap(rtnsUrl IN VARCHAR2, rtName IN VARCHAR2);
        procedure insertDomainInfo(recordTypeId NUMBER,
                                   propertyName VARCHAR2,
                                   parameterName VARCHAR2,
                                   pValue STRINGLIST);
        procedure deleteDomainInfo(recordTypeId NUMBER, propertyName VARCHAR2,
                                   parameterName VARCHAR2);

        procedure insertRecordViewMap(recordTypeNs VARCHAR2,
                                      viewSrcName VARCHAR2,
                                      targetTypeName VARCHAR2,
                                      mapInfo XMLTYPE,
                                      mapType VARCHAR2);
        procedure deleteRecordViewMap (recordTypeNs VARCHAR2,
                                      viewSrcName VARCHAR2,
                                      targetTypeName VARCHAR2);

        function extractID(xmldata XMLType, idPaths mdsys.StringList) return varchar2;
        function processIdPath(srcPaths mdsys.StringList) return mdsys.StringList;
        function parsePath(path varchar2) return mdsys.StringList;
        function parsePathElimTypePrefix(path varchar2) return mdsys.StringList;
        function generateAliasString(aliasList mdsys.StringList) return varchar2;
        function getAlias(nsurl varchar2, aliasList mdsys.StringList) return varchar2;
        function putAlias (nsurl varchar2, alias varchar2, aliasList mdsys.StringList) return mdsys.StringList;
        function mergeSysAndUserDefinedGeomInfo(l_spatialPaths mdsys.StringList, sysInfo mdsys.sdo_geom_path_info, userInfo mdsys.sdo_geom_path_info)  return  mdsys.sdo_geom_path_info;
        function generateParsedSpatialPath(spatialPaths mdsys.StringList, typeNS varchar2, typeName varchar2) return mdsys.StringList;
        function extractSDO(xmldata XMLType, spatialPaths mdsys.StringList,  userInfo mdsys.sdo_geom_path_info,  srsNs varchar2, ISGML3 varchar2, typeNS varchar2, typeName varchar2, spPathsSRSNSList mdsys.StringListList) return sdo_geom_path_info;
        function generateParsedSpatialPath(spatialPaths mdsys.StringList) return mdsys.StringListList;
        function processPath(srcPaths mdsys.StringListList, genArrIdx number) return mdsys.StringListList;
        function getProcessedIndex(userInfo mdsys.sdo_geom_path_info, spatialPath varchar2, typeNS varchar2, typeName varchar2) return number;
        function isInList(l mdsys.StringList, item varchar2) return number ;
        function genSpatialArrInfo(tableNamePrefix varchar2, pkVal varchar2,
                                   l_spatialArrList mdsys.StringListList,
                                   data XMLType,  srsNs varchar2, spatialArrUpdMap varchar2, ISGML3 varchar2,
                                   typeNS varchar2, typeName varchar2,  spArrPathsSRSNSList mdsys.StringListList)
        return mdsys.SDO_GEOM_PATH_INFO_LIST;
        function  getUpdateMap(spatialArrList mdsys.StringListList) return varchar2;
        function expandPath(aliasedPath varchar2, nsParam varchar2) return varchar2;
        function findNSUrl(nsAlias varchar2, nsAliasList mdsys.StringList, nsUrlList mdsys.StringList) return varchar2;
        function getCount(pathPattern varchar2, nsParam varchar2, data xmltype) return number;
        function enumerateArrPaths(pathPattern varchar2, nsParam varchar2, data xmltype) return mdsys.StringList;
        function isPKColIn (r varchar2, rlist RowPointerList) return number;


        PROCEDURE initialize_after_import;

        FUNCTION prepare_for_export_user return varchar2;
        FUNCTION prepare_for_export_user(exportSDOMetadata varchar2) return varchar2;

        FUNCTION prepare_for_export_rts (rtList mdsys.StringListList) return varchar2;
        FUNCTION prepare_for_export_rts (rtList mdsys.StringListList,  exportSDOMetadata varchar2) return varchar2;
        PROCEDURE prepare_for_export_rt_m_int(rtName in varchar2, rtNsUrl in varchar2, exportSDOMetadata varchar2) ;
        PROCEDURE prepare_for_export_rt_int(rtName in varchar2, rtNsUrl in varchar2, exportSDOMetadata varchar2);

        FUNCTION prepare_for_export_all return varchar2;
        FUNCTION prepare_for_export_all(exportSDOMetadata varchar2) return varchar2;
        procedure drop_export_tables;
        procedure genUpdateStr(spatialColCount number, update_prefix varchar2, update_suffix varchar2);

        procedure preProcessInsert (xmldata xmltype,
                                idPaths mdsys.StringList,
                                origidPaths mdsys.StringList,
                                extractorType varchar2,
                                spatialPaths mdsys.StringList,
                                parsedAliasSpPath mdsys.StringListList,
                                spPathsSRSNSList mdsys.StringListList,
                                spatialArrPathsList mdsys.StringListList,
                                spArrPathsSRSNSList mdsys.StringListList,
                                rtNS varchar2,
                                rtName varchar2,
                                rtId number,
                                rtUserName varchar2,
                                tableName varchar2,
                                srsNs varchar2,
                                ISGML3 varchar2,
                                spatialPathsStgSrIds mdsys.sdoNumList,
                                spatialArrPathsStgSrIds mdsys.sdoNumList,
                                p_type varchar2,
                                pkColVal OUT varchar2) ;

        procedure preProcessUpdate(xmldata xmltype,
                                oldId varchar2,
                                spColUpdMap mdsys.StringList,
                                spArrColUpdMap mdsys.StringList,
                                idPaths mdsys.StringList,
                                extractorType varchar2,
                                spatialPaths mdsys.StringList,
                                parsedAliasSpPath mdsys.StringListList,
                                spPathsSRSNSList mdsys.StringListList,
                                spatialArrPathsList mdsys.StringListList,
                                spArrPathsSRSNSList mdsys.StringListList,
                                rtNS varchar2,
                                rtName varchar2,
                                rtId number,
                                rtUserName varchar2,
                                tableName varchar2,
                                srsNs varchar2,
                                ISGML3 varchar2,
                                spatialPathsStgSrIds mdsys.sdoNumList,
                                spatialArrPathsStgSrIds mdsys.sdoNumList,
                                computeSp number,
                                p_type varchar2,
                                newId OUT varchar2);
        procedure grantMDAccessToAdminUser(userName IN varchar2) ;
        procedure revokeMDAccessFromAdminUser(userName IN varchar2) ;
        procedure grantMDAccessToUser(userName IN varchar2) ;
        procedure revokeMDAccessFromUser(userName IN varchar2) ;
        procedure grantRecordTypeToUser(rtnsUrl IN VARCHAR2, rtName IN VARCHAR2, userName IN varchar2);
        procedure revokeRecordTypeFromUser(rtnsUrl IN VARCHAR2, rtName IN VARCHAR2, userName IN varchar2);
end;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."PRVTTNPC" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
2af 154
pxEsNojIvOzLWMFLwNK7qPS2m30wg433r0gVfHRAv4s+z4yNV82Dt7dFL1qQl1IExHafT1BG
MPlEGjJEqHvAM8G7/k/7zcuxNsa7TinSMuQ2X5mpNaxj3703hlpRvmOo1auujbMReHfvisyK
OUMQXItPeoxfAHMu1rL5nX4th2NkiKom9E6tZ2Y1wh5lpHF3V8ABXgf61Vba0venMseTd2xh
/OFq7CFbA9fiOxVbt1nPOe9VyU1k80YhvR2wGcgheOnE00AM19tiLTKOClL6VTp8v3Idc3qC
c6cIuNwZZIuRP78spek0ohBHPFBW8ixjY+3FKGFC+Ps/nbco
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDOTNPC" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
25a 138
39DtdYJ4zH4Z9W72ejp/8Rq5yVowgzvxmEhqfHTp2sHVVxtn6OJBEfENpB5E8ieAsiloNlr5
LPPTyg1tbzNpLhrbEoWZxcrwtL1xIq6xZE7zfLA/cA7YxdGNdun7hjnKTUnu2OEarKG07BqE
sT3+eRU844TVpUryAPweHIUTflWKwLFHVwSMsGtRngwWv2BoYQRD8wmWb0nd5UxXrs3PX7t+
RBVfnZ8PZOTZYgootXD1+obm6iS4WXs7QZxtPijv6XOApJuwJgDOM2m1B9lhOxMXQmp+CS7w
JlZSdPcQwDfsnP0HJfDq
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."PRVTPC" authid current_user AS
END prvtpc;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_PC_PKG" authid current_user AS
  -- all tables as "schema.table" for simpler interface.
  FUNCTION INIT(
    basetable          varchar2,
    basecol            varchar2,
    blktable           VARCHAR2,
    ptn_params         varchar2,
    pc_extent          sdo_geometry     default null,
    pc_tol             NUMBER           default 0.0000000000005,
    pc_tot_dimensions  NUMBER           default 2,
    pc_domain          sdo_orgscl_type  default null,
    pc_val_attr_tables SDO_STRING_ARRAY default null,
    pc_other_attrs     SYS.XMLTYPE      default null)
      RETURN SDO_PC;

  procedure create_liblas_pyramid(
    pc               in sdo_pc,
    keepLevel1Intact in number);

  PROCEDURE CREATE_PC(
    inp              sdo_pc,
    inptable         varchar2,
          clstpcdatatbl    varchar2 default null);

  PROCEDURE ADD_TO_PC(
    inp      sdo_pc,
    inptable varchar2);

  FUNCTION HAS_PYRAMID(
    inp sdo_pc)
      return number;

  FUNCTION PRESERVES_LEVEL1(
    inp sdo_pc)
      return number;

  -- works as read if qry params are null
  FUNCTION CLIP_PC(
    inp                 sdo_pc,
    ind_dim_qry         sdo_geometry,
    other_dim_qry       sdo_mbr,
    qry_min_res         number,
    qry_max_res         number,
    blkno               number default null,
    include_custom_dims number default 0)
      RETURN MDSYS.SDO_PC_BLK_TYPE PIPELINED;

  PROCEDURE DROP_DEPENDENCIES(basetable varchar2, col varchar2);

  FUNCTION TO_GEOMETRY(pts BLOB, num_pts NUMBER,
                       pc_tot_dim NUMBER, srid NUMBER default null,
                       blk_domain sdo_orgscl_type default null,
                       get_ids  NUMBER default NULL)
    RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

  FUNCTION GET_PT_IDs(pts BLOB, num_pts NUMBER,
                      pc_tot_dim NUMBER,
                      blk_domain sdo_orgscl_type default null)
    RETURN SDO_NUMBER_ARRAY DETERMINISTIC;

  function tin_to_pc(
    tin       sdo_tin,
    basetable varchar2,
    basecol   varchar2,
    blktable  varchar2)
      return sdo_pc deterministic;

/*
PROCEDURE POPULATE_FROM_CLSTPCDATA(inp sdo_pc, clstpcdatatbl varchar2);

  PROCEDURE WRITE_CLSTPCDATA(inp sdo_pc, clstpcdatatbl varchar2);
*/


/*
  -- works as read if qry is null
  FUNCTION CLIP_PCAttrs(inp sdo_pc, qry sdo_geometry, blkno number default null)
    RETURN ANYDATASET;
  FUNCTION CLIP_PC_PtIds(inp sdo_pc, qry sdo_geometry, blkno number default null)
    RETURN ANYDATASET;
*/

  function clip_pc_into_tin(
    pc_inp            sdo_pc,
    pc_ind_dim_qry    sdo_geometry,
    pc_other_dim_qry  sdo_mbr,
    pc_qry_min_res    number,
    pc_qry_max_res    number,
    tin_basetable     varchar2,
    tin_basecol       varchar2,
    tin_blktable      varchar2,
    tin_ptn_params    varchar2     default null,
    tin_break_lines   sdo_geometry default null,
    tin_stop_lines    sdo_geometry default null,
    tin_void_rgns     sdo_geometry default null,
    tin_clstpcdatatbl varchar2     default null,
    pc_blkno          number       default null)
      return mdsys.sdo_tin;

  function create_contour_geometries(
    pc                  sdo_pc,
    sampling_resolution number,
    elevations          sdo_ordinate_array,
    region              sdo_geometry)
      return sdo_geometry_array;

  function create_contour_geometries(
    pc_flat_table       varchar2,
    srid                number,
    sampling_resolution number,
    elevations          sdo_ordinate_array,
    region              sdo_geometry)
      return sdo_geometry_array;

  /* This procedure takes a 2D Geometry as input and generates
     two SQL strings which can be appended to a user cursor in the
     where clause. */
  PROCEDURE get_tile_sql ( geometry IN SDO_GEOMETRY,
                           sql_interior OUT VARCHAR2,
                           sql_boundary OUT VARCHAR2,
                           tolerance IN NUMBER DEFAULT 0.0000005,
                           sdo_level in NUMBER DEFAULT 4,
                           sdo_ntiles in NUMBER DEFAULT 100);

  /* This function returns a REFCURSOR which can be queried by the client
     side code to fetch rows from the base table. The columns are the columns
     of the base table: only numberic and VARCHAR columns allowed.
     Query Geometry is used to clip the points from the base table.
     First two colums should be X and Y. SRID is assumed to be the same
     as the one used in Geometry.  */
  FUNCTION clip_pc_flat (geometry IN SDO_GEOMETRY,
                         table_name IN VARCHAR2,
                         tolerance IN NUMBER,
                         other_dim_qry  IN MDSYS.SDO_MBR DEFAULT NULL,
                         mask IN VARCHAR2 DEFAULT 'ANYINTERACT')

  RETURN SYS_REFCURSOR;

  /* Same as the above, but return the actual SQL statement instead of the
     cursor. Users can add additional predicates or select list and
     execute it. */
  FUNCTION clip_pc_flat_string (geometry IN SDO_GEOMETRY,
                                table_name IN VARCHAR2,
                                tolerance IN NUMBER,
                                other_dim_qry  IN MDSYS.SDO_MBR DEFAULT NULL,
                                mask IN VARCHAR2 DEFAULT 'ANYINTERACT',
                                dop IN INTEGER DEFAULT NULL,
                                sdo_level in number DEFAULT 4,
                                sdo_ntiles in number DEFAULT 100)
  RETURN clob;

  procedure import_las(
    source_las_file    varchar2,
    source_las_file_id varchar2,
    target_table       varchar2,
    add_columns        number);

  function hilbert_xy2d(
    n number,
    x number,
    y number)
      return number;

  function get_blocking_method(
    inp sdo_pc)
      return varchar2;

  function getNthHilbertValue(
    table_name varchar2,
    n          number)
      return number;

END sdo_pc_pkg;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."SDO_TIN_PKG" authid current_user AS
  -- all tables as "schema.table" for simpler interface.
  FUNCTION INIT(basetable varchar2, basecol varchar2,
       blktable varchar2,
       ptn_params varchar2 default null,
       tin_extent            sdo_geometry default null,
       tin_tol               NUMBER default 0.000000000000005,
       tin_tot_dimensions    NUMBER default 2,
       tin_domain            sdo_orgscl_type default null,
       tin_break_lines       SDO_GEOMETRY default null,
       tin_stop_lines        SDO_GEOMETRY default null,
       tin_void_rgns         SDO_GEOMETRY default null,
       tin_val_attr_tables   SDO_STRING_ARRAY default null,
       tin_other_attrs       SYS.XMLTYPE default null)
    RETURN SDO_TIN ;

  PROCEDURE CREATE_TIN(inp sdo_tin, inptable varchar2,
                       clstpcdatatbl varchar2 default null);

  -- works as read if qry is null
  FUNCTION CLIP_TIN(inp sdo_tin,
                   qry sdo_geometry, qry_min_res number, qry_max_res number,
                   blkno number default null)
    RETURN MDSYS.SDO_TIN_BLK_TYPE PIPELINED ;

  PROCEDURE DROP_DEPENDENCIES(basetable varchar2, col varchar2);

  FUNCTION TO_GEOMETRY(pts BLOB, trs BLOB,
                       num_pts NUMBER, num_trs NUMBER,
                       tin_ind_dim NUMBER,
                       tin_tot_dim NUMBER, srid number default null,
                       blk_domain sdo_orgscl_type default null,
                       get_ids NUMBER default NULL)
    RETURN MDSYS.SDO_GEOMETRY DETERMINISTIC PARALLEL_ENABLE;

  PROCEDURE TO_DEM(
    tin                 IN     sdo_tin,
    dem                 IN OUT sdo_georaster,
    blocksize           IN     NUMBER,
    crs_units_per_pixel IN     NUMBER);
--  PRAGMA RESTRICT_REFERENCES(to_geometry, WNDS, WNPS, RNPS);

/*

  -- works as read if qry is null
  FUNCTION CLIP_Pts(inp sdo_tin,
                    qry sdo_geometry,
                    qry_min_res number, qry_max_res number,
                    blkno number default null)
    RETURN ANYDATASET;
  FUNCTION CLIP_PtIds(inp sdo_tin,
                    qry sdo_geometry,
                    qry_min_res number, qry_max_res number)
    RETURN ANYDATASET;

  -- works as read if qry is null
  FUNCTION CLIP_Triangles(inp sdo_tin, qry sdo_geometry,
                    qry_min_res number, qry_max_res number,
                    blkno number default null)
    RETURN ANYDATASET;
  FUNCTION CLIP_TriangleIds(inp sdo_tin, qry sdo_geometry,
                    qry_min_res number, qry_max_res number,
                    blkno number default null)
    RETURN ANYDATASET;
*/

  function clip_tin_into_pc(
    tin_inp         sdo_tin,
    tin_qry         sdo_geometry,
    tin_qry_min_res number,
    tin_qry_max_res number,
    pc_basetable    varchar2,
    pc_basecol      varchar2,
    pc_blktable     varchar2,
    pc_ptn_params   varchar2 default null,
    tin_blkno       number   default null)
      return mdsys.sdo_pc;

  function project_ordinates_onto_tin(
    ordinates2d sdo_ordinate_array,
    tin         sdo_tin)
      return sdo_ordinate_array deterministic;

  function get_surface_of_tin(
    tin    sdo_tin,
    geom2d sdo_geometry)
      return number deterministic;

  function get_surface_of_tin_footprint(
    tin    sdo_tin,
    geom2d sdo_geometry)
      return number deterministic;

  function get_volume_under_tin(
    tin         sdo_tin,
    geom2d      sdo_geometry,
    base_height number)
      return number deterministic;

END sdo_tin_pkg;
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."PRVT_PC" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
773 2de
yAA8kA41udrk/ck8+sHiT8A85sMwgw2J10oFyi/GEv9euFkaTaM7d17cBOjf8LL1BCsTtge8
3eXlkuSkihTf+bR+XD14KE6BtdepnPxW9i8gJKq18iAkRl93BGLDojYMPjlnqGpISUaAsGeA
Nu6JoZ410xRkM1wSy+XzltNc7wg6FrRnwuwEcYHwXoO0XKmA/6AzWGUHPmV+24VlYD8U1Lcq
YdyHUYoVFLQKjqU4nIrp4u2tYkp4UdjfVQBAdvCdB16hnxqXjdRIomwdS0Vv6HUx6FNYAgY3
qu722E8TyWKCnK2Oa+4KX2JSH3kSdqRs8xuGffeM8qXyNKJejjWYw9YeqaXCiKfzcuczdrn7
rk9PG5qcZafTTkT9XwM4bDNC/DtMSfCQeH1Ly+Uu9Qhp0jAvTlIN1ME4EBd/XgE0m3emi2Al
zdgKS0+Em44wouJ74mSZxBM0gqftSOty6BHWhOEA2rou9wBOSvC93x+4jPQej/Iu6lSC5jSh
t9Ut7LI3VJZtH9ElXNoFJaL8gYpV6F9ceXfIw3RdRXR4Vm+GuNOVRhGOSyyv/gIsZ1b+KXP/
I32GHi28tG3Qu96jF5KvNiqCIXvkTFwHkkoSFgrw19BKoomcHReo3f9UtoVNXvuCsU4Q+rVH
m0/6MGVjl2tdQNSb3HgO/88mttlewXNIWh/UPFTSuT/M3pvbdIsC/+TU1j1xBgIIJuuwJPE3
wqY=
/

CREATE OR REPLACE NONEDITIONABLE PACKAGE "MDSYS"."PRVT_TIN" wrapped
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
9
84b 30a
BTatzWMElBMmdj9STiXHnvC9E64wg5DDr0gFfHRVrQ9rC542hMxwsEGR9Mch2fFgs6/AJUKc
axYYELVNVzIUxkgliKWv05qCOhz6ylxJui+WZKqaJQW7JObLoHijTfvzdmOo4Z6IeP2o4SNE
I2cvh1gaLxQ1ZoZh8M1Rg23Wog2czqC2z2fCPssE7dLOi1u1l7IQHVO69H8qDSbj6nzC1IWY
8Wuror834b6OFJciby01Y+OcFSstxffEXonr6E8ihV4IvuZQS0SQKstR44Owb88oRsaQ411q
JTqecq/9TAcierFAH8lOExiDq4g3jcK4efK8CXGPgZUmAPLjfNHYS1YWViHPnNZs3BWDZmnT
OGVBSDbTGf2FYxWWBn8WPcUyo8YBFx4Xw37mej8QVkEggnxsYSxxIRmVRKVelOIQlvATwX0t
8JcbezlUrk535t6KjXKJnNrYrFX02TunSzIIYW7qABEuVzKPrsvY+OyYSUQYaFS8kxxvPJZE
IHZbLk7UgNZtHL3Sikj3ZoCLWOS7NwDECZCSMZhYONorHsKrbzGb28qx2m8Q8crqojAmyBNo
HIrG9uc3Zb2wj1t7xwiTxTbamhCJdO/UkW9CwNyU+mijRRbCkM+OiGG5fV38RyXyqTQKbtzE
6t4qv7a8tAbZYhDt8Xn+Ikqx4hn6s8J+Qqiq/MYcgRSbzrp5cRkx08wcLHUCphKGWRSMi7cN
Wz1j63tLhzIF11Nshr5Rv1snMgMHjyHrdhYLT53kHXeRfVM=
/

