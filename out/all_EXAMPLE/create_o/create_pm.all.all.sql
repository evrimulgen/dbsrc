CREATE USER "PM" IDENTIFIED BY VALUES 'S:48F41D622B0820BF90CA6BCFFD23E1CF0C5A9EF34CF4379325823A7D67A3;H:E00851694DCBE03D0FE66EEC81484E05;T:15C1465267208E6B5689731E75E8B58CBE84C9E46C5B58CD735904D843E5A2B32EE6CFB5AF7E304AC8341450A8765B20FEB2CCCD10631CA9E044E6F2531ECCDBD80B4B6FAE46E0A0D0B0D4C6B9C192B2;72E382A52E89575A'
      DEFAULT TABLESPACE "USERS"
      TEMPORARY TABLESPACE "TEMP"
      PASSWORD EXPIRE
      ACCOUNT LOCK;

GRANT UNLIMITED TABLESPACE TO "PM";
GRANT "CONNECT" TO "PM";
GRANT "RESOURCE" TO "PM";
ALTER USER "PM" DEFAULT ROLE ALL;
CREATE OR REPLACE EDITIONABLE TYPE "PM"."ADHEADER_TYP"

  AS OBJECT
    ( header_name        VARCHAR2(256)
    , creation_date      DATE
    , header_text        VARCHAR2(1024)
    , logo               BLOB
    );
/

CREATE OR REPLACE EDITIONABLE TYPE "PM"."TEXTDOC_TYP"

  AS OBJECT
    ( document_typ      VARCHAR2(32)
    , formatted_doc     BLOB
    ) ;
/

CREATE OR REPLACE EDITIONABLE TYPE "PM"."TEXTDOC_TAB"

  AS TABLE OF textdoc_typ;
/

CREATE TABLE "PM"."PRINT_MEDIA"
   (	"PRODUCT_ID" NUMBER(6,0),
	"AD_ID" NUMBER(6,0),
	"AD_COMPOSITE" BLOB,
	"AD_SOURCETEXT" CLOB,
	"AD_FINALTEXT" CLOB,
	"AD_FLTEXTN" NCLOB,
	"AD_TEXTDOCS_NTAB" "PM"."TEXTDOC_TAB" ,
	"AD_PHOTO" BLOB,
	"AD_GRAPHIC" BFILE,
	"AD_HEADER" "PM"."ADHEADER_TYP"
   )
 NESTED TABLE "AD_TEXTDOCS_NTAB" STORE AS "TEXTDOCS_NESTEDTAB"
 RETURN AS VALUE;

CREATE TABLE "PM"."ONLINE_MEDIA"
   (	"PRODUCT_ID" NUMBER(6,0),
	"PRODUCT_PHOTO" "ORDSYS"."ORDIMAGE" ,
	"PRODUCT_PHOTO_SIGNATURE" "ORDSYS"."ORDIMAGESIGNATURE" ,
	"PRODUCT_THUMBNAIL" "ORDSYS"."ORDIMAGE" ,
	"PRODUCT_VIDEO" "ORDSYS"."ORDVIDEO" ,
	"PRODUCT_AUDIO" "ORDSYS"."ORDAUDIO" ,
	"PRODUCT_TEXT" CLOB,
	"PRODUCT_TESTIMONIALS" "ORDSYS"."ORDDOC"
   ) ;

CREATE UNIQUE INDEX "PM"."PRINTMEDIA_PK" ON "PM"."PRINT_MEDIA" ("PRODUCT_ID", "AD_ID")
  ;

CREATE INDEX "PM"."SYS_FK0000091966N00007$" ON "PM"."TEXTDOCS_NESTEDTAB" ("NESTED_TABLE_ID")
  ;

CREATE UNIQUE INDEX "PM"."ONLINEMEDIA_PK" ON "PM"."ONLINE_MEDIA" ("PRODUCT_ID")
  ;

ALTER TABLE "PM"."PRINT_MEDIA" ADD CONSTRAINT "PRINTMEDIA__PK" PRIMARY KEY ("PRODUCT_ID", "AD_ID")
  USING INDEX (CREATE UNIQUE INDEX "PM"."PRINTMEDIA_PK" ON "PM"."PRINT_MEDIA" ("PRODUCT_ID", "AD_ID")
  )  ENABLE;

ALTER TABLE "PM"."ONLINE_MEDIA" ADD CONSTRAINT "ONLINEMEDIA__PK" PRIMARY KEY ("PRODUCT_ID")
  USING INDEX (CREATE UNIQUE INDEX "PM"."ONLINEMEDIA_PK" ON "PM"."ONLINE_MEDIA" ("PRODUCT_ID")
  )  ENABLE;

ALTER TABLE "PM"."PRINT_MEDIA" ADD CONSTRAINT "PRINTMEDIA_FK" FOREIGN KEY ("PRODUCT_ID")
	  REFERENCES "OE"."PRODUCT_INFORMATION" ("PRODUCT_ID") ENABLE;

ALTER TABLE "PM"."ONLINE_MEDIA" ADD CONSTRAINT "LOC_C_ID_FK" FOREIGN KEY ("PRODUCT_ID")
	  REFERENCES "OE"."PRODUCT_INFORMATION" ("PRODUCT_ID") ENABLE;

